require("./discuzq"),
require("./runtime"),require("./common"),require("./vendors"),require("./taro"),(wx["webpackJsonp"]=wx["webpackJsonp"]||[]).push([[6],{1105:function(e,t,r){"use strict";r.r(t);r(730);var a,o,i,n,s,c,p,u,l,b,d,h,O,y,f,g,j,m,v,w,k,P,D,T,x,C,I,L,S,U,E,R,z,M,A,N,F,_,V,B,W,q,Y,K,Q,H,G,J,$,X,Z,ee,te,re,ae,oe,ie,ne,se,ce,pe,ue,le,be,de,he,Oe,ye,fe,ge,je,me,ve,we,ke,Pe,De,Te,xe,Ce,Ie,Le,Se,Ue,Ee,Re,ze,Me,Ae,Ne,Fe,_e,Ve,Be=r(21),We=r(10),qe=r(22),Ye=r(2),Ke=r(6),Qe=r(12),He=r(13),Ge=r(8),Je=r(16),$e=r(17),Xe=r(3),Ze=r(4),et=r(9),tt=r(37),rt=r(107),at=r(14),ot=(r(62),r(7)),it=r(5),nt=r(19),st=r(20),ct={MINI:"miniProgram",OPEN:"openPlatform",NONE:"none"},pt=(a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(Qe["a"])(this,e),Object(Xe["a"])(this,"envConfig",{}),Object(at["a"])(this,"webConfig",o,this),Object(at["a"])(this,"platform",i,this),Object(at["a"])(this,"closeSiteConfig",n,this),Object(at["a"])(this,"theme",s,this),Object(at["a"])(this,"isUserLoginVisible",c,this),Object(at["a"])(this,"errPageType",p,this),Object(at["a"])(this,"pluginConfig",u,this),Object(at["a"])(this,"navInfo",l,this),this.envConfig=t.envConfig,this.webConfig=t.webConfig,this.platform=t.platform,this.pluginConfig=t.pluginConfig}return Object(He["a"])(e,[{key:"isRegister",get:function(){return!this.isSmsOpen&&"none"===this.wechatEnv&&this.registerClose}},{key:"isPC",get:function(){return"pc"===this.platform}},{key:"isSmsOpen",get:function(){return Object(st["a"])(this.webConfig,"qcloud.qcloudSms",!1)}},{key:"isMiniProgramOpen",get:function(){return Boolean(Object(st["a"])(this.webConfig,"passport.miniprogramOpen",!0))}},{key:"publishNeedBindPhone",get:function(){return Boolean(Object(st["a"])(this.webConfig,"other.publishNeedBindPhone",!1))}},{key:"publishNeedBindWechat",get:function(){return Boolean(Object(st["a"])(this.webConfig,"other.publishNeedBindWechat",!1))}},{key:"isOffiaccountOpen",get:function(){return Boolean(Object(st["a"])(this.webConfig,"passport.offiaccountOpen",!0))}},{key:"siteIconSrc",get:function(){return Object(st["a"])(this.webConfig,"setSite.siteLogo")}},{key:"siteName",get:function(){return Object(st["a"])(this.webConfig,"setSite.siteName")}},{key:"version",get:function(){return Object(st["a"])(this.webConfig,"setSite.version")}},{key:"siteIntroduction",get:function(){return Object(st["a"])(this.webConfig,"setSite.siteIntroduction")||"\u6682\u65e0\u4ecb\u7ecd"}},{key:"isAgreementRegister",get:function(){return Object(st["a"])(this.webConfig,"agreement.register",!0)}},{key:"agreementRegisterContent",get:function(){return Object(st["a"])(this.webConfig,"agreement.registerContent","")}},{key:"registerClose",get:function(){return Object(st["a"])(this.webConfig,"setReg.registerClose","")}},{key:"isAgreementPrivacy",get:function(){return Object(st["a"])(this.webConfig,"agreement.privacy",!0)}},{key:"agreementPrivacyContent",get:function(){return Object(st["a"])(this.webConfig,"agreement.privacyContent","")}},{key:"cashMinSum",get:function(){return Object(st["a"])(this.webConfig,"setCash.cashMinSum",1)}},{key:"wechatEnv",get:function(){return this.isMiniProgramOpen?ct.MINI:this.isOffiaccountOpen?ct.OPEN:ct.NONE}},{key:"isOpenQcloudVod",get:function(){return Object(st["a"])(this.webConfig,"qcloud.qcloudVod",!1)}},{key:"qcloudVodExt",get:function(){return Object(st["a"])(this.webConfig,"qcloud.qcloudVodExt","")}},{key:"qcloudVodSize",get:function(){return Object(st["a"])(this.webConfig,"qcloud.qcloudVodSize","")}},{key:"isWechatPayOpen",get:function(){return Object(st["a"])(this.webConfig,"paycenter.wxpayClose",!1)}},{key:"isIOSWechatPayOpen",get:function(){return Object(st["a"])(this.webConfig,"paycenter.wxpayIos",!1)}},{key:"siteBackgroundImage",get:function(){return Object(st["a"])(this.webConfig,"setSite.siteBackgroundImage")}},{key:"siteAuthor",get:function(){return Object(st["a"])(this.webConfig,"setSite.siteAuthor")}},{key:"siteMode",get:function(){return Object(st["a"])(this.webConfig,"setSite.siteMode")}},{key:"sitePrice",get:function(){return Object(st["a"])(this.webConfig,"setSite.sitePrice")}},{key:"countUsers",get:function(){return Object(st["a"])(this.webConfig,"other.countUsers")}},{key:"countThreads",get:function(){return Object(st["a"])(this.webConfig,"other.countThreads")}},{key:"siteExpire",get:function(){return Object(st["a"])(this.webConfig,"setSite.siteExpire")}},{key:"attachmentLimit",get:function(){return Number(Object(st["a"])(this.webConfig,"setAttach.supportMaxUploadAttachmentNum",9))}}]),e}(),o=Object(ot["a"])(a.prototype,"webConfig",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),i=Object(ot["a"])(a.prototype,"platform",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),n=Object(ot["a"])(a.prototype,"closeSiteConfig",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=Object(ot["a"])(a.prototype,"theme",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return tt["a"].light}}),c=Object(ot["a"])(a.prototype,"isUserLoginVisible",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=Object(ot["a"])(a.prototype,"errPageType",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=Object(ot["a"])(a.prototype,"pluginConfig",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=Object(ot["a"])(a.prototype,"navInfo",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{statusBarHeight:44,navHeight:40,menubtnWidth:80}}}),Object(ot["a"])(a.prototype,"isRegister",[it["computed"]],Object.getOwnPropertyDescriptor(a.prototype,"isRegister"),a.prototype),Object(ot["a"])(a.prototype,"isPC",[it["computed"]],Object.getOwnPropertyDescriptor(a.prototype,"isPC"),a.prototype),Object(ot["a"])(a.prototype,"isSmsOpen",[it["computed"]],Object.getOwnPropertyDescriptor(a.prototype,"isSmsOpen"),a.prototype),Object(ot["a"])(a.prototype,"isMiniProgramOpen",[it["computed"]],Object.getOwnPropertyDescriptor(a.prototype,"isMiniProgramOpen"),a.prototype),Object(ot["a"])(a.prototype,"publishNeedBindPhone",[it["computed"]],Object.getOwnPropertyDescriptor(a.prototype,"publishNeedBindPhone"),a.prototype),Object(ot["a"])(a.prototype,"publishNeedBindWechat",[it["computed"]],Object.getOwnPropertyDescriptor(a.prototype,"publishNeedBindWechat"),a.prototype),Object(ot["a"])(a.prototype,"isOffiaccountOpen",[it["computed"]],Object.getOwnPropertyDescriptor(a.prototype,"isOffiaccountOpen"),a.prototype),Object(ot["a"])(a.prototype,"siteIconSrc",[it["computed"]],Object.getOwnPropertyDescriptor(a.prototype,"siteIconSrc"),a.prototype),Object(ot["a"])(a.prototype,"siteName",[it["computed"]],Object.getOwnPropertyDescriptor(a.prototype,"siteName"),a.prototype),Object(ot["a"])(a.prototype,"version",[it["computed"]],Object.getOwnPropertyDescriptor(a.prototype,"version"),a.prototype),Object(ot["a"])(a.prototype,"siteIntroduction",[it["computed"]],Object.getOwnPropertyDescriptor(a.prototype,"siteIntroduction"),a.prototype),Object(ot["a"])(a.prototype,"isAgreementRegister",[it["computed"]],Object.getOwnPropertyDescriptor(a.prototype,"isAgreementRegister"),a.prototype),Object(ot["a"])(a.prototype,"agreementRegisterContent",[it["computed"]],Object.getOwnPropertyDescriptor(a.prototype,"agreementRegisterContent"),a.prototype),Object(ot["a"])(a.prototype,"registerClose",[it["computed"]],Object.getOwnPropertyDescriptor(a.prototype,"registerClose"),a.prototype),Object(ot["a"])(a.prototype,"isAgreementPrivacy",[it["computed"]],Object.getOwnPropertyDescriptor(a.prototype,"isAgreementPrivacy"),a.prototype),Object(ot["a"])(a.prototype,"agreementPrivacyContent",[it["computed"]],Object.getOwnPropertyDescriptor(a.prototype,"agreementPrivacyContent"),a.prototype),Object(ot["a"])(a.prototype,"cashMinSum",[it["computed"]],Object.getOwnPropertyDescriptor(a.prototype,"cashMinSum"),a.prototype),Object(ot["a"])(a.prototype,"wechatEnv",[it["computed"]],Object.getOwnPropertyDescriptor(a.prototype,"wechatEnv"),a.prototype),Object(ot["a"])(a.prototype,"isOpenQcloudVod",[it["computed"]],Object.getOwnPropertyDescriptor(a.prototype,"isOpenQcloudVod"),a.prototype),Object(ot["a"])(a.prototype,"qcloudVodExt",[it["computed"]],Object.getOwnPropertyDescriptor(a.prototype,"qcloudVodExt"),a.prototype),Object(ot["a"])(a.prototype,"qcloudVodSize",[it["computed"]],Object.getOwnPropertyDescriptor(a.prototype,"qcloudVodSize"),a.prototype),Object(ot["a"])(a.prototype,"isWechatPayOpen",[it["computed"]],Object.getOwnPropertyDescriptor(a.prototype,"isWechatPayOpen"),a.prototype),Object(ot["a"])(a.prototype,"isIOSWechatPayOpen",[it["computed"]],Object.getOwnPropertyDescriptor(a.prototype,"isIOSWechatPayOpen"),a.prototype),Object(ot["a"])(a.prototype,"siteBackgroundImage",[it["computed"]],Object.getOwnPropertyDescriptor(a.prototype,"siteBackgroundImage"),a.prototype),Object(ot["a"])(a.prototype,"siteAuthor",[it["computed"]],Object.getOwnPropertyDescriptor(a.prototype,"siteAuthor"),a.prototype),Object(ot["a"])(a.prototype,"siteMode",[it["computed"]],Object.getOwnPropertyDescriptor(a.prototype,"siteMode"),a.prototype),Object(ot["a"])(a.prototype,"sitePrice",[it["computed"]],Object.getOwnPropertyDescriptor(a.prototype,"sitePrice"),a.prototype),Object(ot["a"])(a.prototype,"countUsers",[it["computed"]],Object.getOwnPropertyDescriptor(a.prototype,"countUsers"),a.prototype),Object(ot["a"])(a.prototype,"countThreads",[it["computed"]],Object.getOwnPropertyDescriptor(a.prototype,"countThreads"),a.prototype),Object(ot["a"])(a.prototype,"siteExpire",[it["computed"]],Object.getOwnPropertyDescriptor(a.prototype,"siteExpire"),a.prototype),Object(ot["a"])(a.prototype,"attachmentLimit",[it["computed"]],Object.getOwnPropertyDescriptor(a.prototype,"attachmentLimit"),a.prototype),a),ut=pt,lt=(b=it["action"].bound,d=function(e){Object(Je["a"])(r,e);var t=Object($e["a"])(r);function r(e){var a;return Object(Qe["a"])(this,r),a=t.call(this,e),Object(at["a"])(Object(Ge["a"])(a),"initUserLoginEntryStatus",h,Object(Ge["a"])(a)),a}return Object(He["a"])(r,[{key:"getPluginConfig",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){var t,r,a;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(nt["readPluginList"])();case 2:return t=e.sent,r=t.code,a=t.data,0===r&&(this.pluginConfig=a),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"setPluginConfig",value:function(e){this.pluginConfig=e}},{key:"setPlatform",value:function(e){e!==this.platform&&(this.platform=e)}},{key:"getSiteInfo",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){var t;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(nt["readForum"])({});case 2:t=e.sent,t.data&&this.setSiteConfig(t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"setSiteConfig",value:function(e){this.webConfig=e}},{key:"setCloseSiteConfig",value:function(e){this.closeSiteConfig=e}},{key:"setErrPageType",value:function(e){this.errPageType=e}},{key:"changeTheme",value:function(e){this.theme=e}},{key:"checkSiteIsOpenDefautlThreadListData",value:function(){return!!(this.webConfig&&this.webConfig.setSite&&this.webConfig.setSite.siteOpenSort)}},{key:"setNavInfo",value:function(e){e&&(this.navInfo=e)}}]),r}(ut),Object(ot["a"])(d.prototype,"getPluginConfig",[it["action"]],Object.getOwnPropertyDescriptor(d.prototype,"getPluginConfig"),d.prototype),Object(ot["a"])(d.prototype,"setPluginConfig",[it["action"]],Object.getOwnPropertyDescriptor(d.prototype,"setPluginConfig"),d.prototype),Object(ot["a"])(d.prototype,"setPlatform",[it["action"]],Object.getOwnPropertyDescriptor(d.prototype,"setPlatform"),d.prototype),Object(ot["a"])(d.prototype,"getSiteInfo",[it["action"]],Object.getOwnPropertyDescriptor(d.prototype,"getSiteInfo"),d.prototype),Object(ot["a"])(d.prototype,"setSiteConfig",[it["action"]],Object.getOwnPropertyDescriptor(d.prototype,"setSiteConfig"),d.prototype),Object(ot["a"])(d.prototype,"setCloseSiteConfig",[it["action"]],Object.getOwnPropertyDescriptor(d.prototype,"setCloseSiteConfig"),d.prototype),Object(ot["a"])(d.prototype,"setErrPageType",[it["action"]],Object.getOwnPropertyDescriptor(d.prototype,"setErrPageType"),d.prototype),Object(ot["a"])(d.prototype,"changeTheme",[b],Object.getOwnPropertyDescriptor(d.prototype,"changeTheme"),d.prototype),h=Object(ot["a"])(d.prototype,"initUserLoginEntryStatus",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t,r;null!==(t=e.webConfig)&&void 0!==t&&null!==(r=t.setSite)&&void 0!==r&&r.usernameLoginIsdisplay?e.isUserLoginVisible=!0:e.isUserLoginVisible=!e.isSmsOpen&&"none"===e.wechatEnv}}}),Object(ot["a"])(d.prototype,"setNavInfo",[it["action"]],Object.getOwnPropertyDescriptor(d.prototype,"setNavInfo"),d.prototype),d),bt=lt,dt=r(129),ht=r(29),Ot=function(e,t){var r=t.listStore,a=t.namespace,o=r.updateAssignThreadInfoInLists.bind(r),i=r.deleteAssignThreadInLists.bind(r),n=r.addThreadInTargetList.bind(r),s=r.setAttribute.bind(r),c=r.setTargetListDataByList.bind(r);if(e)return new Proxy(e,{get:function(e,t){var r=Reflect.get(e,t);return"pageData"===t&&Array.isArray(r)?new Proxy(r,{set:function(e,t,r){var i=void 0===e[t]?"create":"modify";return"length"===t?(Reflect.set(e,t,r),!0):("create"===i&&n({namespace:a,threadInfo:r}),"modify"===i&&o({threadId:r.threadId,threadInfo:r}),!0)},deleteProperty:function(e,t){if(t in e)return i({threadId:e[t].threadId}),!0}}):r},set:function(e,t,r){return"pageData"===t?c({namespace:a,list:r}):s({namespace:a,key:t,value:r}),!0}})},yt=r(149),ft=(O=function(){function e(){Object(Qe["a"])(this,e),Object(at["a"])(this,"categories",y,this),Object(at["a"])(this,"sticks",f,this),Object(at["a"])(this,"drafts",g,this),Object(at["a"])(this,"latestReq",j,this),Object(at["a"])(this,"namespace",m,this),Object(at["a"])(this,"needDefault",v,this),Object(at["a"])(this,"filter",w,this),Object(at["a"])(this,"hiddenTabBar",k,this),Object(at["a"])(this,"hasOnScrollToLower",P,this),Object(at["a"])(this,"categoryError",D,this),Object(at["a"])(this,"recommends",T,this),Object(at["a"])(this,"recommendsStatus",x,this),Object(at["a"])(this,"topMenuIndex",C,this),Object(at["a"])(this,"threadTypelist",I,this),this.threadList=new yt["a"]}return Object(He["a"])(e,[{key:"TwoDThreads",get:function(){var e,t=[],r=null===(e=this.threadList.lists)||void 0===e?void 0:e[this.namespace];return null!==r&&void 0!==r&&r.data&&Object.values(null===r||void 0===r?void 0:r.data).forEach((function(e){t.push(e)})),t}},{key:"threads",get:function(){var e,t,r,a=null,o=null===(e=this.threadList.lists)||void 0===e?void 0:e[this.namespace],i=null===(t=this.threadList.lists)||void 0===t||null===(r=t[this.namespace])||void 0===r?void 0:r.attribs;if(null!==o&&void 0!==o&&o.data){var n=this.threadList.listAdapter(o);a=Object(We["a"])({pageData:n},i)}var s={listStore:this.threadList,namespace:this.namespace};return Ot(a,s)},set:function(e){e?this.threadList.setList({namespace:this.namespace,data:{data:e},page:e.currentPage}):this.threadList.clearList({namespace:this.namespace})}},{key:"hasThreadsData",get:function(){var e=this.threadList.getList({namespace:this.namespace});return!(null===e||void 0===e||!e.length)}},{key:"categoriesNoAll",get:function(){return(this.categories||[]).filter((function(e){return"\u5168\u90e8"!==e.name&&e.canCreateThread}))}},{key:"categoriesNames",get:function(){var e=(this.categories||[]).filter((function(e){return"\u5168\u90e8"!==e.name})),t=[];return e.forEach((function(e){t.push({categoryId:e.categoryId,name:e.name}),e.children.forEach((function(r){t.push({categoryId:r.categoryId,name:"".concat(e.name,"/").concat(r.name)})}))})),t}},{key:"isCurrentAllCategory",get:function(){var e=this.filter||{},t=e.categoryids,r=void 0===t?[]:t;return-1!==r.indexOf("all")}},{key:"threadError",get:function(){var e,t,r=null===(e=this.threadList.lists)||void 0===e||null===(t=e[this.namespace])||void 0===t?void 0:t.requestError;return r},set:function(e){this.threadList.lists[this.namespace].requestError=e}}]),e}(),y=Object(ot["a"])(O.prototype,"categories",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=Object(ot["a"])(O.prototype,"sticks",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=Object(ot["a"])(O.prototype,"drafts",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=Object(ot["a"])(O.prototype,"latestReq",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),m=Object(ot["a"])(O.prototype,"namespace",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"home"}}),Object(ot["a"])(O.prototype,"TwoDThreads",[it["computed"]],Object.getOwnPropertyDescriptor(O.prototype,"TwoDThreads"),O.prototype),Object(ot["a"])(O.prototype,"threads",[it["computed"]],Object.getOwnPropertyDescriptor(O.prototype,"threads"),O.prototype),Object(ot["a"])(O.prototype,"hasThreadsData",[it["computed"]],Object.getOwnPropertyDescriptor(O.prototype,"hasThreadsData"),O.prototype),v=Object(ot["a"])(O.prototype,"needDefault",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(ot["a"])(O.prototype,"categoriesNoAll",[it["computed"]],Object.getOwnPropertyDescriptor(O.prototype,"categoriesNoAll"),O.prototype),Object(ot["a"])(O.prototype,"categoriesNames",[it["computed"]],Object.getOwnPropertyDescriptor(O.prototype,"categoriesNames"),O.prototype),w=Object(ot["a"])(O.prototype,"filter",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{categoryids:["all"],sequence:0,sort:1,attention:0,types:"all",essence:0}}}),Object(ot["a"])(O.prototype,"isCurrentAllCategory",[it["computed"]],Object.getOwnPropertyDescriptor(O.prototype,"isCurrentAllCategory"),O.prototype),k=Object(ot["a"])(O.prototype,"hiddenTabBar",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),P=Object(ot["a"])(O.prototype,"hasOnScrollToLower",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Object(ot["a"])(O.prototype,"threadError",[it["computed"]],Object.getOwnPropertyDescriptor(O.prototype,"threadError"),O.prototype),D=Object(ot["a"])(O.prototype,"categoryError",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{isError:!1,errorText:"\u52a0\u8f7d\u5931\u8d25"}}}),T=Object(ot["a"])(O.prototype,"recommends",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=Object(ot["a"])(O.prototype,"recommendsStatus",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"none"}}),C=Object(ot["a"])(O.prototype,"topMenuIndex",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"0"}}),I=Object(ot["a"])(O.prototype,"threadTypelist",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O),gt=ft,jt=r(73),mt=r(197),vt=r(164),wt=(r(117),["pageData"]),kt=(L=it["action"].bound,S=it["action"].bound,U=it["action"].bound,E=function(e){Object(Je["a"])(r,e);var t=Object($e["a"])(r);function r(e){return Object(Qe["a"])(this,r),t.call(this,e)}return Object(He["a"])(r,[{key:"categoryName",get:function(){var e=this.categories||[],t=this.filter.categoryids;return Object(vt["c"])(e,t)}},{key:"activeCategoryId",get:function(){var e=this.categories||[],t=this.filter.categoryids,r=Object(vt["a"])(e,t),a=Object(qe["a"])(r,2),o=a[0];a[1];return o}},{key:"activeChildCategoryId",get:function(){var e=this.categories||[],t=this.filter.categoryids,r=Object(vt["a"])(e,t),a=Object(qe["a"])(r,2),o=(a[0],a[1]);return o}},{key:"currentCategories",get:function(){var e=this.categories||[],t=this.needDefault;return Object(vt["b"])(e,t)}},{key:"getThreadCommentList",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r,a,o;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=this._findAssignThread(t),!r||!r.data){e.next=8;break}return r.data.isLoading=!0,e.next=5,Object(nt["readCommentList"])({params:{filter:{thread:Number(t)},page:1,perPage:10,index:1}});case 5:a=e.sent,0===a.code?(r.data.commentList=(null===a||void 0===a||null===(o=a.data)||void 0===o?void 0:o.pageData)||[],r.data.requestError={isError:!1,errorText:"\u52a0\u8f7d\u5931\u8d25"}):r.data.requestError={isError:!0,errorText:a.msg||"\u52a0\u8f7d\u5931\u8d25"},r.data.isLoading=!1;case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"isNeedAddThread",value:function(e){var t=this.filter||{},r=t.categoryids,a=void 0===r?[]:r;return this.isCurrentAllCategory||-1!==a.indexOf(e)}},{key:"setFilter",value:function(e){this.filter=e}},{key:"setHiddenTabBar",value:function(e){this.hiddenTabBar=e}},{key:"setHasOnScrollToLower",value:function(e){this.hasOnScrollToLower=e}},{key:"setNeedDefault",value:function(e){this.needDefault=e}},{key:"resetErrorInfo",value:function(){this.threadError={isError:!1,errorText:""},this.categoryError={isError:!1,errorText:""}}},{key:"resetHomeThreadData",value:function(){this.threads=null,this.sticks=null,this.resetErrorInfo()}},{key:"refreshHomeData",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){var t,r,a,o,i,n,s=arguments;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=s.length>0&&void 0!==s[0]?s[0]:{},r=t.categoryIds,a=void 0===r?[]:r,null!==a&&void 0!==a&&a.length?(this.threads=null,this.sticks=null,this.resetErrorInfo(),this.setFilter({categoryids:a})):(o=this.filter.sequence,i=void 0===o?0:o,n=Object(vt["e"])(this.filter,"categoryids"),this.screenData({filter:{categoryids:n},sequence:i}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"deleteThreadsData",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){var t,r,a,o,i,n,s,c,p,u,l,b,d=arguments;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=d.length>0&&void 0!==d[0]?d[0]:{},r=t.id,a=d.length>1?d[1]:void 0,r&&(null===(o=this.threadList)||void 0===o||o.deleteAssignThreadInLists({threadId:r})),r&&this.threads&&(c=this.threads.pageData,p=void 0===c?[]:c,u=p.filter((function(e){return"".concat(e.threadId)!=="".concat(r)})),null!==(i=this.threads)&&void 0!==i&&i.pageData&&(this.threads.pageData=u),l=null===(n=this.sticks)||void 0===n?void 0:n.filter((function(e){return"".concat(e.threadId)!=="".concat(r)})),this.sticks&&(this.sticks=l),(null!==(s=this.threads)&&void 0!==s&&s.pageData||this.sticks)&&(b=Number(this.threads.totalCount),this.threads.totalCount=b-1),this.getReadCategories(),(null===a||void 0===a?void 0:a.getSiteInfo)&&a.getSiteInfo());case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"screenData",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){var t,r,a,o,i,n,s,c,p,u,l=arguments;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},r=t.filter,a=void 0===r?{}:r,o=t.sequence,i=void 0===o?0:o,n=t.perPage,s=void 0===n?10:n,c=t.page,p=void 0===c?1:c,u=t.isMini,void 0!==u&&u,this.threads=null,this.sticks=null,this.resetErrorInfo(),e.next=6,this.getRreadStickList(a.categoryids);case 6:return e.next=8,this.getReadThreadList({filter:a,sequence:i,perPage:s,page:p});case 8:return e.abrupt("return");case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getReadThreadList",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){var t,r,a,o,i,n,s,c,p,u,l,b,d,h,O,y,f=arguments;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},r=t.filter,a=void 0===r?{}:r,o=t.sequence,i=void 0===o?0:o,n=t.perPage,s=void 0===n?10:n,c=t.page,p=void 0===c?1:c,u=t.isDraft,l=void 0!==u&&u,b=f.length>1&&void 0!==f[1]?f[1]:null,this.latestReq+=1,d=this.latestReq,e.next=6,this.threadList.fetchList({namespace:this.namespace,perPage:s,page:p,filter:a,sequence:i},b);case 6:if(h=e.sent,d===this.latestReq){e.next=9;break}return e.abrupt("return");case 9:if(0!==h.code||!h.data){e.next=14;break}return l?this.drafts&&h.data.pageData&&1!==p?((O=this.drafts.pageData).push.apply(O,Object(ht["a"])(h.data.pageData)),y=this.drafts.pageData.slice(),this.setDrafts(Object(We["a"])(Object(We["a"])({},h.data),{},{currentPage:h.data.currentPage,pageData:y}))):this.setDrafts(h.data):this.threadList.setList({namespace:this.namespace,data:{data:this.adapterList(h.data)},page:p}),e.abrupt("return",h.data);case 14:return this.threadError={isError:!0,errorText:(null===h||void 0===h?void 0:h.msg)||""},e.abrupt("return",Promise.reject((null===h||void 0===h?void 0:h.msg)||""));case 16:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getReadCategories",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){var t,r,a,o,i=arguments;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},r=i.length>1&&void 0!==i[1]?i[1]:null,e.next=4,Object(nt["readCategories"])(t,r);case 4:if(a=e.sent,0!==a.code){e.next=14;break}if(!a.data){e.next=10;break}return o=Object(ht["a"])(a.data),this.setCategories(o),e.abrupt("return",this.categories);case 10:return this.setCategories([]),e.abrupt("return",[]);case 14:return this.categoryError={isError:!0,errorText:(null===a||void 0===a?void 0:a.msg)||"\u52a0\u8f7d\u5931\u8d25"},e.abrupt("return",Promise.reject((null===a||void 0===a?void 0:a.msg)||"\u52a0\u8f7d\u5931\u8d25"));case 16:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getRreadStickList",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){var t,r,a,o=arguments;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:[],r=o.length>1&&void 0!==o[1]?o[1]:null,e.next=4,Object(nt["readStickList"])({params:{categoryIds:t}},r);case 4:if(a=e.sent,0!==a.code){e.next=9;break}return this.sticks=null,this.setSticks(a.data||[]),e.abrupt("return",this.sticks);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"_findAssignThread",value:function(e){if(this.threads){for(var t=this.threads.pageData,r=void 0===t?[]:t,a=0;a<r.length;a++)if(+r[a].threadId===+e)return{index:a,data:r[a]};return null}}},{key:"findAssignSticks",value:function(e){if(this.sticks){for(var t=0;t<this.sticks.length;t++)if(this.sticks[t].threadId===e)return{index:t,data:this.sticks[t]};return null}}},{key:"setCategories",value:function(e){this.categories=e}},{key:"setSticks",value:function(e){this.sticks=e}},{key:"setThreads",value:function(e){this.threads=e}},{key:"setDrafts",value:function(e){this.drafts=e}},{key:"combineThreadIndexes",value:function(e,t,r){var a=e||{},o=a.content,i=void 0===o?{}:o,n=i||{},s=n.indexes,c=void 0===s?{}:s,p=Object(We["a"])({},c);return p[t]=r,Object(We["a"])(Object(We["a"])({},e),{},{content:Object(We["a"])(Object(We["a"])({},i),{},{indexes:p}),_time:(new Date).getTime()})}},{key:"updateListThreadIndexes",value:function(e,t,r){var a,o=this._findAssignThread(e);if(this.updataThreadIndexesAllData(e,t,r),o){var i=o.index,n=o.data,s=this.combineThreadIndexes(n,t,r);return null!==(a=this.threads)&&void 0!==a&&a.pageData&&(this.threads.pageData[i]=s),this.updateAssignThreadAllData(e,s),s}}},{key:"updataThreadIndexesAllData",value:function(e,t,r){var a=jt["a"].isNumber(e)?e:+e,o=this.threadList.findAssignThreadInLists({threadId:a}),i=Object(qe["a"])(o,1),n=i[0];if(n){var s=n.data,c=this.combineThreadIndexes(s,t,r);this.threadList.updateAssignThreadInfoInLists({threadId:a,threadInfo:c})}}},{key:"updateAssignThreadAllData",value:function(e,t){if(!e||!t||!Object.keys(t).length)return!1;this.updateAssignSticksInfo(e,t);var r=this._findAssignThread(jt["a"].isNumber(e)?e:+e);if(!r)return!1;var a=r.index;r.data;return this.threads.pageData[a]=t,this.threadList.updateAssignThreadInfoInLists({threadId:jt["a"].isNumber(e)?e:+e,threadInfo:t}),!0}},{key:"updateAssignSticksInfo",value:function(e,t){var r=this.findAssignSticks(e);if(r&&0!==r.length){var a=Object(vt["e"])(this.filter,"categoryids");this.getRreadStickList(a)}}},{key:"addThread",value:function(e){var t=this,r=e.threadId,a=void 0===r?"":r,o=this._findAssignThread(a),i=this.threadList.findAssignThreadInTargetList({threadId:a,namespace:"my"}),n=function(e){var r=e.threadInfo,a=e.threadId;i?t.threadList.updateAssignThreadInfoInLists({threadId:a,threadInfo:r}):t.threadList.addThreadInTargetList({namespace:"my",threadInfo:r})};if(n({threadInfo:e,threadId:a}),o&&0!==o.length)this.updateAssignThreadAllData(a,e);else{var s=this.threads||{},c=s.pageData;if(e.isApproved&&c){this.threadList.addThreadInTargetList({namespace:"home",threadInfo:e});var p=Number(this.threads.totalCount);this.threads.totalCount=p+1}}}},{key:"updateThreadInfo",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){var t,r,a,o,i,n=arguments;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},r=t.pid,a=t.id,o=t.data,i=void 0===o?{}:o,e.next=3,Object(nt["updatePosts"])({data:{postId:r,id:a,data:i}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateThreadShare",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){var t,r,a=arguments;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},r=t.threadId,e.next=3,Object(nt["createThreadShare"])({data:{threadId:r}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getRecommends",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){var t,r,a,o,i=arguments;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},r=t.categoryIds,a=void 0===r?[]:r,this.updateRecommendsStatus("loading"),e.next=4,Object(nt["readRecommends"])({params:{categoryIds:a}});case 4:if(o=e.sent,0!==o.code){e.next=11;break}return this.setRecommends(o.data||[]),this.updateRecommendsStatus("none"),e.abrupt("return",this.recommends);case 11:return this.updateRecommendsStatus("error"),e.abrupt("return",Promise.reject((null===o||void 0===o?void 0:o.msg)||"\u52a0\u8f7d\u5931\u8d25"));case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"setRecommends",value:function(e){this.recommends=e}},{key:"updateRecommendsStatus",value:function(e){this.recommendsStatus=e}},{key:"adapterList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.pageData,r=void 0===t?[]:t,a=Object(dt["a"])(e,wt),o=r.map((function(e){return e.openedMore=!1,e.commentList=[],e.isLoading=!1,e.requestError={isError:!1,errorText:"\u52a0\u8f7d\u5931\u8d25"},e}));return Object(We["a"])({pageData:o},a)}},{key:"fetchThreadTypelist",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){var t,r,a,o,i;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!((null===(t=this.threadTypelist)||void 0===t?void 0:t.length)>0)){e.next=2;break}return e.abrupt("return",this.threadTypelist);case 2:return e.next=4,Object(nt["readTypelist"])();case 4:return r=e.sent,a=r||{},o=a.code,i=a.data,0===o&&this.setThreadTypelist(i),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"setThreadTypelist",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.threadTypelist=(e||[]).map((function(e){var t=e.name,r=e.type;return{name:t,pid:r,label:t,value:r,isActive:!1}}))}}]),r}(gt),Object(ot["a"])(E.prototype,"categoryName",[it["computed"]],Object.getOwnPropertyDescriptor(E.prototype,"categoryName"),E.prototype),Object(ot["a"])(E.prototype,"activeCategoryId",[it["computed"]],Object.getOwnPropertyDescriptor(E.prototype,"activeCategoryId"),E.prototype),Object(ot["a"])(E.prototype,"activeChildCategoryId",[it["computed"]],Object.getOwnPropertyDescriptor(E.prototype,"activeChildCategoryId"),E.prototype),Object(ot["a"])(E.prototype,"currentCategories",[it["computed"]],Object.getOwnPropertyDescriptor(E.prototype,"currentCategories"),E.prototype),Object(ot["a"])(E.prototype,"getThreadCommentList",[it["action"]],Object.getOwnPropertyDescriptor(E.prototype,"getThreadCommentList"),E.prototype),Object(ot["a"])(E.prototype,"isNeedAddThread",[it["action"]],Object.getOwnPropertyDescriptor(E.prototype,"isNeedAddThread"),E.prototype),Object(ot["a"])(E.prototype,"setFilter",[it["action"]],Object.getOwnPropertyDescriptor(E.prototype,"setFilter"),E.prototype),Object(ot["a"])(E.prototype,"setHiddenTabBar",[it["action"]],Object.getOwnPropertyDescriptor(E.prototype,"setHiddenTabBar"),E.prototype),Object(ot["a"])(E.prototype,"setHasOnScrollToLower",[it["action"]],Object.getOwnPropertyDescriptor(E.prototype,"setHasOnScrollToLower"),E.prototype),Object(ot["a"])(E.prototype,"setNeedDefault",[L],Object.getOwnPropertyDescriptor(E.prototype,"setNeedDefault"),E.prototype),Object(ot["a"])(E.prototype,"resetErrorInfo",[it["action"]],Object.getOwnPropertyDescriptor(E.prototype,"resetErrorInfo"),E.prototype),Object(ot["a"])(E.prototype,"resetHomeThreadData",[it["action"]],Object.getOwnPropertyDescriptor(E.prototype,"resetHomeThreadData"),E.prototype),Object(ot["a"])(E.prototype,"refreshHomeData",[it["action"]],Object.getOwnPropertyDescriptor(E.prototype,"refreshHomeData"),E.prototype),Object(ot["a"])(E.prototype,"deleteThreadsData",[it["action"]],Object.getOwnPropertyDescriptor(E.prototype,"deleteThreadsData"),E.prototype),Object(ot["a"])(E.prototype,"screenData",[it["action"]],Object.getOwnPropertyDescriptor(E.prototype,"screenData"),E.prototype),Object(ot["a"])(E.prototype,"getReadThreadList",[it["action"]],Object.getOwnPropertyDescriptor(E.prototype,"getReadThreadList"),E.prototype),Object(ot["a"])(E.prototype,"getReadCategories",[S],Object.getOwnPropertyDescriptor(E.prototype,"getReadCategories"),E.prototype),Object(ot["a"])(E.prototype,"getRreadStickList",[it["action"]],Object.getOwnPropertyDescriptor(E.prototype,"getRreadStickList"),E.prototype),Object(ot["a"])(E.prototype,"setCategories",[U],Object.getOwnPropertyDescriptor(E.prototype,"setCategories"),E.prototype),Object(ot["a"])(E.prototype,"setSticks",[it["action"]],Object.getOwnPropertyDescriptor(E.prototype,"setSticks"),E.prototype),Object(ot["a"])(E.prototype,"setThreads",[it["action"]],Object.getOwnPropertyDescriptor(E.prototype,"setThreads"),E.prototype),Object(ot["a"])(E.prototype,"setDrafts",[it["action"]],Object.getOwnPropertyDescriptor(E.prototype,"setDrafts"),E.prototype),Object(ot["a"])(E.prototype,"combineThreadIndexes",[it["action"]],Object.getOwnPropertyDescriptor(E.prototype,"combineThreadIndexes"),E.prototype),Object(ot["a"])(E.prototype,"updateListThreadIndexes",[it["action"]],Object.getOwnPropertyDescriptor(E.prototype,"updateListThreadIndexes"),E.prototype),Object(ot["a"])(E.prototype,"updataThreadIndexesAllData",[it["action"]],Object.getOwnPropertyDescriptor(E.prototype,"updataThreadIndexesAllData"),E.prototype),Object(ot["a"])(E.prototype,"updateAssignThreadAllData",[it["action"]],Object.getOwnPropertyDescriptor(E.prototype,"updateAssignThreadAllData"),E.prototype),Object(ot["a"])(E.prototype,"updateAssignSticksInfo",[it["action"]],Object.getOwnPropertyDescriptor(E.prototype,"updateAssignSticksInfo"),E.prototype),Object(ot["a"])(E.prototype,"addThread",[it["action"]],Object.getOwnPropertyDescriptor(E.prototype,"addThread"),E.prototype),Object(ot["a"])(E.prototype,"updateThreadInfo",[it["action"]],Object.getOwnPropertyDescriptor(E.prototype,"updateThreadInfo"),E.prototype),Object(ot["a"])(E.prototype,"updateThreadShare",[it["action"]],Object.getOwnPropertyDescriptor(E.prototype,"updateThreadShare"),E.prototype),Object(ot["a"])(E.prototype,"getRecommends",[it["action"]],Object.getOwnPropertyDescriptor(E.prototype,"getRecommends"),E.prototype),Object(ot["a"])(E.prototype,"setRecommends",[it["action"]],Object.getOwnPropertyDescriptor(E.prototype,"setRecommends"),E.prototype),Object(ot["a"])(E.prototype,"updateRecommendsStatus",[it["action"]],Object.getOwnPropertyDescriptor(E.prototype,"updateRecommendsStatus"),E.prototype),Object(ot["a"])(E.prototype,"fetchThreadTypelist",[it["action"]],Object.getOwnPropertyDescriptor(E.prototype,"fetchThreadTypelist"),E.prototype),Object(ot["a"])(E.prototype,"setThreadTypelist",[it["action"]],Object.getOwnPropertyDescriptor(E.prototype,"setThreadTypelist"),E.prototype),E),Pt=kt,Dt=r(101),Tt=r(23),xt=function(){},Ct=(R=function(){function e(t){Object(Qe["a"])(this,e),Object(Xe["a"])(this,"rebindTimer",null),Object(at["a"])(this,"onLoginCallback",z,this),Object(at["a"])(this,"userInfo",M,this),Object(at["a"])(this,"loginStatus",A,this),Object(at["a"])(this,"accessToken",N,this),Object(at["a"])(this,"weixinNickName",F,this),Object(at["a"])(this,"permissions",_,this),Object(at["a"])(this,"shareNickname",V,this),Object(at["a"])(this,"shareAvatar",B,this),Object(at["a"])(this,"shareThreadid",W,this),Object(at["a"])(this,"shareContent",q,this),Object(at["a"])(this,"userThreads",Y,this),Object(at["a"])(this,"userThreadsPage",K,this),Object(at["a"])(this,"userThreadsTotalCount",Q,this),Object(at["a"])(this,"userThreadsTotalPage",H,this),Object(at["a"])(this,"payGroups",G,this),Object(at["a"])(this,"userLikes",J,this),Object(at["a"])(this,"editUserName",$,this),Object(at["a"])(this,"editNickName",X,this),Object(at["a"])(this,"editSignature",Z,this),Object(at["a"])(this,"editAvatarUrl",ee,this),Object(at["a"])(this,"editBackgroundUrl",te,this),Object(at["a"])(this,"rebindQRCode",re,this),Object(at["a"])(this,"isQrCodeValid",ae,this),Object(at["a"])(this,"userSigninFields",oe,this),Object(at["a"])(this,"targetUser",ie,this),Object(at["a"])(this,"targetUserId",ne,this),Object(at["a"])(this,"targetUserThreads",se,this),Object(at["a"])(this,"targetUserThreadsPage",ce,this),Object(at["a"])(this,"targetUserThreadsTotalCount",pe,this),Object(at["a"])(this,"targetUserThreadsTotalPage",ue,this),Object(at["a"])(this,"oldPassword",le,this),Object(at["a"])(this,"newPassword",be,this),Object(at["a"])(this,"newPasswordRepeat",de,this),Object(at["a"])(this,"newMobile",he,this),Object(at["a"])(this,"oldMobileVerifyCode",Oe,this),Object(at["a"])(this,"newMobileVerifyCode",ye,this),Object(Xe["a"])(this,"oldCodeTimer",null),Object(at["a"])(this,"oldCodeTimeout",fe,this),Object(Xe["a"])(this,"newCodeTimer",null),Object(at["a"])(this,"newCodeTimeout",ge,this),Object(at["a"])(this,"userShield",je,this),Object(at["a"])(this,"userShieldPage",me,this),Object(at["a"])(this,"userShieldTotalPage",ve,this),Object(at["a"])(this,"userShieldTotalCount",we,this),Object(at["a"])(this,"targetUsers",ke,this),Object(at["a"])(this,"followStore",Pe,this),Object(at["a"])(this,"fansStore",De,this),this.userInfo=t.userInfo?t.userInfo:null}return Object(He["a"])(e,[{key:"userStatus",get:function(){return Object(st["a"])(this.userInfo,"status")}},{key:"canWalletPay",get:function(){return Object(st["a"])(this.userInfo,"canWalletPay")}},{key:"id",get:function(){return Object(st["a"])(this.userInfo,"id")}},{key:"followCount",get:function(){return Object(st["a"])(this.userInfo,"followCount")}},{key:"fansCount",get:function(){return Object(st["a"])(this.userInfo,"fansCount")}},{key:"likedCount",get:function(){return Object(st["a"])(this.userInfo,"likedCount")}},{key:"username",get:function(){return Object(st["a"])(this.userInfo,"username")}},{key:"nickname",get:function(){return Object(st["a"])(this.userInfo,"nickname")}},{key:"backgroundUrl",get:function(){return Object(st["a"])(this.userInfo,"backgroundUrl")}},{key:"originalBackGroundUrl",get:function(){return Object(st["a"])(this.userInfo,"originalBackGroundUrl")}},{key:"signature",get:function(){return Object(st["a"])(this.userInfo,"signature")}},{key:"avatarUrl",get:function(){return Object(st["a"])(this.userInfo,"avatarUrl")}},{key:"originalAvatarUrl",get:function(){return Object(st["a"])(this.userInfo,"originalAvatarUrl")}},{key:"mobile",get:function(){return Object(st["a"])(this.userInfo,"mobile")}},{key:"isBindWechat",get:function(){return Object(st["a"])(this.userInfo,"isBindWechat")}},{key:"originalMobile",get:function(){return Object(st["a"])(this.userInfo,"originalMobile")}},{key:"unionid",get:function(){return Object(st["a"])(this.userInfo,"unionid")}},{key:"group",get:function(){return Object(st["a"])(this.userInfo,"group")}},{key:"paid",get:function(){return Object(st["a"])(this.userInfo,"paid")}},{key:"wxNickname",get:function(){return Object(st["a"])(this.userInfo,"wxNickname")}},{key:"wxHeadImgUrl",get:function(){return Object(st["a"])(this.userInfo,"wxHeadImgUrl")}},{key:"canEditUsername",get:function(){return Object(st["a"])(this.userInfo,"canEditUsername")}},{key:"targetUserFollowCount",get:function(){return Object(st["a"])(this.targetUser,"followCount")}},{key:"targetUserFansCount",get:function(){return Object(st["a"])(this.targetUser,"fansCount")}},{key:"targetUserLikedCount",get:function(){return Object(st["a"])(this.targetUser,"likedCount")}},{key:"targetUserUsername",get:function(){return Object(st["a"])(this.targetUser,"username")}},{key:"targetUserNickname",get:function(){return Object(st["a"])(this.targetUser,"nickname")}},{key:"targetUserBackgroundUrl",get:function(){return Object(st["a"])(this.targetUser,"backgroundUrl")}},{key:"targetOriginalBackGroundUrl",get:function(){return Object(st["a"])(this.targetUser,"originalBackGroundUrl")}},{key:"targetUserSignature",get:function(){return Object(st["a"])(this.targetUser,"signature")}},{key:"targetUserAvatarUrl",get:function(){return Object(st["a"])(this.targetUser,"avatarUrl")}},{key:"targetOriginalAvatarUrl",get:function(){return Object(st["a"])(this.targetUser,"originalAvatarUrl")}},{key:"targetUserMobile",get:function(){return Object(st["a"])(this.targetUser,"mobile")}},{key:"targetUserDenyStatus",get:function(){return Object(st["a"])(this.targetUser,"isDeny")}},{key:"hasPassword",get:function(){return Object(st["a"])(this.userInfo,"hasPassword")}},{key:"isAdmini",get:function(){return 1===Object(st["a"])(this.userInfo,"group.groupId")}},{key:"groupName",get:function(){return Object(st["a"])(this.userInfo,"group.groupName")}},{key:"expiredDays",get:function(){return Object(st["a"])(this.userInfo,"expiredDays")}},{key:"expiredAt",get:function(){return Object(st["a"])(this.userInfo,"expiredAt")}},{key:"isIndefiniteDuration",get:function(){return Number(Object(st["a"])(this.userInfo,"expiredDays"))>=1e4}},{key:"threadExtendPermissions",get:function(){var e,t=this.permissions;return e={},Object(Xe["a"])(e,Dt["c"].emoji,!0),Object(Xe["a"])(e,Dt["c"].at,!0),Object(Xe["a"])(e,Dt["c"].topic,!0),Object(Xe["a"])(e,Dt["c"].attach,Object(st["a"])(t,"insertAttachment.enable")),Object(Xe["a"])(e,Dt["c"].pay,Object(st["a"])(t,"insertPay.enable")),Object(Xe["a"])(e,Dt["c"].redpacket,Object(st["a"])(t,"insertRedPacket.enable")),Object(Xe["a"])(e,Tt["h"].image,Object(st["a"])(t,"insertImage.enable")),Object(Xe["a"])(e,Tt["h"].video,Object(st["a"])(t,"insertVideo.enable")),Object(Xe["a"])(e,Tt["h"].vote,Object(st["a"])(t,"insertVote.enable")),Object(Xe["a"])(e,Tt["h"].voice,Object(st["a"])(t,"insertAudio.enable")),Object(Xe["a"])(e,Tt["h"].goods,Object(st["a"])(t,"insertGoods.enable")),Object(Xe["a"])(e,Tt["h"].reward,Object(st["a"])(t,"insertReward.enable")),Object(Xe["a"])(e,Tt["h"].anonymity,Object(st["a"])(t,"allowAnonymous.enable")),Object(Xe["a"])(e,"createThread",Object(st["a"])(t,"createThread.enable")),e}}]),e}(),z=Object(ot["a"])(R.prototype,"onLoginCallback",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return xt}}),M=Object(ot["a"])(R.prototype,"userInfo",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=Object(ot["a"])(R.prototype,"loginStatus",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),N=Object(ot["a"])(R.prototype,"accessToken",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=Object(ot["a"])(R.prototype,"weixinNickName",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=Object(ot["a"])(R.prototype,"permissions",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=Object(ot["a"])(R.prototype,"shareNickname",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),B=Object(ot["a"])(R.prototype,"shareAvatar",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),W=Object(ot["a"])(R.prototype,"shareThreadid",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),q=Object(ot["a"])(R.prototype,"shareContent",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Y=Object(ot["a"])(R.prototype,"userThreads",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),K=Object(ot["a"])(R.prototype,"userThreadsPage",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Q=Object(ot["a"])(R.prototype,"userThreadsTotalCount",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),H=Object(ot["a"])(R.prototype,"userThreadsTotalPage",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),G=Object(ot["a"])(R.prototype,"payGroups",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),J=Object(ot["a"])(R.prototype,"userLikes",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),$=Object(ot["a"])(R.prototype,"editUserName",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),X=Object(ot["a"])(R.prototype,"editNickName",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Z=Object(ot["a"])(R.prototype,"editSignature",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ee=Object(ot["a"])(R.prototype,"editAvatarUrl",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=Object(ot["a"])(R.prototype,"editBackgroundUrl",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=Object(ot["a"])(R.prototype,"rebindQRCode",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=Object(ot["a"])(R.prototype,"isQrCodeValid",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),oe=Object(ot["a"])(R.prototype,"userSigninFields",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ie=Object(ot["a"])(R.prototype,"targetUser",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=Object(ot["a"])(R.prototype,"targetUserId",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=Object(ot["a"])(R.prototype,"targetUserThreads",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),ce=Object(ot["a"])(R.prototype,"targetUserThreadsPage",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),pe=Object(ot["a"])(R.prototype,"targetUserThreadsTotalCount",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ue=Object(ot["a"])(R.prototype,"targetUserThreadsTotalPage",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),le=Object(ot["a"])(R.prototype,"oldPassword",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),be=Object(ot["a"])(R.prototype,"newPassword",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),de=Object(ot["a"])(R.prototype,"newPasswordRepeat",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),he=Object(ot["a"])(R.prototype,"newMobile",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Oe=Object(ot["a"])(R.prototype,"oldMobileVerifyCode",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ye=Object(ot["a"])(R.prototype,"newMobileVerifyCode",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),fe=Object(ot["a"])(R.prototype,"oldCodeTimeout",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ge=Object(ot["a"])(R.prototype,"newCodeTimeout",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),je=Object(ot["a"])(R.prototype,"userShield",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),me=Object(ot["a"])(R.prototype,"userShieldPage",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),ve=Object(ot["a"])(R.prototype,"userShieldTotalPage",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),we=Object(ot["a"])(R.prototype,"userShieldTotalCount",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ke=Object(ot["a"])(R.prototype,"targetUsers",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Pe=Object(ot["a"])(R.prototype,"followStore",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),De=Object(ot["a"])(R.prototype,"fansStore",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Object(ot["a"])(R.prototype,"userStatus",[it["computed"]],Object.getOwnPropertyDescriptor(R.prototype,"userStatus"),R.prototype),Object(ot["a"])(R.prototype,"canWalletPay",[it["computed"]],Object.getOwnPropertyDescriptor(R.prototype,"canWalletPay"),R.prototype),Object(ot["a"])(R.prototype,"id",[it["computed"]],Object.getOwnPropertyDescriptor(R.prototype,"id"),R.prototype),Object(ot["a"])(R.prototype,"followCount",[it["computed"]],Object.getOwnPropertyDescriptor(R.prototype,"followCount"),R.prototype),Object(ot["a"])(R.prototype,"fansCount",[it["computed"]],Object.getOwnPropertyDescriptor(R.prototype,"fansCount"),R.prototype),Object(ot["a"])(R.prototype,"likedCount",[it["computed"]],Object.getOwnPropertyDescriptor(R.prototype,"likedCount"),R.prototype),Object(ot["a"])(R.prototype,"username",[it["computed"]],Object.getOwnPropertyDescriptor(R.prototype,"username"),R.prototype),Object(ot["a"])(R.prototype,"nickname",[it["computed"]],Object.getOwnPropertyDescriptor(R.prototype,"nickname"),R.prototype),Object(ot["a"])(R.prototype,"backgroundUrl",[it["computed"]],Object.getOwnPropertyDescriptor(R.prototype,"backgroundUrl"),R.prototype),Object(ot["a"])(R.prototype,"originalBackGroundUrl",[it["computed"]],Object.getOwnPropertyDescriptor(R.prototype,"originalBackGroundUrl"),R.prototype),Object(ot["a"])(R.prototype,"signature",[it["computed"]],Object.getOwnPropertyDescriptor(R.prototype,"signature"),R.prototype),Object(ot["a"])(R.prototype,"avatarUrl",[it["computed"]],Object.getOwnPropertyDescriptor(R.prototype,"avatarUrl"),R.prototype),Object(ot["a"])(R.prototype,"originalAvatarUrl",[it["computed"]],Object.getOwnPropertyDescriptor(R.prototype,"originalAvatarUrl"),R.prototype),Object(ot["a"])(R.prototype,"mobile",[it["computed"]],Object.getOwnPropertyDescriptor(R.prototype,"mobile"),R.prototype),Object(ot["a"])(R.prototype,"isBindWechat",[it["computed"]],Object.getOwnPropertyDescriptor(R.prototype,"isBindWechat"),R.prototype),Object(ot["a"])(R.prototype,"originalMobile",[it["computed"]],Object.getOwnPropertyDescriptor(R.prototype,"originalMobile"),R.prototype),Object(ot["a"])(R.prototype,"unionid",[it["computed"]],Object.getOwnPropertyDescriptor(R.prototype,"unionid"),R.prototype),Object(ot["a"])(R.prototype,"group",[it["computed"]],Object.getOwnPropertyDescriptor(R.prototype,"group"),R.prototype),Object(ot["a"])(R.prototype,"paid",[it["computed"]],Object.getOwnPropertyDescriptor(R.prototype,"paid"),R.prototype),Object(ot["a"])(R.prototype,"wxNickname",[it["computed"]],Object.getOwnPropertyDescriptor(R.prototype,"wxNickname"),R.prototype),Object(ot["a"])(R.prototype,"wxHeadImgUrl",[it["computed"]],Object.getOwnPropertyDescriptor(R.prototype,"wxHeadImgUrl"),R.prototype),Object(ot["a"])(R.prototype,"canEditUsername",[it["computed"]],Object.getOwnPropertyDescriptor(R.prototype,"canEditUsername"),R.prototype),Object(ot["a"])(R.prototype,"targetUserFollowCount",[it["computed"]],Object.getOwnPropertyDescriptor(R.prototype,"targetUserFollowCount"),R.prototype),Object(ot["a"])(R.prototype,"targetUserFansCount",[it["computed"]],Object.getOwnPropertyDescriptor(R.prototype,"targetUserFansCount"),R.prototype),Object(ot["a"])(R.prototype,"targetUserLikedCount",[it["computed"]],Object.getOwnPropertyDescriptor(R.prototype,"targetUserLikedCount"),R.prototype),Object(ot["a"])(R.prototype,"targetUserUsername",[it["computed"]],Object.getOwnPropertyDescriptor(R.prototype,"targetUserUsername"),R.prototype),Object(ot["a"])(R.prototype,"targetUserNickname",[it["computed"]],Object.getOwnPropertyDescriptor(R.prototype,"targetUserNickname"),R.prototype),Object(ot["a"])(R.prototype,"targetUserBackgroundUrl",[it["computed"]],Object.getOwnPropertyDescriptor(R.prototype,"targetUserBackgroundUrl"),R.prototype),Object(ot["a"])(R.prototype,"targetOriginalBackGroundUrl",[it["computed"]],Object.getOwnPropertyDescriptor(R.prototype,"targetOriginalBackGroundUrl"),R.prototype),Object(ot["a"])(R.prototype,"targetUserSignature",[it["computed"]],Object.getOwnPropertyDescriptor(R.prototype,"targetUserSignature"),R.prototype),Object(ot["a"])(R.prototype,"targetUserAvatarUrl",[it["computed"]],Object.getOwnPropertyDescriptor(R.prototype,"targetUserAvatarUrl"),R.prototype),Object(ot["a"])(R.prototype,"targetOriginalAvatarUrl",[it["computed"]],Object.getOwnPropertyDescriptor(R.prototype,"targetOriginalAvatarUrl"),R.prototype),Object(ot["a"])(R.prototype,"targetUserMobile",[it["computed"]],Object.getOwnPropertyDescriptor(R.prototype,"targetUserMobile"),R.prototype),Object(ot["a"])(R.prototype,"targetUserDenyStatus",[it["computed"]],Object.getOwnPropertyDescriptor(R.prototype,"targetUserDenyStatus"),R.prototype),Object(ot["a"])(R.prototype,"hasPassword",[it["computed"]],Object.getOwnPropertyDescriptor(R.prototype,"hasPassword"),R.prototype),Object(ot["a"])(R.prototype,"isAdmini",[it["computed"]],Object.getOwnPropertyDescriptor(R.prototype,"isAdmini"),R.prototype),Object(ot["a"])(R.prototype,"groupName",[it["computed"]],Object.getOwnPropertyDescriptor(R.prototype,"groupName"),R.prototype),Object(ot["a"])(R.prototype,"expiredDays",[it["computed"]],Object.getOwnPropertyDescriptor(R.prototype,"expiredDays"),R.prototype),Object(ot["a"])(R.prototype,"expiredAt",[it["computed"]],Object.getOwnPropertyDescriptor(R.prototype,"expiredAt"),R.prototype),Object(ot["a"])(R.prototype,"isIndefiniteDuration",[it["computed"]],Object.getOwnPropertyDescriptor(R.prototype,"isIndefiniteDuration"),R.prototype),Object(ot["a"])(R.prototype,"threadExtendPermissions",[it["computed"]],Object.getOwnPropertyDescriptor(R.prototype,"threadExtendPermissions"),R.prototype),R),It=Ct,Lt=r(55),St=r(93),Ut=(Te=it["action"].bound,xe=it["action"].bound,Ce=function(e){Object(Je["a"])(r,e);var t=Object($e["a"])(r);function r(e){var a;return Object(Qe["a"])(this,r),a=t.call(this,e),Object(at["a"])(Object(Ge["a"])(a),"getUserFollow",Ie,Object(Ge["a"])(a)),Object(at["a"])(Object(Ge["a"])(a),"clearUserAccountPassword",Le,Object(Ge["a"])(a)),Object(at["a"])(Object(Ge["a"])(a),"cleanUserFans",Se,Object(Ge["a"])(a)),Object(at["a"])(Object(Ge["a"])(a),"cleanUserFollows",Ue,Object(Ge["a"])(a)),Object(at["a"])(Object(Ge["a"])(a),"cleanTargetUserFans",Ee,Object(Ge["a"])(a)),Object(at["a"])(Object(Ge["a"])(a),"cleanTargetUserFollows",Re,Object(Ge["a"])(a)),Object(at["a"])(Object(Ge["a"])(a),"clearUserShield",ze,Object(Ge["a"])(a)),Object(at["a"])(Object(Ge["a"])(a),"genRebindQrCode",Me,Object(Ge["a"])(a)),Object(at["a"])(Object(Ge["a"])(a),"rebindWechatMini",Ae,Object(Ge["a"])(a)),Object(at["a"])(Object(Ge["a"])(a),"rebindWechatH5",Ne,Object(Ge["a"])(a)),Object(at["a"])(Object(Ge["a"])(a),"wechatRebindStatusPoll",Fe,Object(Ge["a"])(a)),Object(at["a"])(Object(Ge["a"])(a),"getUserSigninFields",_e,Object(Ge["a"])(a)),Object(at["a"])(Object(Ge["a"])(a),"clearWechatRebindTimer",Ve,Object(Ge["a"])(a)),a}return Object(He["a"])(r,[{key:"getTargetUserInfo",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r,a,o,i,n,s,c,p,u,l;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.userId,e.next=3,this.getAssignUserInfo(r);case 3:a=e.sent,a&&(this.targetUsers[r]?(a.backgroundUrl&&this.targetUsers[r].backgroundUrl&&(n=null===(o=this.targetUsers[r].backgroundUrl)||void 0===o?void 0:o.split("?")[0],s=null===(i=a.backgroundUrl)||void 0===i?void 0:i.split("?")[0],n===s&&(a.backgroundUrl=this.targetUsers[r].backgroundUrl)),a.avatarUrl&&this.targetUsers[r].avatarUrl&&(u=null===(c=this.targetUsers[r].avatarUrl)||void 0===c?void 0:c.split("?")[0],l=null===(p=a.avatarUrl)||void 0===p?void 0:p.split("?")[0],u===l&&(a.avatarUrl=this.targetUsers[r].avatarUrl)),this.targetUsers[r]=a):this.targetUsers[r]=a,this.targetUsers=Object(We["a"])({},this.targetUsers));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"queryPayGroups",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){var t,r,a,o;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null===(t=this.payGroups)||void 0===t||!t.length){e.next=2;break}return e.abrupt("return",this.payGroups);case 2:return e.next=4,Object(nt["getPayGroups"])();case 4:if(r=e.sent,a=r.code,o=r.data,0!==a){e.next=9;break}return this.payGroups=o||[],e.abrupt("return",o);case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateTargetUserInfo",value:function(e){var t=e.userId,r=e.userInfo;this.targetUsers[t]=r,this.targetUsers=Object(We["a"])({},this.targetUsers)}},{key:"deleteTargetUserInfo",value:function(e){var t=e.userId;this.targetUsers[t]&&(delete this.targetUsers[t],this.targetUsers=Object(We["a"])({},this.targetUsers))}},{key:"getUserFollowers",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r,a,o,i;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.userId,a=t.page,o=t.searchValue,this.initFollowersStore({userId:r}),i={params:{page:a,perPage:20,filter:{userId:r}}},o&&(i.params.filter["nickName"]=o),e.next=6,Object(nt["getUserFollow"])(i);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"initFollowersStore",value:function(e){var t=e.userId;this.followStore[t]||(this.followStore[t]={data:{},attribs:{}}),this.followStore=Object(We["a"])({},this.followStore)}},{key:"setUserFollowers",value:function(e){var t=e.userId,r=e.page,a=e.followersData;if(this.initFollowersStore({userId:t}),this.followStore[t].data[r]=Object(st["a"])(a,"data.pageData",[]),this.followStore[t].attribs.totalPage=Object(st["a"])(a,"data.totalPage",1),this.followStore[t].attribs.totalCount=Object(st["a"])(a,"data.totalCount",0),this.followStore[t].attribs.currentPage){var o=this.followStore[t].attribs.currentPage,i=Object(st["a"])(a,"data.currentPage",1);Number(i)>o&&(this.followStore[t].attribs.currentPage=Object(st["a"])(a,"data.currentPage"))}else this.followStore[t].attribs.currentPage=Object(st["a"])(a,"data.currentPage",1);this.followStore=Object(We["a"])({},this.followStore)}},{key:"clearUserFollowers",value:function(e){var t=e.userId;this.followStore[t]&&(this.followStore[t]=null,this.followStore=Object(We["a"])({},this.followStore))}},{key:"getUserFanses",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r,a,o;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.userId,a=t.page,o={params:{page:a,perPage:20,filter:{userId:r}}},this.initFansesStore({userId:r}),e.next=5,Object(nt["getUserFans"])(o);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"initFansesStore",value:function(e){var t=e.userId;this.fansStore[t]||(this.fansStore[t]={data:{},attribs:{}}),this.fansStore=Object(We["a"])({},this.fansStore)}},{key:"setUserFanses",value:function(e){var t=e.userId,r=e.page,a=e.fansData;if(this.initFansesStore({userId:t}),this.fansStore[t].data[r]=Object(st["a"])(a,"data.pageData",[]),this.fansStore[t].attribs.totalPage=Object(st["a"])(a,"data.totalPage",1),this.fansStore[t].attribs.totalCount=Object(st["a"])(a,"data.totalCount",0),this.fansStore[t].attribs.currentPage){var o=this.fansStore[t].attribs.currentPage,i=Object(st["a"])(a,"data.currentPage",1);Number(i)>o&&(this.fansStore[t].attribs.currentPage=Object(st["a"])(a,"data.currentPage"))}else this.fansStore[t].attribs.currentPage=Object(st["a"])(a,"data.currentPage",1);this.fansStore=Object(We["a"])({},this.fansStore)}},{key:"findAssignedUserInFollowersAndFans",value:function(e){var t=e.userId,r=[];return Object.values(this.followStore).forEach((function(e){e&&e.data&&Object.keys(e.data).forEach((function(a){e.data[a].forEach((function(e){Object(st["a"])(e,"user.userId")===t&&r.push(e)}))}))})),Object.values(this.fansStore).forEach((function(e){e&&e.data&&Object.keys(e.data).forEach((function(a){e.data[a].forEach((function(e){Object(st["a"])(e,"user.userId")===t&&r.push(e)}))}))})),r}},{key:"clearUserFanses",value:function(e){var t=e.userId;this.fansStore[t]&&(this.fansStore[t]=null,this.fansStore=Object(We["a"])({},this.fansStore))}},{key:"followUser",value:function(e){var t=this,r=e.userId,a=e.followRes,o=function(e){Object(st["a"])(e,"user.userId")===r&&(e.userFollow.isMutual=a.data.isMutual,e.userFollow.isFollow=!0)};if(Object.values(this.followStore).forEach((function(e){e&&e.data&&Object.keys(e.data).forEach((function(t){e.data[t].forEach((function(e){o(e)}))}))})),Object.values(this.fansStore).forEach((function(e){e&&e.data&&Object.keys(e.data).forEach((function(t){e.data[t].forEach((function(e){o(e)}))}))})),this.followStore[this.id]&&this.followStore[this.id].data){var i=!1;if(Object.keys(this.followStore[this.id].data).forEach((function(e){t.followStore[t.id].data[e].forEach((function(e){e.user.userId===r&&(i=!0)}))})),!i){var n=this.followStore[this.id].attribs.currentPage,s=void 0===n?1:n,c=this.findAssignedUserInFollowersAndFans({userId:r});c.length>0&&this.followStore[this.id].data[s].push(c[0])}this.targetUsers[r]&&(a&&a.data&&a.data.isMutual?this.targetUsers[r].follow=2:this.targetUsers[r].follow=1)}this.userInfo&&(this.userInfo.followCount+=1),this.followStore=Object(We["a"])({},this.followStore),this.fansStore=Object(We["a"])({},this.fansStore)}},{key:"unFollowUser",value:function(e){var t=e.userId,r=function(e){Object(st["a"])(e,"user.userId")===t&&(e.userFollow.isFollow=!1)};Object.values(this.followStore).forEach((function(e){e&&e.data&&Object.keys(e.data).forEach((function(t){e.data[t].forEach((function(e){r(e)}))}))})),Object.values(this.fansStore).forEach((function(e){e&&e.data&&Object.keys(e.data).forEach((function(t){e.data[t].forEach((function(e){r(e)}))}))})),this.userInfo&&(this.userInfo.followCount-=1,0===this.userInfo.followCount&&this.clearUserFollowers({userId:this.id})),this.targetUsers[t]&&(this.targetUsers[t].follow=0),this.followStore=Object(We["a"])({},this.followStore),this.fansStore=Object(We["a"])({},this.fansStore)}},{key:"removeUserInfo",value:function(){this.userInfo=null,this.permissions=null,this.noUserInfo=!1}},{key:"setUserInfo",value:function(e){var t=this;e&&(this.userInfo?Object.keys(e).forEach((function(r){t.userInfo[r]=e[r]})):this.userInfo=e,e&&e.id?this.updateLoginStatus(!0):this.updateLoginStatus(!1))}},{key:"setUserPermissions",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.permissions=t;case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getShareData",value:function(e){this.shareNickname=e.nickname,this.shareAvatar=e.avatar,this.shareThreadid=e.threadId}},{key:"getShareContent",value:function(e){this.shareThreadid=e.threadId,this.shareContent=e.content}},{key:"initEditInfo",value:function(){this.editNickName=Object(st["a"])(this.userInfo,"nickname"),this.editUserName=Object(st["a"])(this.userInfo,"username"),this.editSignature=Object(st["a"])(this.userInfo,"signature")}},{key:"diffPicAndUpdateUserInfo",value:function(e){var t=Object.assign({},e);if(e.backgroundUrl&&this.backgroundUrl){var r,a,o=null===(r=this.backgroundUrl)||void 0===r?void 0:r.split("?")[0],i=null===(a=e.backgroundUrl)||void 0===a?void 0:a.split("?")[0];o===i&&(t.backgroundUrl=this.backgroundUrl)}if(e.avatarUrl&&this.avatarUrl){var n,s,c=null===(n=this.avatarUrl)||void 0===n?void 0:n.split("?")[0],p=null===(s=e.avatarUrl)||void 0===s?void 0:s.split("?")[0];c===p&&(t.avatarUrl=this.avatarUrl)}this.setUserInfo(t)}},{key:"updateUserInfo",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r,a;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(nt["readUser"])({params:{userId:t}});case 2:if(r=e.sent,r&&0===(null===r||void 0===r?void 0:r.code)){e.next=5;break}return e.abrupt("return");case 5:return!this.id&&this.onLoginCallback&&this.onLoginCallback(r.data),e.next=8,Object(nt["readPermissions"])({});case 8:return a=e.sent,(null===r||void 0===r?void 0:r.data)&&this.diffPicAndUpdateUserInfo(r.data),(null===a||void 0===a?void 0:a.data)&&this.setUserPermissions(a.data),e.abrupt("return",0===(null===r||void 0===r?void 0:r.code)&&r.data);case 12:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"undenyUser",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(nt["deleteDeny"])({data:{id:t}});case 2:if(r=e.sent,0!==r.code){e.next=5;break}return e.abrupt("return",r.data);case 5:throw{Code:r.code,Msg:r.msg};case 6:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"denyUser",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(nt["denyUser"])({data:{id:t}});case 2:if(r=e.sent,0!==r.code){e.next=5;break}return e.abrupt("return",r.data);case 5:throw{Code:r.code,Msg:r.msg};case 6:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateLoginStatus",value:function(e){this.loginStatus=e}},{key:"setAccessToken",value:function(e){this.accessToken=e}},{key:"isLogin",value:function(){return!!Lt["a"].get(St["c"].ACCESS_TOKEN_NAME)}},{key:"isPaid",value:function(){return!!this.userInfo&&!!this.userInfo.paid}},{key:"getAssignUserInfo",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(nt["readUser"])({params:{userId:t}});case 3:if(r=e.sent,0!==r.code||!r.data){e.next=6;break}return e.abrupt("return",r.data);case 6:return e.abrupt("return",null);case 9:return e.prev=9,e.t0=e["catch"](0),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setTargetUserDenied",value:function(e){var t=e.userId;this.targetUsers[t]&&(this.targetUsers[t].isDeny=!0),this.targetUsers=Object(We["a"])({},this.targetUsers)}},{key:"setTargetUserNotBeDenied",value:function(e){var t=e.userId;this.targetUsers[t]&&(this.targetUsers[t].isDeny=!1),this.targetUsers=Object(We["a"])({},this.targetUsers)}},{key:"postFollow",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(nt["createFollow"])({data:{toUserId:t}});case 2:if(r=e.sent,0!==r.code||!r.data){e.next=5;break}return e.abrupt("return",{msg:"\u64cd\u4f5c\u6210\u529f",data:r.data,success:!0});case 5:return e.abrupt("return",{msg:r.msg,data:null,success:!1});case 6:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"cancelFollow",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r,a,o;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.id,a=t.type,e.next=3,Object(nt["deleteFollow"])({data:{id:r,type:a}});case 3:if(o=e.sent,0!==o.code||!o.data){e.next=6;break}return e.abrupt("return",{msg:"\u64cd\u4f5c\u6210\u529f",data:o.data,success:!0});case 6:return e.abrupt("return",{msg:o.msg,data:null,success:!1});case 7:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateAvatar",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r,a;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return r=new FormData,r.append("avatar",t),r.append("pid",this.id),e.next=7,Object(nt["updateAvatar"])({transformRequest:[function(e){return e}],headers:{"Content-Type":"multipart/form-data"},data:r});case 7:if(a=e.sent,0!==a.code){e.next=12;break}return this.userInfo.avatarUrl=a.data.avatarUrl,this.userInfo=Object(We["a"])({},this.userInfo),e.abrupt("return",a.data);case 12:throw{Code:a.code,Msg:a.msg};case 13:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateBackground",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r,a,o=this;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return r=new FormData,r.append("background",t),e.next=6,Object(nt["updateBackground"])({transformRequest:[function(e){return e}],headers:{"Content-Type":"multipart/form-data"},data:r});case 6:if(a=e.sent,0!==a.code){e.next=10;break}return setTimeout((function(){o.userInfo.backgroundUrl=a.data.backgroundUrl,o.userInfo=Object(We["a"])({},o.userInfo)}),500),e.abrupt("return",a.data);case 10:throw{Code:a.code,Msg:a.msg};case 11:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateEditedUserInfo",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){var t;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(nt["updateUsersUpdate"])({data:{signature:this.editSignature,nickname:this.editNickName}});case 2:if(t=e.sent,0!==t.code){e.next=7;break}return this.userInfo.signature=this.editSignature,this.editNickName&&(this.userInfo.nickname=this.editNickName),e.abrupt("return",t.data);case 7:throw{Code:t.code,Message:t.msg};case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateEditedUserNickname",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){var t;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(nt["updateUsersUpdate"])({data:{nickname:this.editNickName}});case 2:if(t=e.sent,0!==t.code){e.next=6;break}return this.userInfo.nickname=this.editNickName,e.abrupt("return",t.data);case 6:throw{Code:t.code,Message:t.msg};case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateEditedUserSignature",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){var t;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(nt["updateUsersUpdate"])({data:{signature:this.editSignature}});case 2:if(t=e.sent,0!==t.code){e.next=6;break}return this.userInfo.signature=Object(st["a"])(t,"data.signature"),e.abrupt("return",t.data);case 6:throw{Code:t.code,Message:t.msg};case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"setUserPassword",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){var t;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(nt["updateUsersUpdate"])({data:{newPassword:this.newPassword,passwordConfirmation:this.newPasswordRepeat}});case 2:if(t=e.sent,0!==t.code){e.next=5;break}return e.abrupt("return",t.data);case 5:throw{Code:t.code,Message:t.msg};case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updateUsername",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){var t;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(nt["updateUsersUpdate"])({data:{username:this.editUserName}});case 2:if(t=e.sent,0!==t.code){e.next=6;break}return this.userInfo.username=this.editUserName,e.abrupt("return",t.data);case 6:throw{Code:t.code,Msg:t.msg};case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"resetUserPassword",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){var t;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(nt["updateUsersUpdate"])({data:{password:this.oldPassword,newPassword:this.newPassword,passwordConfirmation:this.newPasswordRepeat}});case 2:if(t=e.sent,0!==t.code){e.next=5;break}return e.abrupt("return",t.data);case 5:throw{Code:t.code,Message:t.msg};case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"sendSmsUpdateCode",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r,a,o,i;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.mobile,a=t.captchaTicket,o=t.captchaRandStr,e.next=3,Object(nt["smsSend"])({data:{mobile:r,type:"rebind",captchaTicket:a,captchaRandStr:o}});case 3:if(i=e.sent,0!==i.code){e.next=6;break}return e.abrupt("return",i.data);case 6:throw{Code:i.code,Message:i.msg};case 7:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"sendSmsVerifyCode",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r,a,o,i;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.mobile,a=t.captchaTicket,o=t.captchaRandStr,e.next=3,Object(nt["smsSend"])({data:{mobile:r,type:"verify",captchaTicket:a,captchaRandStr:o}});case 3:if(i=e.sent,0!==i.code){e.next=6;break}return e.abrupt("return",i.data);case 6:throw{Code:i.code,Message:i.msg};case 7:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"verifyOldMobile",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){var t;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(nt["smsVerify"])({data:{mobile:this.originalMobile,code:this.oldMobileVerifyCode}});case 2:if(t=e.sent,0!==t.code){e.next=5;break}return e.abrupt("return",t.data);case 5:throw{Code:t.code,Message:t.msg};case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"rebindMobile",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){var t;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(nt["smsRebind"])({data:{mobile:this.newMobile,code:this.newMobileVerifyCode}});case 2:if(t=e.sent,0!==t.code){e.next=5;break}return e.abrupt("return",t.data);case 5:throw{Code:t.code,Message:t.msg};case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getUserLikes",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){var t,r,a=arguments;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:1,e.next=3,Object(nt["readThreadList"])({params:{page:t,filter:{complex:2}}});case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getUserCollections",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){var t,r,a=arguments;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:1,e.next=3,Object(nt["readThreadList"])({params:{page:t,filter:{complex:2}}});case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getUserShieldList",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){var t,r,a;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(nt["readUsersDeny"])({params:{page:this.userShieldPage}});case 2:if(t=e.sent,r=Object(st["a"])(t,"data.pageData",[]),a=Object(st["a"])(t,"data.totalPage",1),this.userShieldTotalPage=a,this.userShield=[].concat(Object(ht["a"])(this.userShield),Object(ht["a"])(r)),this.userShieldTotalCount=Object(st["a"])(t,"data.totalCount",0),this.userShieldPage<=this.userShieldTotalPage&&(this.userShieldPage+=1),0===t.code){e.next=11;break}throw{Code:t.code,Message:t.msg};case 11:return e.abrupt("return",this.userShield);case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"clearUserThreadsInfo",value:function(){this.userThreads={},this.userThreadsPage=1,this.userThreadsTotalCount=0,this.userThreadsTotalPage=1}}]),r}(It),Object(ot["a"])(Ce.prototype,"getTargetUserInfo",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"getTargetUserInfo"),Ce.prototype),Object(ot["a"])(Ce.prototype,"queryPayGroups",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"queryPayGroups"),Ce.prototype),Object(ot["a"])(Ce.prototype,"updateTargetUserInfo",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"updateTargetUserInfo"),Ce.prototype),Object(ot["a"])(Ce.prototype,"deleteTargetUserInfo",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"deleteTargetUserInfo"),Ce.prototype),Object(ot["a"])(Ce.prototype,"getUserFollowers",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"getUserFollowers"),Ce.prototype),Object(ot["a"])(Ce.prototype,"initFollowersStore",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"initFollowersStore"),Ce.prototype),Object(ot["a"])(Ce.prototype,"setUserFollowers",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"setUserFollowers"),Ce.prototype),Object(ot["a"])(Ce.prototype,"clearUserFollowers",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"clearUserFollowers"),Ce.prototype),Object(ot["a"])(Ce.prototype,"getUserFanses",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"getUserFanses"),Ce.prototype),Object(ot["a"])(Ce.prototype,"initFansesStore",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"initFansesStore"),Ce.prototype),Object(ot["a"])(Ce.prototype,"setUserFanses",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"setUserFanses"),Ce.prototype),Object(ot["a"])(Ce.prototype,"findAssignedUserInFollowersAndFans",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"findAssignedUserInFollowersAndFans"),Ce.prototype),Object(ot["a"])(Ce.prototype,"clearUserFanses",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"clearUserFanses"),Ce.prototype),Object(ot["a"])(Ce.prototype,"followUser",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"followUser"),Ce.prototype),Object(ot["a"])(Ce.prototype,"unFollowUser",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"unFollowUser"),Ce.prototype),Object(ot["a"])(Ce.prototype,"removeUserInfo",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"removeUserInfo"),Ce.prototype),Object(ot["a"])(Ce.prototype,"setUserInfo",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"setUserInfo"),Ce.prototype),Object(ot["a"])(Ce.prototype,"setUserPermissions",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"setUserPermissions"),Ce.prototype),Object(ot["a"])(Ce.prototype,"getShareData",[Te],Object.getOwnPropertyDescriptor(Ce.prototype,"getShareData"),Ce.prototype),Object(ot["a"])(Ce.prototype,"getShareContent",[xe],Object.getOwnPropertyDescriptor(Ce.prototype,"getShareContent"),Ce.prototype),Object(ot["a"])(Ce.prototype,"initEditInfo",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"initEditInfo"),Ce.prototype),Object(ot["a"])(Ce.prototype,"diffPicAndUpdateUserInfo",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"diffPicAndUpdateUserInfo"),Ce.prototype),Object(ot["a"])(Ce.prototype,"updateUserInfo",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"updateUserInfo"),Ce.prototype),Ie=Object(ot["a"])(Ce.prototype,"getUserFollow",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(Ke["a"])(Object(Ye["a"])().mark((function t(){var r,a,o;return Object(Ye["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(nt["getUserFollow"])({params:{page:e.userFollowsPage,perPage:20}});case 2:if(r=t.sent,0===r.code){t.next=5;break}return t.abrupt("return");case 5:a=Object(st["a"])(r,"data.pageData",[]),o=Object(st["a"])(r,"data.totalPage",1),e.userFollowsTotalPage=o,e.userFollows[e.userFollowsPage]=a,e.userFollowsPage<=e.userFollowsTotalPage&&(e.userFollowsPage+=1),e.userFollows=Object(We["a"])({},e.userFollows);case 11:case"end":return t.stop()}}),t)})))}}),Object(ot["a"])(Ce.prototype,"undenyUser",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"undenyUser"),Ce.prototype),Object(ot["a"])(Ce.prototype,"denyUser",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"denyUser"),Ce.prototype),Object(ot["a"])(Ce.prototype,"updateLoginStatus",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"updateLoginStatus"),Ce.prototype),Object(ot["a"])(Ce.prototype,"removeUserInfo",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"removeUserInfo"),Ce.prototype),Object(ot["a"])(Ce.prototype,"setAccessToken",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"setAccessToken"),Ce.prototype),Object(ot["a"])(Ce.prototype,"isLogin",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"isLogin"),Ce.prototype),Object(ot["a"])(Ce.prototype,"isPaid",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"isPaid"),Ce.prototype),Object(ot["a"])(Ce.prototype,"getAssignUserInfo",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"getAssignUserInfo"),Ce.prototype),Object(ot["a"])(Ce.prototype,"setTargetUserDenied",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"setTargetUserDenied"),Ce.prototype),Object(ot["a"])(Ce.prototype,"setTargetUserNotBeDenied",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"setTargetUserNotBeDenied"),Ce.prototype),Object(ot["a"])(Ce.prototype,"postFollow",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"postFollow"),Ce.prototype),Object(ot["a"])(Ce.prototype,"cancelFollow",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"cancelFollow"),Ce.prototype),Object(ot["a"])(Ce.prototype,"updateAvatar",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"updateAvatar"),Ce.prototype),Object(ot["a"])(Ce.prototype,"updateBackground",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"updateBackground"),Ce.prototype),Object(ot["a"])(Ce.prototype,"updateEditedUserInfo",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"updateEditedUserInfo"),Ce.prototype),Object(ot["a"])(Ce.prototype,"updateEditedUserNickname",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"updateEditedUserNickname"),Ce.prototype),Object(ot["a"])(Ce.prototype,"updateEditedUserSignature",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"updateEditedUserSignature"),Ce.prototype),Object(ot["a"])(Ce.prototype,"setUserPassword",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"setUserPassword"),Ce.prototype),Object(ot["a"])(Ce.prototype,"updateUsername",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"updateUsername"),Ce.prototype),Object(ot["a"])(Ce.prototype,"resetUserPassword",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"resetUserPassword"),Ce.prototype),Object(ot["a"])(Ce.prototype,"sendSmsUpdateCode",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"sendSmsUpdateCode"),Ce.prototype),Object(ot["a"])(Ce.prototype,"sendSmsVerifyCode",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"sendSmsVerifyCode"),Ce.prototype),Object(ot["a"])(Ce.prototype,"verifyOldMobile",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"verifyOldMobile"),Ce.prototype),Object(ot["a"])(Ce.prototype,"rebindMobile",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"rebindMobile"),Ce.prototype),Object(ot["a"])(Ce.prototype,"getUserLikes",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"getUserLikes"),Ce.prototype),Object(ot["a"])(Ce.prototype,"getUserCollections",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"getUserCollections"),Ce.prototype),Object(ot["a"])(Ce.prototype,"getUserShieldList",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"getUserShieldList"),Ce.prototype),Object(ot["a"])(Ce.prototype,"clearUserThreadsInfo",[it["action"]],Object.getOwnPropertyDescriptor(Ce.prototype,"clearUserThreadsInfo"),Ce.prototype),Le=Object(ot["a"])(Ce.prototype,"clearUserAccountPassword",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.oldPassword=null,e.newPassword=null,e.newPasswordRepeat=null}}}),Se=Object(ot["a"])(Ce.prototype,"cleanUserFans",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.userFans={},e.userFansPage=1,e.userFansTotalPage=1}}}),Ue=Object(ot["a"])(Ce.prototype,"cleanUserFollows",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.userFollows={},e.userFollowsPage=1,e.userFollowsTotalPage=1}}}),Ee=Object(ot["a"])(Ce.prototype,"cleanTargetUserFans",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.targetUserFans={},e.targetUserFansPage=1,e.targetUserFansTotalPage=1}}}),Re=Object(ot["a"])(Ce.prototype,"cleanTargetUserFollows",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.targetUserFollows={},e.targetUserFollowsPage=1,e.targetUserFollowsTotalPage=1}}}),ze=Object(ot["a"])(Ce.prototype,"clearUserShield",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.userShield=[],e.userShieldPage=1,e.userShieldTotalPage=1,e.userShieldTotalCount=0}}}),Me=Object(ot["a"])(Ce.prototype,"genRebindQrCode",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(Ke["a"])(Object(Ye["a"])().mark((function t(r){var a,o,i,n,s,c,p,u,l,b;return Object(Ye["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=r.scanSuccess,o=void 0===a?function(){}:a,i=r.scanFail,n=void 0===i?function(){}:i,s=r.onTimeOut,c=void 0===s?function(){}:s,p=r.option,u=void 0===p?{}:p,clearInterval(e.rebindTimer),e.isQrCodeValid=!0,t.next=5,Object(nt["wechatRebindQrCodeGen"])(u);case 5:if(l=t.sent,0!==l.code){t.next=12;break}return e.rebindQRCode=Object(st["a"])(l,"data.base64Img"),b=Object(st["a"])(l,"data.sessionToken"),e.rebindTimer=setInterval((function(){e.wechatRebindStatusPoll({sessionToken:b,scanSuccess:o,scanFail:n})}),2e3),setTimeout((function(){e.isQrCodeValid=!1,clearInterval(e.rebindTimer),c&&c()}),24e4),t.abrupt("return",l.data);case 12:throw{Code:l.code,Msg:l.msg};case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),Ae=Object(ot["a"])(Ce.prototype,"rebindWechatMini",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r,a,o,i,n;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.jsCode,a=t.iv,o=t.encryptedData,i=t.sessionToken,e.prev=1,e.next=4,Object(nt["miniRebind"])({data:{jsCode:r,iv:a,encryptedData:o,sessionToken:i}});case 4:if(n=e.sent,0!==n.code){e.next=7;break}return e.abrupt("return",n);case 7:throw n;case 10:if(e.prev=10,e.t0=e["catch"](1),!e.t0.code){e.next=14;break}throw{Code:e.t0.code,Msg:e.t0.msg};case 14:throw{Code:"rbd_9999",Msg:"\u7f51\u7edc\u9519\u8bef",err:e.t0};case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()}}),Ne=Object(ot["a"])(Ce.prototype,"rebindWechatH5",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r,a,o,i,n;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.code,a=t.sessionId,o=t.sessionToken,i=t.state,e.prev=1,e.next=4,Object(nt["h5Rebind"])({params:{code:r,sessionId:a,sessionToken:o,state:i}});case 4:if(n=e.sent,0!==n.code){e.next=7;break}return e.abrupt("return",n);case 7:throw n;case 10:if(e.prev=10,e.t0=e["catch"](1),!e.t0.code){e.next=14;break}throw{Code:e.t0.code,Msg:e.t0.msg};case 14:throw{Code:"rbd_9999",Msg:"\u7f51\u7edc\u9519\u8bef",err:e.t0};case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()}}),Fe=Object(ot["a"])(Ce.prototype,"wechatRebindStatusPoll",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r,a,o,i;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.sessionToken,a=t.scanSuccess,o=t.scanFail,e.next=3,Object(nt["getWechatRebindStatus"])({params:{sessionToken:r}});case 3:i=e.sent,0===i.code&&a&&a(),0!==i.code&&"\u626b\u7801\u4e2d"!==i.msg&&o&&o(i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),_e=Object(ot["a"])(Ce.prototype,"getUserSigninFields",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(Ke["a"])(Object(Ye["a"])().mark((function t(){var r,a;return Object(Ye["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={code:0,data:[]},a=function(e){try{return JSON.parse(e)}catch(t){return console.error(t),console.error("\u89e3\u6790JSON\u9519\u8bef",e),e}},t.prev=2,t.next=5,Object(nt["getSignInFields"])();case 5:r=t.sent,t.next=12;break;case 8:throw t.prev=8,t.t0=t["catch"](2),console.error(t.t0),{Code:"usr_9999",Message:"\u7f51\u7edc\u9519\u8bef"};case 12:if(0!==r.code){t.next=16;break}e.userSigninFields=r.data.map((function(e){return e.fieldsExt?e.fieldsExt=a(e.fieldsExt):e.fieldsExt="",e})),t.next=17;break;case 16:throw{Code:r.code,Message:r.msg};case 17:case"end":return t.stop()}}),t,null,[[2,8]])})))}}),Ve=Object(ot["a"])(Ce.prototype,"clearWechatRebindTimer",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){clearInterval(e.rebindTimer),e.rebindQRCode=null,e.isQrCodeValid=!0}}}),Ce),Et=Ut;function Rt(e){var t=/(<\/?.+?\/?>)|\n/g;return e.replace(t,"")}var zt,Mt,At,Nt,Ft,_t,Vt,Bt,Wt,qt,Yt,Kt,Qt,Ht,Gt,Jt,$t,Xt,Zt,er,tr,rr,ar,or,ir,nr,sr,cr,pr,ur,lr,br,dr,hr,Or,yr,fr,gr,jr,mr,vr,wr,kr,Pr,Dr,Tr,xr,Cr,Ir,Lr,Sr,Ur,Er,Rr,zr,Mr,Ar,Nr,Fr,_r,Vr,Br,Wr,qr,Yr,Kr,Qr,Hr,Gr,Jr,$r,Xr,Zr,ea,ta,ra,aa,oa,ia,na,sa,ca,pa,ua,la,ba,da,ha,Oa,ya,fa,ga,ja,ma,va,wa,ka,Pa,Da,Ta,xa,Ca,Ia,La,Sa,Ua,Ea,Ra,za,Ma,Aa,Na,Fa,_a,Va,Ba,Wa,qa,Ya,Ka,Qa,Ha,Ga,Ja,$a,Xa,Za,eo,to,ro,ao,oo,io,no,so,co,po,uo,lo,bo,ho,Oo,yo,fo,go,jo,mo,vo,wo,ko,Po,Do,To,xo,Co,Io,Lo,So,Uo,Eo,Ro,zo,Mo,Ao,No,Fo,_o,Vo,Bo,Wo,qo,Yo,Ko,Qo,Ho,Go,Jo,$o,Xo,Zo,ei,ti,ri,ai,oi,ii,ni,si,ci,pi,ui,li,bi,di,hi,Oi,yi,fi,gi,ji,mi,vi,wi,ki,Pi,Di,Ti,xi,Ci,Ii,Li,Si,Ui,Ei,Ri,zi,Mi,Ai,Ni,Fi,_i,Vi,Bi,Wi,qi,Yi,Ki,Qi,Hi,Gi,Ji,$i,Xi,Zi,en,tn,rn,an,on,nn,sn,cn,pn,un,ln,bn,dn,hn,On,yn,fn,gn,jn,mn,vn,wn,kn,Pn,Dn,Tn,xn,Cn,In,Ln,Sn,Un,En,Rn,zn,Mn,An,Nn,Fn,_n,Vn,Bn,Wn,qn,Yn,Kn,Qn,Hn,Gn,Jn,$n,Xn,Zn,es,ts,rs,as,os,is,ns,ss,cs,ps,us,ls,bs,ds,hs,Os,ys,fs,gs,js,ms=r(84),vs=r(207),ws=(zt=function(){function e(t){Object(Qe["a"])(this,e),Object(at["a"])(this,"threadData",Mt,this),Object(at["a"])(this,"hasRedPacket",At,this),Object(at["a"])(this,"commentList",Nt,this),Object(at["a"])(this,"page",Ft,this),Object(at["a"])(this,"totalCount",_t,this),Object(at["a"])(this,"totalPage",Vt,this),Object(at["a"])(this,"authorInfo",Bt,this),Object(at["a"])(this,"isPositionToComment",Wt,this),Object(at["a"])(this,"checkUser",qt,this),Object(at["a"])(this,"isCommentListError",Yt,this),Object(at["a"])(this,"isAuthorInfoError",Kt,this),Object(at["a"])(this,"contentImgLength",Qt,this),Object(at["a"])(this,"scrollDistance",Ht,this),Object(at["a"])(this,"pageDataListType",Gt,this),this.threadData=null===t||void 0===t?void 0:t.thread,this.threadList=new yt["a"]}return Object(He["a"])(e,[{key:"isReady",get:function(){var e;return!(null===(e=this.threadData)||void 0===e||!e.id)}},{key:"isCommentReady",get:function(){return!!this.commentList}},{key:"isFavorite",get:function(){var e;return!(null===(e=this.threadData)||void 0===e||!e.isFavorite)}},{key:"isEssence",get:function(){var e,t;return!(null===(e=this.threadData)||void 0===e||null===(t=e.displayTag)||void 0===t||!t.isEssence)}},{key:"isNoMore",get:function(){return this.page>=this.totalPage}},{key:"title",get:function(){var e,t=this.threadData||{},r=t.title;if(r)return r;var a=(null===this||void 0===this||null===(e=this.threadData)||void 0===e?void 0:e.content)||{},o=a.text,i=a.indexes;if(o){var n=ms["a"].parse(o),s=Rt(n);if(s)return s.length>33?"".concat(s.slice(0,33),"..."):s}var c=Object(vs["a"])(i),p=Object.keys(c);return null!==p&&void 0!==p&&p.length?p.map((function(e){switch(e){case"VIDEO":return"\u89c6\u9891";case"IMAGE":return"\u56fe\u7247";case"RED_PACKET":return"\u7ea2\u5305";case"REWARD":return"\u60ac\u8d4f";case"GOODS":return"\u5546\u54c1";case"VOICE":return"\u8bed\u97f3";case"VOTE":return"\u9644\u4ef6"}})).filter((function(e){return!!e})).join("/"):void 0}}]),e}(),Mt=Object(ot["a"])(zt.prototype,"threadData",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),At=Object(ot["a"])(zt.prototype,"hasRedPacket",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Nt=Object(ot["a"])(zt.prototype,"commentList",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ft=Object(ot["a"])(zt.prototype,"page",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_t=Object(ot["a"])(zt.prototype,"totalCount",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Vt=Object(ot["a"])(zt.prototype,"totalPage",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Bt=Object(ot["a"])(zt.prototype,"authorInfo",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Wt=Object(ot["a"])(zt.prototype,"isPositionToComment",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),qt=Object(ot["a"])(zt.prototype,"checkUser",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Yt=Object(ot["a"])(zt.prototype,"isCommentListError",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Kt=Object(ot["a"])(zt.prototype,"isAuthorInfoError",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Qt=Object(ot["a"])(zt.prototype,"contentImgLength",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ht=Object(ot["a"])(zt.prototype,"scrollDistance",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Gt=Object(ot["a"])(zt.prototype,"pageDataListType",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(ot["a"])(zt.prototype,"isReady",[it["computed"]],Object.getOwnPropertyDescriptor(zt.prototype,"isReady"),zt.prototype),Object(ot["a"])(zt.prototype,"isCommentReady",[it["computed"]],Object.getOwnPropertyDescriptor(zt.prototype,"isCommentReady"),zt.prototype),Object(ot["a"])(zt.prototype,"isFavorite",[it["computed"]],Object.getOwnPropertyDescriptor(zt.prototype,"isFavorite"),zt.prototype),Object(ot["a"])(zt.prototype,"isEssence",[it["computed"]],Object.getOwnPropertyDescriptor(zt.prototype,"isEssence"),zt.prototype),Object(ot["a"])(zt.prototype,"isNoMore",[it["computed"]],Object.getOwnPropertyDescriptor(zt.prototype,"isNoMore"),zt.prototype),Object(ot["a"])(zt.prototype,"title",[it["computed"]],Object.getOwnPropertyDescriptor(zt.prototype,"title"),zt.prototype),zt),ks=ws,Ps=r(260),Ds=r(148),Ts=function(e){var t=e.amount,r=e.isAnonymous,a=e.threadId,o=e.payeeId,i=e.title;if(!t||!a||!o)return Promise.resolve({success:!1,data:"\u53c2\u6570\u9519\u8bef"});var n={amount:t,isAnonymous:r,type:2,threadId:a,payeeId:o,redAmount:0,rewardAmount:0,title:i};return new Promise((function(e,t){Ds["a"].createPayBox({data:n,currentPage:{type:1,threadId:a},success:function(t){e({success:!0,data:t})},failed:function(t){e({success:!1,data:t})}})})).catch((function(e){console.log(e)}))},xs=function(e){var t=e.fetch,r=(e.size,{}),a=!1,o=function(e){r[e]&&delete r[e]},i=function(){r={}},n=function(e){var a=e.index;if(r[a]){console.log("\u83b7\u53d6\u9884\u8bf7\u6c42\u7684\u6570\u636e",a);var o=r[a];return i(),o}return t(e)},s=function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(o){var i,n;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=o.index,!r[i]&&!a){e.next=3;break}return e.abrupt("return");case 3:a=!0,console.log("\u5f00\u59cb\u9884\u8bf7\u6c42\u6570\u636e",i),n=new Promise((function(e,r){t(o).then((function(t){console.log("\u9884\u8bf7\u6c42\u6570\u636e\u6210\u529f",i),e(t)})).catch((function(e){r(e)})).finally((function(){a=!1}))})),r[i]=n;case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{getData:n,setData:s,clearAll:i,clearIndex:o}},Cs=xs,Is=(Jt=function(e){Object(Je["a"])(r,e);var t=Object($e["a"])(r);function r(e){var a;return Object(Qe["a"])(this,r),a=t.call(this,e),Object(at["a"])(Object(Ge["a"])(a),"setCheckUser",$t,Object(Ge["a"])(a)),a.PreFetch=Cs({fetch:a._preLoadCommentList.bind(Object(Ge["a"])(a))}),a}return Object(He["a"])(r,[{key:"setPageDataListType",value:function(e){this.pageDataListType=e}},{key:"updateViewCount",value:function(e){this.threadData&&(this.threadData.viewCount=e)}},{key:"setScrollDistance",value:function(e){this.scrollDistance=e}},{key:"fetchAuthorInfo",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(nt["readUser"])({params:{userId:t}});case 2:return r=e.sent,0===r.code?(this.authorInfo=r.data,this.isAuthorInfoError=!1):this.isAuthorInfoError=!0,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setAuthorInfo",value:function(e){this.authorInfo=e}},{key:"setCommentListPage",value:function(e){this.page=e}},{key:"updateListStore",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){var t,r;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=null===(t=this.threadData)||void 0===t?void 0:t.threadId,r&&this.threadList.updateAssignThreadInfoInLists({threadId:r,threadInfo:this.threadData});case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updatePostCount",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;(null===(e=this.threadData)||void 0===e?void 0:e.likeReward)&&(this.threadData.likeReward.postCount=t),this.updateListStore()}},{key:"fetchThreadDetail",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r,a,o,i;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={threadId:t},e.next=3,Object(nt["readThreadDetail"])({params:r});case 3:return a=e.sent,o=a.code,i=a.data,0===o&&this.setThreadData(i),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getRedPacketInfo",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r,a,o,i;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={threadId:t},e.next=3,Object(nt["getRedPacketInfo"])(r);case 3:return a=e.sent,o=a.code,i=a.data,0===o&&null!==i&&void 0!==i&&i.status&&null!==i&&void 0!==i&&i.afterGetRedPacketFirstEnter&&this.setRedPacket(i.amount),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setRedPacket",value:function(e){this.hasRedPacket=e}},{key:"setContentImgLength",value:function(){this.contentImgLength+=1}},{key:"clearContentImgState",value:function(){this.contentImgLength=0}},{key:"fetchThreadAttachmentUrl",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t,r){var a;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={threadId:t,attachmentsId:r},e.next=3,Object(nt["readThreadAttachmentUrl"])({params:a});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"reset",value:function(e){var t=e||{},r=t.isPositionToComment,a=void 0!==r&&r;this.threadData=null,this.commentList=null,this.totalCount=0,this.authorInfo=null,this.isPositionToComment=a,this.isCommentListError=!1,this.isAuthorInfoError=!1,this.scrollDistance=0,this.pageDataListType=null}},{key:"positionToComment",value:function(){this.isPositionToComment=!0}},{key:"setThreadData",value:function(e){this.threadData=Object(We["a"])(Object(We["a"])({},this.threadData),e),this.threadData.id=e.threadId}},{key:"setThreadDetailLikePayCount",value:function(e){this.threadData.likeReward.likePayCount=e}},{key:"updateLikeReward",value:function(e){this.threadData.likeReward.users=e}},{key:"setThreadDetailEssence",value:function(e){this.threadData.displayTag.isEssence=e}},{key:"setThreadDetailField",value:function(e,t){this.threadData&&Reflect.has(this.threadData,e)&&(this.threadData[e]=t)}},{key:"setCommentList",value:function(e){this.commentList=e}},{key:"setCommentListDetailField",value:function(e,t,r){var a;null!==(a=this.commentList)&&void 0!==a&&a.length&&this.commentList.forEach((function(a){a.id===e&&(a[t]=r)}))}},{key:"setReplyListDetailField",value:function(e,t,r,a){var o;null!==(o=this.commentList)&&void 0!==o&&o.length&&this.commentList.forEach((function(o){var i;o.id===e&&(null!==o&&void 0!==o&&null!==(i=o.lastThreeComments)&&void 0!==i&&i.length&&(null===o||void 0===o||o.lastThreeComments.forEach((function(e){e.id===t&&(e[r]=a)}))))}))}},{key:"setTotalCount",value:function(e){this.totalCount=e,this.updatePostCount(e)}},{key:"updateFavorite",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r,a,o,i;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.id,a=t.isFavorite,r){e.next=3;break}return e.abrupt("return",{msg:"\u53c2\u6570\u4e0d\u5b8c\u6574",success:!1});case 3:return o={id:r,isFavorite:!!a},e.next=6,Object(nt["operateThread"])({data:o});case 6:if(i=e.sent,0!==i.code){e.next=10;break}return this.setThreadDetailField("isFavorite",!!a),e.abrupt("return",{msg:"\u64cd\u4f5c\u6210\u529f",success:!0});case 10:return e.abrupt("return",{msg:i.msg,success:!1});case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"rewardPay",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t,r){var a,o,i,n,s,c,p;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ts(t);case 2:if(a=e.sent,o=a.success,i=a.msg,!o){e.next=14;break}return this.setThreadDetailField("isReward",!0),this.threadData.likeReward.likePayCount=(this.threadData.likeReward.likePayCount||0)+1,this.setThreadDetailLikePayCount(this.threadData.likeReward.likePayCount),n=null===r||void 0===r?void 0:r.userInfo,n&&(c=mt["a"].createUpdateLikeUsersData(n,2),p=mt["a"].setThreadDetailLikedUsers(null===(s=this.threadData)||void 0===s?void 0:s.likeReward,!0,c),this.updateLikeReward(p)),this.queryTipList({threadId:t.threadId,type:2,page:1}),this.updateListStore(),e.abrupt("return",{success:!0,msg:"\u6253\u8d4f\u6210\u529f"});case 14:return e.abrupt("return",{success:!1,msg:i||"\u6253\u8d4f\u5931\u8d25"});case 15:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"updateStick",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r,a,o,i;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.id,a=t.isStick,r){e.next=3;break}return e.abrupt("return",{msg:"\u53c2\u6570\u4e0d\u5b8c\u6574",success:!1});case 3:return o={id:r,isSticky:!!a},e.next=6,Object(nt["operateThread"])({data:o});case 6:if(i=e.sent,null===i||void 0===i||!i.data||0!==i.code){e.next=10;break}return this.setThreadDetailField("isStick",!!a),e.abrupt("return",{msg:"\u64cd\u4f5c\u6210\u529f",success:!0});case 10:return e.abrupt("return",{msg:i.msg,success:!1});case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateEssence",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r,a,o,i;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.id,a=t.isEssence,r){e.next=3;break}return e.abrupt("return",{msg:"\u53c2\u6570\u4e0d\u5b8c\u6574",success:!1});case 3:return o={id:r,isEssence:!!a},e.next=6,Object(nt["operateThread"])({data:o});case 6:if(i=e.sent,null===i||void 0===i||!i.data||0!==i.code){e.next=10;break}return this.setThreadDetailEssence(!!a),e.abrupt("return",{msg:"\u64cd\u4f5c\u6210\u529f",success:!0});case 10:return e.abrupt("return",{msg:i.msg,success:!1});case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"pay",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"delete",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r,a;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",{msg:"\u53c2\u6570\u4e0d\u5b8c\u6574",success:!1});case 2:return r={threadId:t},e.next=5,Object(nt["deleteThread"])({data:r});case 5:if(a=e.sent,0!==a.code){e.next=10;break}return this.setThreadDetailField("isDelete",1),this.threadList.deleteAssignThreadInLists({threadId:t}),e.abrupt("return",{code:a.code,msg:"\u64cd\u4f5c\u6210\u529f",success:!0});case 10:return e.abrupt("return",{code:a.code,msg:a.msg,success:!1});case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"shareThread",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r,a,o,i;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",{msg:"\u53c2\u6570\u4e0d\u5b8c\u6574",success:!1});case 2:return r={threadId:t},e.next=5,Object(nt["shareThread"])({data:r});case 5:if(a=e.sent,0!==a.code){e.next=10;break}return this.threadData.likeReward.shareCount=(null===(o=this.threadData)||void 0===o||null===(i=o.likeReward)||void 0===i?void 0:i.shareCount)-0+1,this.updateListStore(),e.abrupt("return",{msg:"\u64cd\u4f5c\u6210\u529f",success:!0});case 10:return e.abrupt("return",{msg:a.msg,success:!1});case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_preLoadCommentList",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(nt["readCommentList"])({params:t});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"preFetch",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r,a,o,i,n,s,c,p;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.id,a=t.page,o=void 0===a?1:a,i=t.perPage,n=void 0===i?20:i,s=t.sort,c=void 0===s?"createdAt":s,r){e.next=3;break}return e.abrupt("return",{msg:"\u5e16\u5b50id\u4e0d\u5b58\u5728",success:!1});case 3:p={filter:{thread:Number(r)},sort:c,page:o,perPage:n,index:o},this.PreFetch.setData(p);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"loadCommentList",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r,a,o,i,n,s,c,p,u,l,b,d,h,O,y;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.id,o=t.page,i=void 0===o?1:o,n=t.perPage,s=void 0===n?20:n,c=t.sort,p=void 0===c?"createdAt":c,a){e.next=3;break}return e.abrupt("return",{msg:"\u5e16\u5b50id\u4e0d\u5b58\u5728",success:!1});case 3:return 1===i&&(console.log("\u6e05\u7a7a\u9884\u52a0\u8f7d\u7f13\u5b58"),this.PreFetch.clearAll()),u={filter:{thread:Number(a)},sort:p,page:i,perPage:s,index:i},e.next=7,this.PreFetch.getData(u);case 7:if(l=e.sent,0!==l.code||null===l||void 0===l||null===(r=l.data)||void 0===r||!r.pageData){e.next=16;break}return y=this.commentList,y||(y=[]),1===i?y=(null===l||void 0===l||null===(b=l.data)||void 0===b?void 0:b.pageData)||[]:(d=y).push.apply(d,Object(ht["a"])((null===l||void 0===l||null===(h=l.data)||void 0===h?void 0:h.pageData)||[])),this.setCommentList(this.commentListAdapter(y)),this.setTotalCount((null===l||void 0===l||null===(O=l.data)||void 0===O?void 0:O.totalCount)||0),this.totalPage=null===l||void 0===l?void 0:l.data.totalPage,e.abrupt("return",{msg:"\u64cd\u4f5c\u6210\u529f",success:!0});case 16:return this.isCommentListError=!0,e.abrupt("return",{msg:l.msg,success:!1});case 18:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"postFollow",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t,r){var a;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.postFollow(t);case 2:if(a=e.sent,!a.success||!a.data){e.next=7;break}return this.authorInfo.follow=a.data.isMutual?2:1,this.authorInfo.fansCount=this.authorInfo.fansCount+1,e.abrupt("return",{msg:"\u64cd\u4f5c\u6210\u529f",success:!0});case 7:return e.abrupt("return",{msg:a.msg,success:!1});case 8:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"cancelFollow",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t,r){var a,o,i;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.id,o=t.type,e.next=3,r.cancelFollow({id:a,type:o});case 3:if(i=e.sent,!i.success||!i.data){e.next=8;break}return this.authorInfo.follow=0,this.authorInfo.fansCount=this.authorInfo.fansCount-1,e.abrupt("return",{msg:"\u64cd\u4f5c\u6210\u529f",success:!0});case 8:return e.abrupt("return",{msg:i.msg,success:!1});case 9:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"createReports",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r,a,o,i,n,s,c;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.threadId,a=t.type,o=t.reason,i=t.postId,n=t.userId,s={threadId:r,type:a,reason:o,postId:i,userId:n},e.next=4,Object(nt["createReports"])({data:s});case 4:if(c=e.sent,0!==c.code||!c.data){e.next=7;break}return e.abrupt("return",{msg:"\u64cd\u4f5c\u6210\u529f",success:!0});case 7:return e.abrupt("return",{msg:c.msg,success:!1});case 8:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"reward",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r,a,o,i,n;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.threadId,a=t.postId,o=t.rewards,i={threadId:r,postId:a,rewards:o},e.next=4,Object(nt["reward"])({data:i});case 4:if(n=e.sent,0!==n.code){e.next=8;break}return this.commentList.forEach((function(e){e.id===a&&(e.rewards=Object(Ps["a"])(Number(e.rewards),Number(o)))})),e.abrupt("return",{msg:"\u64cd\u4f5c\u6210\u529f",success:!0});case 8:return e.abrupt("return",{msg:n.msg,success:!1});case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"commentListAdapter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.forEach((function(e){var t=e.lastThreeComments;(null===t||void 0===t?void 0:t.length)>1&&(e.lastThreeComments=[t[0]])})),e}},{key:"updateLiked",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t,r,a){var o,i,n,s,c,p,u,l,b;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=t.id,i=t.pid,n=t.isLiked,o&&i){e.next=3;break}return e.abrupt("return",{msg:"\u53c2\u6570\u4e0d\u5b8c\u6574",success:!1});case 3:return s={id:o,postId:i,data:{attributes:{isLiked:!!n}}},e.next=6,Object(nt["updatePosts"])({data:s});case 6:if(c=e.sent,null===c||void 0===c||!c.data||0!==c.code){e.next=14;break}return this.setThreadDetailField("isLike",!!n),this.setThreadDetailLikePayCount(c.data.likePayCount),p=null===a||void 0===a?void 0:a.userInfo,p&&(l=mt["a"].createUpdateLikeUsersData(p,1),b=mt["a"].setThreadDetailLikedUsers(null===(u=this.threadData)||void 0===u?void 0:u.likeReward,!!n,l),this.updateLikeReward(b)),this.updateListStore(),e.abrupt("return",{msg:"\u64cd\u4f5c\u6210\u529f",success:!0});case 14:return e.abrupt("return",{msg:c.msg,success:!1});case 15:case"end":return e.stop()}}),e,this)})));function t(t,r,a){return e.apply(this,arguments)}return t}()},{key:"createVote",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r,a,o,i,n;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.threadId,r){e.next=3;break}return e.abrupt("return",{msg:"\u53c2\u6570\u4e0d\u5b8c\u6574",success:!1});case 3:return e.next=5,Object(nt["createVote"])({data:t});case 5:return a=e.sent,o=a.data,i=a.code,n=a.msg,e.abrupt("return",{data:o,success:0===i,threadId:r,msg:n});case 10:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateThread",value:function(e,t){var r=this.threadData||{},a=r.content,o=void 0===a?{}:a,i=o||{},n=i.indexes,s=void 0===n?{}:n,c=Object(We["a"])({},s);c[e]=t,this.threadData=Object(We["a"])(Object(We["a"])({},this.threadData),{},{content:Object(We["a"])(Object(We["a"])({},o),{},{indexes:c})})}},{key:"queryTipList",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r,a,o,i,n;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(nt["readLikedUsers"])({params:Object(We["a"])(Object(We["a"])({},t),{},{perPage:300})});case 2:o=e.sent,i=null===(r=o.data)||void 0===r||null===(a=r.pageData)||void 0===a?void 0:a.list,i=i.filter((function(e){return 3===e.type})),n={},i=i.reduce((function(e,t){return console.log(t),!n[t.userId]&&(n[t.userId]=e.push(t)),e}),[]),this.threadData=Object(We["a"])(Object(We["a"])({},this.threadData),{},{tipList:i.slice(0,32)||[]});case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),r}(ks),Object(ot["a"])(Jt.prototype,"setPageDataListType",[it["action"]],Object.getOwnPropertyDescriptor(Jt.prototype,"setPageDataListType"),Jt.prototype),Object(ot["a"])(Jt.prototype,"updateViewCount",[it["action"]],Object.getOwnPropertyDescriptor(Jt.prototype,"updateViewCount"),Jt.prototype),Object(ot["a"])(Jt.prototype,"setScrollDistance",[it["action"]],Object.getOwnPropertyDescriptor(Jt.prototype,"setScrollDistance"),Jt.prototype),Object(ot["a"])(Jt.prototype,"fetchAuthorInfo",[it["action"]],Object.getOwnPropertyDescriptor(Jt.prototype,"fetchAuthorInfo"),Jt.prototype),Object(ot["a"])(Jt.prototype,"setAuthorInfo",[it["action"]],Object.getOwnPropertyDescriptor(Jt.prototype,"setAuthorInfo"),Jt.prototype),Object(ot["a"])(Jt.prototype,"setCommentListPage",[it["action"]],Object.getOwnPropertyDescriptor(Jt.prototype,"setCommentListPage"),Jt.prototype),Object(ot["a"])(Jt.prototype,"updateListStore",[it["action"]],Object.getOwnPropertyDescriptor(Jt.prototype,"updateListStore"),Jt.prototype),Object(ot["a"])(Jt.prototype,"updatePostCount",[it["action"]],Object.getOwnPropertyDescriptor(Jt.prototype,"updatePostCount"),Jt.prototype),Object(ot["a"])(Jt.prototype,"fetchThreadDetail",[it["action"]],Object.getOwnPropertyDescriptor(Jt.prototype,"fetchThreadDetail"),Jt.prototype),Object(ot["a"])(Jt.prototype,"getRedPacketInfo",[it["action"]],Object.getOwnPropertyDescriptor(Jt.prototype,"getRedPacketInfo"),Jt.prototype),Object(ot["a"])(Jt.prototype,"setRedPacket",[it["action"]],Object.getOwnPropertyDescriptor(Jt.prototype,"setRedPacket"),Jt.prototype),Object(ot["a"])(Jt.prototype,"setContentImgLength",[it["action"]],Object.getOwnPropertyDescriptor(Jt.prototype,"setContentImgLength"),Jt.prototype),Object(ot["a"])(Jt.prototype,"clearContentImgState",[it["action"]],Object.getOwnPropertyDescriptor(Jt.prototype,"clearContentImgState"),Jt.prototype),Object(ot["a"])(Jt.prototype,"fetchThreadAttachmentUrl",[it["action"]],Object.getOwnPropertyDescriptor(Jt.prototype,"fetchThreadAttachmentUrl"),Jt.prototype),Object(ot["a"])(Jt.prototype,"reset",[it["action"]],Object.getOwnPropertyDescriptor(Jt.prototype,"reset"),Jt.prototype),Object(ot["a"])(Jt.prototype,"positionToComment",[it["action"]],Object.getOwnPropertyDescriptor(Jt.prototype,"positionToComment"),Jt.prototype),Object(ot["a"])(Jt.prototype,"setThreadData",[it["action"]],Object.getOwnPropertyDescriptor(Jt.prototype,"setThreadData"),Jt.prototype),Object(ot["a"])(Jt.prototype,"setThreadDetailLikePayCount",[it["action"]],Object.getOwnPropertyDescriptor(Jt.prototype,"setThreadDetailLikePayCount"),Jt.prototype),$t=Object(ot["a"])(Jt.prototype,"setCheckUser",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.checkUser=t}}}),Object(ot["a"])(Jt.prototype,"updateLikeReward",[it["action"]],Object.getOwnPropertyDescriptor(Jt.prototype,"updateLikeReward"),Jt.prototype),Object(ot["a"])(Jt.prototype,"setThreadDetailEssence",[it["action"]],Object.getOwnPropertyDescriptor(Jt.prototype,"setThreadDetailEssence"),Jt.prototype),Object(ot["a"])(Jt.prototype,"setThreadDetailField",[it["action"]],Object.getOwnPropertyDescriptor(Jt.prototype,"setThreadDetailField"),Jt.prototype),Object(ot["a"])(Jt.prototype,"setCommentList",[it["action"]],Object.getOwnPropertyDescriptor(Jt.prototype,"setCommentList"),Jt.prototype),Object(ot["a"])(Jt.prototype,"setCommentListDetailField",[it["action"]],Object.getOwnPropertyDescriptor(Jt.prototype,"setCommentListDetailField"),Jt.prototype),Object(ot["a"])(Jt.prototype,"setReplyListDetailField",[it["action"]],Object.getOwnPropertyDescriptor(Jt.prototype,"setReplyListDetailField"),Jt.prototype),Object(ot["a"])(Jt.prototype,"setTotalCount",[it["action"]],Object.getOwnPropertyDescriptor(Jt.prototype,"setTotalCount"),Jt.prototype),Object(ot["a"])(Jt.prototype,"rewardPay",[it["action"]],Object.getOwnPropertyDescriptor(Jt.prototype,"rewardPay"),Jt.prototype),Object(ot["a"])(Jt.prototype,"updateStick",[it["action"]],Object.getOwnPropertyDescriptor(Jt.prototype,"updateStick"),Jt.prototype),Object(ot["a"])(Jt.prototype,"updateEssence",[it["action"]],Object.getOwnPropertyDescriptor(Jt.prototype,"updateEssence"),Jt.prototype),Object(ot["a"])(Jt.prototype,"delete",[it["action"]],Object.getOwnPropertyDescriptor(Jt.prototype,"delete"),Jt.prototype),Object(ot["a"])(Jt.prototype,"shareThread",[it["action"]],Object.getOwnPropertyDescriptor(Jt.prototype,"shareThread"),Jt.prototype),Object(ot["a"])(Jt.prototype,"preFetch",[it["action"]],Object.getOwnPropertyDescriptor(Jt.prototype,"preFetch"),Jt.prototype),Object(ot["a"])(Jt.prototype,"loadCommentList",[it["action"]],Object.getOwnPropertyDescriptor(Jt.prototype,"loadCommentList"),Jt.prototype),Object(ot["a"])(Jt.prototype,"postFollow",[it["action"]],Object.getOwnPropertyDescriptor(Jt.prototype,"postFollow"),Jt.prototype),Object(ot["a"])(Jt.prototype,"cancelFollow",[it["action"]],Object.getOwnPropertyDescriptor(Jt.prototype,"cancelFollow"),Jt.prototype),Object(ot["a"])(Jt.prototype,"createReports",[it["action"]],Object.getOwnPropertyDescriptor(Jt.prototype,"createReports"),Jt.prototype),Object(ot["a"])(Jt.prototype,"reward",[it["action"]],Object.getOwnPropertyDescriptor(Jt.prototype,"reward"),Jt.prototype),Object(ot["a"])(Jt.prototype,"updateLiked",[it["action"]],Object.getOwnPropertyDescriptor(Jt.prototype,"updateLiked"),Jt.prototype),Object(ot["a"])(Jt.prototype,"createVote",[it["action"]],Object.getOwnPropertyDescriptor(Jt.prototype,"createVote"),Jt.prototype),Object(ot["a"])(Jt.prototype,"updateThread",[it["action"]],Object.getOwnPropertyDescriptor(Jt.prototype,"updateThread"),Jt.prototype),Object(ot["a"])(Jt.prototype,"queryTipList",[it["action"]],Object.getOwnPropertyDescriptor(Jt.prototype,"queryTipList"),Jt.prototype),Jt),Ls=Is,Ss=(Xt=function(){function e(t){Object(Qe["a"])(this,e),Object(at["a"])(this,"postId",Zt,this),Object(at["a"])(this,"commentDetail",er,this),Object(at["a"])(this,"threadId",tr,this),Object(at["a"])(this,"authorInfo",rr,this),Object(at["a"])(this,"isAuthorInfoError",ar,this),Object(at["a"])(this,"postValue",or,this),Object(at["a"])(this,"postImageList",ir,this),Object(at["a"])(this,"captchaMark",nr,this),this.commentDetail=null===t||void 0===t?void 0:t.comment}return Object(He["a"])(e,[{key:"replyList",get:function(){var e;return(null===(e=this.commentDetail)||void 0===e?void 0:e.commentPosts)||[]}},{key:"isReady",get:function(){var e;return!(null===(e=this.commentDetail)||void 0===e||!e.id)}},{key:"content",get:function(){var e;return null===(e=this.commentDetail)||void 0===e?void 0:e.content}}]),e}(),Zt=Object(ot["a"])(Xt.prototype,"postId",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),er=Object(ot["a"])(Xt.prototype,"commentDetail",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tr=Object(ot["a"])(Xt.prototype,"threadId",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rr=Object(ot["a"])(Xt.prototype,"authorInfo",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ar=Object(ot["a"])(Xt.prototype,"isAuthorInfoError",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),or=Object(ot["a"])(Xt.prototype,"postValue",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ir=Object(ot["a"])(Xt.prototype,"postImageList",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),nr=Object(ot["a"])(Xt.prototype,"captchaMark",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"post"}}),Object(ot["a"])(Xt.prototype,"replyList",[it["computed"]],Object.getOwnPropertyDescriptor(Xt.prototype,"replyList"),Xt.prototype),Object(ot["a"])(Xt.prototype,"isReady",[it["computed"]],Object.getOwnPropertyDescriptor(Xt.prototype,"isReady"),Xt.prototype),Object(ot["a"])(Xt.prototype,"content",[it["computed"]],Object.getOwnPropertyDescriptor(Xt.prototype,"content"),Xt.prototype),Xt),Us=Ss,Es=r(67),Rs=(sr=it["action"].bound,cr=it["action"].bound,pr=it["action"].bound,ur=function(e){Object(Je["a"])(r,e);var t=Object($e["a"])(r);function r(e){return Object(Qe["a"])(this,r),t.call(this,e)}return Object(He["a"])(r,[{key:"fetchCommentDetail",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(nt["readCommentDetail"])({params:{postId:Number(t)}});case 2:return r=e.sent,0===(null===r||void 0===r?void 0:r.code)?this.setCommentDetail(r.data):(this.reset(),this.isServerError=!0),this.isLoading=!1,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"fetchAuthorInfo",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(nt["readUser"])({params:{userId:t}});case 2:return r=e.sent,0===r.code?this.authorInfo=r.data:this.isAuthorInfoError=!0,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setPostId",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.postId=t;case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"reset",value:function(){this.commentDetail=null,this.threadId=null,this.authorInfo=null}},{key:"setPostContent",value:function(e){var t=e.value,r=void 0===t?"":t,a=e.imageList,o=void 0===a?[]:a;this.postValue=r,this.postImageList=o}},{key:"clearPostContent",value:function(){this.postValue="",this.postImageList=[]}},{key:"setCaptchaMark",value:function(e){this.captchaMark=e}},{key:"setCommentDetail",value:function(e){var t;(this.commentDetail=e,this.commentDetail)&&(this.commentDetail.commentPosts=(null===this||void 0===this||null===(t=this.commentDetail)||void 0===t?void 0:t.commentPosts)||[],this.commentDetail.lastThreeComments=this.commentDetail.commentPosts)}},{key:"setCommentDetailField",value:function(e,t){this.commentDetail&&Reflect.has(this.commentDetail,e)&&(this.commentDetail[e]=t)}},{key:"setReplyListDetailField",value:function(e,t,r){var a,o;null!==(a=this.commentDetail)&&void 0!==a&&null!==(o=a.lastThreeComments)&&void 0!==o&&o.length&&this.commentDetail.lastThreeComments.forEach((function(a){a.id===e&&(a[t]=r)}))}},{key:"addReplyToList",value:function(e){var t;((null===(t=this.commentDetail)||void 0===t?void 0:t.commentPosts)||[]).push(e)}},{key:"setThreadId",value:function(e){this.threadId=e}},{key:"deleteReplyToList",value:function(e){var t,r=this;null===(t=this.commentDetail)||void 0===t||t.commentPosts.map((function(t,a){var o;t.id===e&&(null===(o=r.commentDetail.commentPosts)||void 0===o||o.splice(a,1))}))}},{key:"createComment",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t,r){var a,o,i,n,s,c,p,u,l,b,d,h,O,y,f,g;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=t.id,i=t.content,n=t.attachments,s=t.postId,c=t.sort,p=t.isNoMore,u=t.captchaTicket,l=t.captchaRandStr,o&&(i||0!==n.length)){e.next=3;break}return e.abrupt("return",{msg:"\u53c2\u6570\u4e0d\u5b8c\u6574",success:!1});case 3:return b={id:o,content:Object(Es["a"])(i),replyId:s,attachments:n},u&&l&&(b.captchaTicket=u,b.captchaRandStr=l),e.next=7,Object(nt["createPosts"])({data:b});case 7:if(d=e.sent,0!==d.code||null===d||void 0===d||null===(a=d.data)||void 0===a||!a.id){e.next=18;break}return h=r.commentList,O=r.totalCount,y=O+1,r&&r.setTotalCount(y),f=d.data,g=1===d.data.isApproved,f.lastThreeComments=[],!1===c&&(h.unshift(f),r&&r.setCommentList(h)),!0===c&&!0===p&&(h.push(f),r&&r.setCommentList(h)),e.abrupt("return",{redPacketAmount:d.data.redPacketAmount,isApproved:g,msg:g?"\u8bc4\u8bba\u6210\u529f":"\u60a8\u53d1\u5e03\u7684\u5185\u5bb9\u6b63\u5728\u5ba1\u6838\u4e2d",success:!0});case 18:return e.abrupt("return",{msg:d.msg,success:!1});case 19:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"updateComment",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t,r){var a,o,i,n,s,c,p,u,l,b,d;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=t.id,i=t.postId,n=t.content,s=t.attachments,c=t.captchaTicket,p=t.captchaRandStr,o&&n&&i){e.next=3;break}return e.abrupt("return",{msg:"\u53c2\u6570\u4e0d\u5b8c\u6574",success:!1});case 3:return u={id:o,postId:i,data:{attributes:{content:Object(Es["a"])(n),attachments:s}}},c&&p&&(u.captchaTicket=c,u.captchaRandStr=p),e.next=7,Object(nt["updatePosts"])({data:u});case 7:if(l=e.sent,0!==l.code||null===l||void 0===l||null===(a=l.data)||void 0===a||!a.content||!r){e.next=13;break}return b=r.commentList,(b||[]).forEach((function(e){e.id===i&&(e.content=l.data.content)})),d=1===l.data.isApproved,e.abrupt("return",{isApproved:d,msg:d?"\u4fee\u6539\u6210\u529f":"\u60a8\u4fee\u6539\u7684\u5185\u5bb9\u6b63\u5728\u5ba1\u6838\u4e2d",success:!0});case 13:return e.abrupt("return",{msg:l.msg,success:!1});case 14:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"createReply",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t,r){var a,o,i,n,s,c,p,u,l,b,d,h,O,y;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=t.id,i=t.commentId,n=t.replyId,s=t.commentPostId,c=t.content,p=t.isComment,u=t.attachments,l=t.captchaRandStr,b=t.captchaTicket,o&&(c||0!==u.length)&&n&&i){e.next=3;break}return e.abrupt("return",{msg:"\u53c2\u6570\u4e0d\u5b8c\u6574",success:!1});case 3:return d={id:o,replyId:n,content:Object(Es["a"])(c),isComment:p,attachments:u,commentPostId:s},b&&l&&(d.captchaTicket=b,d.captchaRandStr=l),e.next=7,Object(nt["createPosts"])({data:d});case 7:if(h=e.sent,0!==h.code||null===h||void 0===h||null===(a=h.data)||void 0===a||!a.id||!r){e.next=14;break}return O=r.commentList,null!==O&&void 0!==O&&O.length&&O.forEach((function(e){i===e.id&&(e.replyCount=e.replyCount+1,e.lastThreeComments.splice(0,1,h.data))})),this.addReplyToList(h.data),y=1===h.data.isApproved,e.abrupt("return",{isApproved:y,msg:y?"\u56de\u590d\u6210\u529f":"\u60a8\u56de\u590d\u7684\u5185\u5bb9\u6b63\u5728\u5ba1\u6838\u4e2d",success:!0});case 14:return e.abrupt("return",{msg:h.msg,success:!1});case 15:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"updateLiked",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t,r,a,o,i){var n,s,c,p,u,l;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.id,s=t.isLiked,n){e.next=3;break}return e.abrupt("return",{msg:"\u8bc4\u8bbaid\u4e0d\u5b58\u5728",success:!1});case 3:return c={postId:n,data:{attributes:{isLiked:s}}},e.next=6,Object(nt["updateComment"])({data:c});case 6:if(p=e.sent,null===p||void 0===p||!p.data||0!==p.code){e.next=15;break}if(!(Number(p.data.redPacketAmount)>0)){e.next=14;break}return l=null===r||void 0===r||null===(u=r.threadData)||void 0===u?void 0:u.id,r.setCommentListDetailField(p.data.postId,"redPacketAmount",p.data.redPacketAmount),e.next=13,r.fetchThreadDetail(l);case 13:r.updateListStore();case 14:return e.abrupt("return",{msg:"\u64cd\u4f5c\u6210\u529f",success:!0});case 15:return e.abrupt("return",{msg:p.msg,success:!1});case 16:case"end":return e.stop()}}),e)})));function t(t,r,a,o,i){return e.apply(this,arguments)}return t}()},{key:"delete",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t,r){var a,o,i,n,s,c;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",{success:!1,msg:"\u8bc4\u8bbaid\u4e0d\u5b58\u5728"});case 2:return a={postId:t,data:{attributes:{isDeleted:1}}},e.next=5,Object(nt["updateComment"])({data:a});case 5:if(o=e.sent,0!==o.code||!r){e.next=10;break}return i=r.commentList,n=r.totalCount,null!==i&&void 0!==i&&i.length&&(s=i.findIndex((function(e){return t===e.id})),i.splice(s,1),c=n-1,r.setTotalCount(c)),e.abrupt("return",{success:!0,msg:"\u5220\u9664\u6210\u529f"});case 10:return e.abrupt("return",{msg:o.msg,success:!1});case 11:case"end":return e.stop()}}),e)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"deleteReplyComment",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t,r){var a,o,i,n,s,c;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.replyData.id,o=t.commentData.id,a){e.next=4;break}return e.abrupt("return",{success:!1,msg:"\u56de\u590d\u8bc4\u8bbaid\u4e0d\u5b58\u5728"});case 4:return i={postId:a,data:{attributes:{isDeleted:1}}},e.next=7,Object(nt["updateComment"])({data:i});case 7:if(n=e.sent,0!==n.code||!r){e.next=18;break}if(s=r.commentList,null===s||void 0===s||!s.length){e.next=16;break}return s.map((function(e){var t;o===e.id&&(e.replyCount=e.replyCount-1,null===(t=e.lastThreeComments)||void 0===t||t.splice(0,1))})),e.next=14,Object(nt["updateSingleReply"])({params:{postId:Number(o)}});case 14:c=e.sent,0===c.code&&c.data&&s.map((function(e){var t;e.id===o&&(null===(t=e.lastThreeComments)||void 0===t||t.push(c.data))}));case 16:return this.deleteReplyToList(a),e.abrupt("return",{msg:"\u64cd\u4f5c\u6210\u529f",success:!0});case 18:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getCommentDetail",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r,a,o,i;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.id,a){e.next=3;break}return e.abrupt("return",{msg:"\u8bc4\u8bbaid\u4e0d\u5b58\u5728",success:!1});case 3:return o={postId:a},e.next=6,Object(nt["readCommentDetail"])({params:o});case 6:if(i=e.sent,0!==i.code||null===i||void 0===i||null===(r=i.data)||void 0===r||!r.id){e.next=10;break}return this.setCommentDetail(i.data),e.abrupt("return",{msg:"\u64cd\u4f5c\u6210\u529f",success:!0});case 10:return e.abrupt("return",{msg:i.msg,success:!1});case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"postFollow",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t,r){var a;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.postFollow(t);case 2:if(a=e.sent,!a.success||!a.data){e.next=7;break}return this.authorInfo.follow=a.data.isMutual?2:1,this.authorInfo.fansCount=this.authorInfo.fansCount+1,e.abrupt("return",{msg:"\u64cd\u4f5c\u6210\u529f",success:!0});case 7:return e.abrupt("return",{msg:a.msg,success:!1});case 8:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"cancelFollow",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t,r){var a,o,i;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.id,o=t.type,e.next=3,r.cancelFollow({id:a,type:o});case 3:if(i=e.sent,!i.success||!i.data){e.next=8;break}return this.authorInfo.follow=0,this.authorInfo.fansCount=this.authorInfo.fansCount-1,e.abrupt("return",{msg:"\u64cd\u4f5c\u6210\u529f",success:!0});case 8:return e.abrupt("return",{msg:i.msg,success:!1});case 9:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"reward",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r,a,o;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.id,a=t.type,e.next=3,Object(nt["deleteFollow"])({data:{id:r,type:a}});case 3:if(o=e.sent,0!==o.code||!o.data){e.next=8;break}return this.authorInfo.follow=0,this.authorInfo.fansCount=this.authorInfo.fansCount-1,e.abrupt("return",{msg:"\u64cd\u4f5c\u6210\u529f",success:!0});case 8:return e.abrupt("return",{msg:o.msg,success:!1});case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),r}(Us),Object(ot["a"])(ur.prototype,"fetchCommentDetail",[it["action"]],Object.getOwnPropertyDescriptor(ur.prototype,"fetchCommentDetail"),ur.prototype),Object(ot["a"])(ur.prototype,"fetchAuthorInfo",[it["action"]],Object.getOwnPropertyDescriptor(ur.prototype,"fetchAuthorInfo"),ur.prototype),Object(ot["a"])(ur.prototype,"setPostId",[it["action"]],Object.getOwnPropertyDescriptor(ur.prototype,"setPostId"),ur.prototype),Object(ot["a"])(ur.prototype,"reset",[it["action"]],Object.getOwnPropertyDescriptor(ur.prototype,"reset"),ur.prototype),Object(ot["a"])(ur.prototype,"setPostContent",[sr],Object.getOwnPropertyDescriptor(ur.prototype,"setPostContent"),ur.prototype),Object(ot["a"])(ur.prototype,"clearPostContent",[cr],Object.getOwnPropertyDescriptor(ur.prototype,"clearPostContent"),ur.prototype),Object(ot["a"])(ur.prototype,"setCaptchaMark",[pr],Object.getOwnPropertyDescriptor(ur.prototype,"setCaptchaMark"),ur.prototype),Object(ot["a"])(ur.prototype,"setCommentDetail",[it["action"]],Object.getOwnPropertyDescriptor(ur.prototype,"setCommentDetail"),ur.prototype),Object(ot["a"])(ur.prototype,"setCommentDetailField",[it["action"]],Object.getOwnPropertyDescriptor(ur.prototype,"setCommentDetailField"),ur.prototype),Object(ot["a"])(ur.prototype,"setReplyListDetailField",[it["action"]],Object.getOwnPropertyDescriptor(ur.prototype,"setReplyListDetailField"),ur.prototype),Object(ot["a"])(ur.prototype,"addReplyToList",[it["action"]],Object.getOwnPropertyDescriptor(ur.prototype,"addReplyToList"),ur.prototype),Object(ot["a"])(ur.prototype,"setThreadId",[it["action"]],Object.getOwnPropertyDescriptor(ur.prototype,"setThreadId"),ur.prototype),Object(ot["a"])(ur.prototype,"deleteReplyToList",[it["action"]],Object.getOwnPropertyDescriptor(ur.prototype,"deleteReplyToList"),ur.prototype),Object(ot["a"])(ur.prototype,"createComment",[it["action"]],Object.getOwnPropertyDescriptor(ur.prototype,"createComment"),ur.prototype),Object(ot["a"])(ur.prototype,"updateComment",[it["action"]],Object.getOwnPropertyDescriptor(ur.prototype,"updateComment"),ur.prototype),Object(ot["a"])(ur.prototype,"createReply",[it["action"]],Object.getOwnPropertyDescriptor(ur.prototype,"createReply"),ur.prototype),Object(ot["a"])(ur.prototype,"updateLiked",[it["action"]],Object.getOwnPropertyDescriptor(ur.prototype,"updateLiked"),ur.prototype),Object(ot["a"])(ur.prototype,"delete",[it["action"]],Object.getOwnPropertyDescriptor(ur.prototype,"delete"),ur.prototype),Object(ot["a"])(ur.prototype,"deleteReplyComment",[it["action"]],Object.getOwnPropertyDescriptor(ur.prototype,"deleteReplyComment"),ur.prototype),Object(ot["a"])(ur.prototype,"getCommentDetail",[it["action"]],Object.getOwnPropertyDescriptor(ur.prototype,"getCommentDetail"),ur.prototype),Object(ot["a"])(ur.prototype,"postFollow",[it["action"]],Object.getOwnPropertyDescriptor(ur.prototype,"postFollow"),ur.prototype),Object(ot["a"])(ur.prototype,"cancelFollow",[it["action"]],Object.getOwnPropertyDescriptor(ur.prototype,"cancelFollow"),ur.prototype),Object(ot["a"])(ur.prototype,"reward",[it["action"]],Object.getOwnPropertyDescriptor(ur.prototype,"reward"),ur.prototype),ur),zs=Rs,Ms=(lr=function(){function e(){Object(Qe["a"])(this,e),Object(at["a"])(this,"topics",br,this),Object(at["a"])(this,"topicDetail",dr,this),Object(at["a"])(this,"namespace",hr,this),this.threadList=new yt["a"]}return Object(He["a"])(e,[{key:"topicThreads",get:function(){var e,t,r,a={},o=null===(e=this.threadList.lists)||void 0===e?void 0:e[this.namespace],i=null===(t=this.threadList.lists)||void 0===t||null===(r=t[this.namespace])||void 0===r?void 0:r.attribs;if(null!==o&&void 0!==o&&o.data){var n=this.threadList.listAdapter(o);a=Object(We["a"])({pageData:n},i)}var s={listStore:this.threadList,namespace:this.namespace};return Ot(a,s)},set:function(e){e?this.threadList.setList({namespace:this.namespace,data:{data:e},page:e.currentPage}):this.threadList.clearList({namespace:this.namespace})}}]),e}(),br=Object(ot["a"])(lr.prototype,"topics",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),dr=Object(ot["a"])(lr.prototype,"topicDetail",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),hr=Object(ot["a"])(lr.prototype,"namespace",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"topic"}}),Object(ot["a"])(lr.prototype,"topicThreads",[it["computed"]],Object.getOwnPropertyDescriptor(lr.prototype,"topicThreads"),lr.prototype),lr),As=Ms,Ns=(Or=function(e){Object(Je["a"])(r,e);var t=Object($e["a"])(r);function r(e){return Object(Qe["a"])(this,r),t.call(this,e)}return Object(He["a"])(r,[{key:"setTopics",value:function(e){this.topics=e}},{key:"setTopicDetail",value:function(e){var t;this.topicDetail=e;var r=[];null===e||void 0===e||null===(t=e.pageData)||void 0===t||t.map((function(e){r.push.apply(r,Object(ht["a"])(null===e||void 0===e?void 0:e.threads))})),this.topicThreads={pageData:r}}},{key:"getTopicsList",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){var t,r,a,o,i,n,s,c,p,u,l,b,d,h=arguments;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},r=t.search,a=void 0===r?"":r,o=t.sortBy,i=void 0===o?"1":o,n=t.perPage,s=void 0===n?10:n,c=t.page,p=void 0===c?1:c,u={sortBy:i,content:a,hot:0},e.next=4,Object(nt["readTopicsList"])({params:{filter:u,perPage:s,page:p}});case 4:if(l=e.sent,0!==l.code||!l.data){e.next=8;break}return this.topics&&l.data.pageData&&1!==p?((b=this.topics.pageData).push.apply(b,Object(ht["a"])(l.data.pageData)),d=this.topics.pageData.slice(),this.setTopics(Object(We["a"])(Object(We["a"])({},l.data),{},{pageData:d}))):(this.setTopics({pageData:[]}),this.setTopics(l.data)),e.abrupt("return",l.data);case 8:return this.threadList.setListRequestError({namespace:this.namespace,errorText:(null===l||void 0===l?void 0:l.msg)||""}),e.abrupt("return",Promise.reject((null===l||void 0===l?void 0:l.msg)||""));case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getTopicsDetail",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){var t,r,a,o,i,n,s,c,p,u,l,b=arguments;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:{},r=t.topicId,a=void 0===r?"":r,o=t.perPage,i=void 0===o?10:o,n=t.page,s=void 0===n?1:n,c={topicId:Number(a),hot:"0"},e.next=4,Object(nt["readTopicsList"])({params:{filter:c,perPage:i,page:s}});case 4:if(p=e.sent,0!==p.code||!p.data){e.next=8;break}return this.topicDetail&&p.data.pageData&&1!==s?((u=this.topicDetail.pageData).push.apply(u,Object(ht["a"])(p.data.pageData)),l=this.topicDetail.pageData.slice(),this.setTopicDetail(Object(We["a"])(Object(We["a"])({},p.data),{},{pageData:l}))):this.setTopicDetail(p.data),e.abrupt("return",p.data);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"resetTopicsData",value:function(){this.setTopics(null),this.setTopicDetail(null)}}]),r}(As),Object(ot["a"])(Or.prototype,"setTopics",[it["action"]],Object.getOwnPropertyDescriptor(Or.prototype,"setTopics"),Or.prototype),Object(ot["a"])(Or.prototype,"setTopicDetail",[it["action"]],Object.getOwnPropertyDescriptor(Or.prototype,"setTopicDetail"),Or.prototype),Object(ot["a"])(Or.prototype,"getTopicsList",[it["action"]],Object.getOwnPropertyDescriptor(Or.prototype,"getTopicsList"),Or.prototype),Object(ot["a"])(Or.prototype,"getTopicsDetail",[it["action"]],Object.getOwnPropertyDescriptor(Or.prototype,"getTopicsDetail"),Or.prototype),Object(ot["a"])(Or.prototype,"resetTopicsData",[it["action"]],Object.getOwnPropertyDescriptor(Or.prototype,"resetTopicsData"),Or.prototype),Or),Fs=Ns,_s={title:"",categoryId:0,anonymous:0,draft:0,price:0,attachmentPrice:0,freeWords:0,position:{},contentText:"",audio:{},rewardQa:{},product:{},redpacket:{},video:{},vote:{},images:{},files:{},orderSn:"",captchaTicket:"",captchaRandStr:"",isDraft:!1,orderInfo:{},threadId:"",autoSaveTime:"",isResetContentText:!1,iframe:{},plugin:{}},Vs=(yr=function(){function e(){Object(Qe["a"])(this,e),Object(at["a"])(this,"cursorPosition",fr,this),Object(at["a"])(this,"emojis",gr,this),Object(at["a"])(this,"product",jr,this),Object(at["a"])(this,"topics",mr,this),Object(at["a"])(this,"topicTotalCount",vr,this),Object(at["a"])(this,"showNewTopic",wr,this),Object(at["a"])(this,"follows",kr,this),Object(at["a"])(this,"followsTotalCount",Pr,this),Object(at["a"])(this,"loading",Dr,this),Object(at["a"])(this,"postData",Tr,this),Object(at["a"])(this,"categorySelected",xr,this),Object(at["a"])(this,"currentSelectedToolbar",Cr,this),Object(at["a"])(this,"navInfo",Ir,this),Object(at["a"])(this,"categories",Lr,this),Object(at["a"])(this,"threadStatus",Sr,this),Object(at["a"])(this,"isHaveLocalData",Ur,this),Object(at["a"])(this,"editorHintAtKey",Er,this),Object(at["a"])(this,"editorHintTopicKey",Rr,this),Object(at["a"])(this,"partPayInfo",zr,this),Object(at["a"])(this,"filesPriceList",Mr,this),Object(at["a"])(this,"videoPriceList",Ar,this),Object(at["a"])(this,"audioPriceList",Nr,this),Object(at["a"])(this,"imagesPriceList",Fr,this)}return Object(He["a"])(e,[{key:"isThreadPaid",get:function(){return this.postData.threadId&&!this.postData.isDraft&&(this.postData.redpacket.id||this.postData.rewardQa.id)}},{key:"payTotalMoney",get:function(){return Object(Ps["a"])(this.postData.price,this.postData.attachmentPrice)}},{key:"redpacketTotalAmount",get:function(){var e=this.postData.redpacket,t=e.rule,r=void 0===t?1:t,a=e.price,o=void 0===a?0:a,i=e.number;return 1===r?parseFloat(o).toFixed(2):(parseFloat(o)*parseInt(i)).toFixed(2)}}]),e}(),fr=Object(ot["a"])(yr.prototype,"cursorPosition",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),gr=Object(ot["a"])(yr.prototype,"emojis",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),jr=Object(ot["a"])(yr.prototype,"product",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),mr=Object(ot["a"])(yr.prototype,"topics",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),vr=Object(ot["a"])(yr.prototype,"topicTotalCount",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),wr=Object(ot["a"])(yr.prototype,"showNewTopic",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),kr=Object(ot["a"])(yr.prototype,"follows",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Pr=Object(ot["a"])(yr.prototype,"followsTotalCount",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Dr=Object(ot["a"])(yr.prototype,"loading",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e;return e={},Object(Xe["a"])(e,Tt["d"].product,!1),Object(Xe["a"])(e,Tt["d"].topic,!1),Object(Xe["a"])(e,Tt["d"].emoji,!1),Object(Xe["a"])(e,Tt["d"].follow,!1),e}}),Tr=Object(ot["a"])(yr.prototype,"postData",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Object(We["a"])({},_s)}}),Object(ot["a"])(yr.prototype,"isThreadPaid",[it["computed"]],Object.getOwnPropertyDescriptor(yr.prototype,"isThreadPaid"),yr.prototype),Object(ot["a"])(yr.prototype,"payTotalMoney",[it["computed"]],Object.getOwnPropertyDescriptor(yr.prototype,"payTotalMoney"),yr.prototype),xr=Object(ot["a"])(yr.prototype,"categorySelected",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{parent:{},child:{}}}}),Cr=Object(ot["a"])(yr.prototype,"currentSelectedToolbar",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(ot["a"])(yr.prototype,"redpacketTotalAmount",[it["computed"]],Object.getOwnPropertyDescriptor(yr.prototype,"redpacketTotalAmount"),yr.prototype),Ir=Object(ot["a"])(yr.prototype,"navInfo",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{statusBarHeight:44,navHeight:40,menubtnWidth:80}}}),Lr=Object(ot["a"])(yr.prototype,"categories",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Sr=Object(ot["a"])(yr.prototype,"threadStatus",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Tt["g"].create}}),Ur=Object(ot["a"])(yr.prototype,"isHaveLocalData",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Er=Object(ot["a"])(yr.prototype,"editorHintAtKey",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Rr=Object(ot["a"])(yr.prototype,"editorHintTopicKey",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),zr=Object(ot["a"])(yr.prototype,"partPayInfo",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{textFreeValue:"",payPrice:"",selectedImages:[],selectedAttachments:[],selectedVideo:[],selectedAudio:[]}}}),Mr=Object(ot["a"])(yr.prototype,"filesPriceList",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ar=Object(ot["a"])(yr.prototype,"videoPriceList",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Nr=Object(ot["a"])(yr.prototype,"audioPriceList",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Fr=Object(ot["a"])(yr.prototype,"imagesPriceList",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),yr),Bs=Vs,Ws=function(e){return e.replace(/alt="(\w+)"/g,'alt=":--$1:dzqemoji"')},qs=function(e){return e.replace(/alt=":--(\w+):dzqemoji"/g,'alt=":$1:emoji"')},Ys=r(118),Ks=["filter","page"],Qs=(_r=it["action"].bound,Vr=it["action"].bound,Br=it["action"].bound,Wr=it["action"].bound,qr=it["action"].bound,Yr=it["action"].bound,Kr=it["action"].bound,Qr=it["action"].bound,Hr=it["action"].bound,Gr=it["action"].bound,Jr=it["action"].bound,$r=it["action"].bound,Xr=it["action"].bound,Zr=it["action"].bound,ea=it["action"].bound,ta=it["action"].bound,ra=it["action"].bound,aa=it["action"].bound,oa=it["action"].bound,ia=it["action"].bound,na=it["action"].bound,sa=it["action"].bound,ca=function(e){Object(Je["a"])(r,e);var t=Object($e["a"])(r);function r(){var e;Object(Qe["a"])(this,r);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),Object(at["a"])(Object(Ge["a"])(e),"setPartPayFromPostData",pa,Object(Ge["a"])(e)),e}return Object(He["a"])(r,[{key:"createThread",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r,a;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=this.getCreateThreadParams(!1,t),this.setPostData({captchaTicket:"",captchaRandStr:""}),e.next=4,Object(nt["createThread"])(r);case 4:return a=e.sent,0===a.code&&(this.currentSelectedToolbar=!1),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateThread",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t,r){var a,o;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=this.getCreateThreadParams(!0,r),this.setPostData({captchaTicket:"",captchaRandStr:""}),e.next=4,Object(nt["updateThread"])(Object(We["a"])(Object(We["a"])({},a),{},{threadId:Number(t)}));case 4:return o=e.sent,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"readPostCategory",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r,a;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t?{threadId:t}:{},e.next=3,Object(nt["readPostCategories"])({params:r});case 3:return a=e.sent,0===a.code&&(this.categories=a.data||[]),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"createThreadVideoAudio",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(nt["createThreadVideoAudio"])(t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"fetchEmoji",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){var t,r,a,o,i;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.setLoadingStatus(Tt["d"].emoji,!0),e.next=3,Object(nt["readEmoji"])();case 3:return t=e.sent,this.setLoadingStatus(Tt["d"].emoji,!1),r=t.code,a=t.data,o=void 0===a?[]:a,i=[],0===r&&(i=o.map((function(e){return{code:e.code,url:e.url}}))),this.setEmoji(i),e.abrupt("return",t);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"fetchFollow",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){var t,r,a,o,i,n,s,c,p,u,l,b,d,h,O=arguments;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=O.length>0&&void 0!==O[0]?O[0]:{},r=t.filter,a=void 0===r?{}:r,o=t.page,i=void 0===o?1:o,n=Object(dt["a"])(t,Ks),s=Object(We["a"])(Object(We["a"])({perPage:20},n),{},{filter:Object(We["a"])({type:1},a),page:i}),this.setLoadingStatus(Tt["d"].follow,!0),e.next=6,Object(nt["readFollow"])({params:s});case 6:return c=e.sent,this.setLoadingStatus(Tt["d"].follow,!1),p=c.code,u=c.data,l=u||{},b=l.pageData,d=l.totalCount,h=void 0===d?0:d,0===p&&(1===i?this.setFollow(b||[],h):this.appendFollow(b||[],h)),e.abrupt("return",c);case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"fetchProductAnalysis",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){var t,r,a,o,i,n=arguments;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},this.setLoadingStatus(Tt["d"].product,!0),e.next=4,Object(nt["readProcutAnalysis"])({data:t});case 4:return r=e.sent,a=r.code,o=r.data,i=void 0===o?{}:o,0===a&&this.setProduct(i),this.setLoadingStatus(Tt["d"].product,!1),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"fetchTopic",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){var t,r,a,o,i,n,s,c,p,u,l,b,d=arguments;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},this.showNewTopic=!1,this.setLoadingStatus(Tt["d"].topic,!0),r=Object(We["a"])({page:1,perPage:20},t),e.next=6,Object(nt["readTopics"])({params:r});case 6:return a=e.sent,o=a.code,i=a.data,n=i||{},s=n.pageData,c=void 0===s?[]:s,p=n.totalCount,u=void 0===p?0:p,l=n.isNewTopic,b=void 0!==l&&l,0===o&&(1===r.page?this.setTopic(c||[],u,b):this.appendTopic(c||[],u)),this.setLoadingStatus(Tt["d"].topic,!1),e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"setLoadingStatus",value:function(e,t){this.loading[e]=t}},{key:"setEmoji",value:function(e){this.emojis=e}},{key:"setFollow",value:function(e,t){this.follows=e||[],this.followsTotalCount=t}},{key:"appendFollow",value:function(e,t){this.follows=[].concat(Object(ht["a"])(this.follows),Object(ht["a"])(e)),this.followsTotalCount=t}},{key:"setProduct",value:function(e){this.product=e}},{key:"setTopic",value:function(e,t,r){this.topics=e,this.topicTotalCount=t,this.showNewTopic=r}},{key:"appendTopic",value:function(e,t){this.topics=[].concat(Object(ht["a"])(this.topics),Object(ht["a"])(e)),this.topicTotalCount=t}},{key:"setPostData",value:function(e){this.postData=Object(We["a"])(Object(We["a"])({},this.postData),e)}},{key:"setCategorySelected",value:function(e){this.categorySelected=e||{parent:{},child:{}}}},{key:"resetPostData",value:function(){this.postData=Object(We["a"])({},_s),this.currentSelectedToolbar=!1,this.setCategorySelected(),this.resetPartPay()}},{key:"resetPartPay",value:function(){this.partPayInfo={textFreeValue:"",payPrice:"",selectedImages:[],selectedAttachments:[],selectedVideo:[],selectedAudio:[]},this.filesPriceList=[],this.videoPriceList=[],this.audioPriceList=[],this.imagesPriceList=[]}},{key:"setPartPayInfo",value:function(){var e=this.partPayInfo,t=e.payPrice,r=e.selectedAttachments,a=e.selectedVideo,o=e.selectedAudio,i=e.selectedImages,n=e.textFreeValue;t&&(r&&r.length>0&&(this.filesPriceList=Object(ht["a"])(r)),a&&a.length>0&&(this.videoPriceList=Object(ht["a"])(a)),o&&o.length>0&&(this.audioPriceList=Object(ht["a"])(o)),i&&i.length>0&&(this.imagesPriceList=Object(ht["a"])(i)),this.setPostData({attachmentPrice:t,freeWords:n/100}))}},{key:"checkPartPayInfo",value:function(){var e=this;if(this.filesPriceList&&this.filesPriceList.length>0){var t=this.filesPriceList.filter((function(t){var r=!1;return r=Object.values(e.postData.files).find((function(e){return e.id===t})),r}));this.filesPriceList=t||[]}if(this.videoPriceList&&this.videoPriceList.length>0){var r=this.videoPriceList.filter((function(t){return e.postData.video.id===t}));this.videoPriceList=r||[]}if(this.audioPriceList&&this.audioPriceList.length>0){var a=this.audioPriceList.filter((function(t){return e.postData.audio.id===t}));this.audioPriceList=a||[]}if(this.imagesPriceList&&this.imagesPriceList.length>0){var o=this.imagesPriceList.filter((function(t){var r=!1;return r=Object.values(e.postData.images).find((function(e){return e.id===t})),r}));this.imagesPriceList=o||[]}this.setPartPayFromPostData()}},{key:"setPartPayInfoToPostData",value:function(e){this.imagesPriceList&&e[Tt["h"].image]&&e[Tt["h"].image].body&&(e[Tt["h"].image].body.priceList=this.imagesPriceList),this.videoPriceList&&e[Tt["h"].video]&&e[Tt["h"].video].body&&(e[Tt["h"].video].body.priceList=this.videoPriceList),this.filesPriceList&&e[Tt["h"].file]&&e[Tt["h"].file].body&&(e[Tt["h"].file].body.priceList=this.filesPriceList),this.audioPriceList&&e[Tt["h"].voice]&&e[Tt["h"].voice].body&&(e[Tt["h"].voice].body.priceList=this.audioPriceList)}},{key:"gettContentIndexes",value:function(){var e=this.postData,t=e.images,r=e.video,a=e.files,o=e.product,i=e.audio,n=e.redpacket,s=e.rewardQa,c=e.orderInfo,p=void 0===c?{}:c,u=e.vote,l=void 0===u?{}:u,b=e.iframe,d=void 0===b?{}:b,h=e.plugin,O=void 0===h?{}:h;this.checkPartPayInfo();var y=Object.values(t).map((function(e){return e.id})),f=Object.values(a).map((function(e){return e.id})),g={};if(y.length>0&&(g[Tt["h"].image]={tomId:Tt["h"].image,body:{imageIds:y}}),(r.id||r.threadVideoId)&&(g[Tt["h"].video]={tomId:Tt["h"].video,body:{videoId:r.id||r.threadVideoId||""}}),f.length>0&&(g[Tt["h"].file]={tomId:Tt["h"].file,body:{docIds:f}}),o.id&&(g[Tt["h"].goods]={tomId:Tt["h"].goods,body:Object(We["a"])({},o)}),(i.id||i.threadVideoId)&&(g[Tt["h"].voice]={tomId:Tt["h"].voice,body:{audioId:i.id||i.threadVideoId||""}}),n.price&&(g[Tt["h"].redPacket]={tomId:Tt["h"].redPacket,body:Object(We["a"])({orderSn:p.orderSn},n)}),s.value&&(g[Tt["h"].reward]={tomId:Tt["h"].reward,body:{expiredAt:s.times,price:s.value,type:0,orderSn:p.orderSn}}),l.voteTitle&&(g[Tt["h"].vote]={tomId:Tt["h"].vote,body:Object(We["a"])({},l)}),d.content&&(g[Tt["h"].iframe]={tomId:Tt["h"].iframe,body:Object(We["a"])({},d)}),this.setPartPayInfoToPostData(g),O)for(var j in O){g[O[j].tomId]=Object(We["a"])({},O[j]);var m=g[O[j].tomId].body,v=void 0===m?{}:m,w=g[O[j].tomId]._plugin;w||(w={name:j}),v&&(g[O[j].tomId].body._plugin=w)}return g}},{key:"getCreateThreadParams",value:function(e,t){var r=this.postData,a=r.title,o=r.categoryId,i=r.contentText,n=r.position,s=r.price,c=r.attachmentPrice,p=r.freeWords,u=r.redpacket,l=r.rewardQa,b=r.captchaTicket,d=r.captchaRandStr,h=Object(Es["a"])(i);t&&(h="".concat(h.replace(/(\n*)$/,"").replace(/\n/g,"<br />"))),h=qs(h).replace(/@([^@<]+)<\/p>/g,"@$1 </p>").replace(/<code>\s*([^\s]+)\s*<\/code>/g,"<code>$1</code>").replace(/<br \/>\n\s?/g,"<br />\n");var O={title:a,categoryId:o,content:{text:h}};O.position=n.address?n:{},O.price=s||0,O.freeWords=p||0,O.attachmentPrice=c||0,O.draft=this.postData.draft,u.price&&!this.isThreadPaid&&(O.draft=1),l.value&&!this.isThreadPaid&&(O.draft=1),b&&b&&(O.captchaTicket=b,O.captchaRandStr=d),O.anonymous=this.postData.anonymous;var y=this.gettContentIndexes();return Object.keys(y).length>0&&(O.content.indexes=y),O}},{key:"formatThreadDetailToPostData",value:function(e,t){var r,a,o,i,n=e||{},s=n.title,c=n.categoryId,p=n.content,u=n.freewords,l=void 0===u?0:u,b=n.isDraft,d=n.isAnonymous,h=n.orderInfo,O=void 0===h?{}:h,y=n.threadId,f=Number(e.price),g=Number(e.attachmentPrice),j={};e.position&&e.position.address&&(j=e.position);var m=Object(Es["a"])(p&&p.text);t?m=m.replace(/<br \/>\n/g,"\n").replace(/<br \/>/g,"\n"):(m=ms["b"].emotion(m),m=m.replace(/<br \/>\n/g,"<br />"));var v=p&&p.indexes||{},w={},k={},P={},D={},T={},x={},C={},I={},L={},S={};Object.keys(v).forEach((function(e){var t=v[e].tomId.toString();if(t===Tt["h"].image.toString()){var r=v[e].body||[];r.forEach((function(e){x[e.id]=Object(We["a"])(Object(We["a"])({},e),{},{type:e.fileType,name:e.fileName})}))}else if(t===Tt["h"].file.toString()){var a=v[e].body||[];a.forEach((function(e){C[e.id]=Object(We["a"])(Object(We["a"])({},e),{},{type:e.fileType,name:e.fileName})}))}else if(t===Tt["h"].voice.toString()){w=v[e].body||{};var o=w.id||w.threadVideoId;w.id=o}else if(t===Tt["h"].vote.toString())I=v[e].body[0]||{},I.expiredAt&&(I.expiredAt=I.expiredAt.replace(/-/g,"/"));else if(t===Tt["h"].goods.toString())P=v[e].body;else if(t===Tt["h"].video.toString()){T=v[e].body||{},T.thumbUrl=T.mediaUrl;var i=T.id||T.threadVideoId;T.id=i}else if(t===Tt["h"].redPacket.toString()){var n,s=(null===(n=v[e])||void 0===n?void 0:n.body)||{},c=s.money,p=void 0===c?0:c,u=s.number,l=void 0===u?0:u,b=s.rule,d=void 0===b?1:b,h=0===d?p/l:p;D=Object(We["a"])(Object(We["a"])({},s),{},{price:h})}else if(t===Tt["h"].reward.toString()){var O,y=v[e].body.expiredAt?Object(Ys["a"])(null===(O=v[e].body.expiredAt)||void 0===O?void 0:O.replace(/-/g,"/"),"yyyy/MM/dd hh:mm"):Object(Ys["a"])((new Date).getTime()+9e7,"yyyy/MM/dd hh:mm"),f=v[e].body.money||"";k=Object(We["a"])(Object(We["a"])({},v[e].body||{}),{},{times:y,value:f})}else if(t===Tt["h"].iframe.toString())L=v[e].body||{};else{var g=v[e],j=g.body,m=void 0===j?{}:j,U=g._plugin;if(!U)return;var E=U||{},R=E.name;S[R]={tomId:t,body:m,_plugin:U}}}));var U=d?1:0;null!==(r=p.indexes[Tt["h"].image])&&void 0!==r&&r.priceList&&(this.imagesPriceList=p.indexes[Tt["h"].image].priceList),null!==(a=p.indexes[Tt["h"].video])&&void 0!==a&&a.priceList&&(this.videoPriceList=p.indexes[Tt["h"].video].priceList),null!==(o=p.indexes[Tt["h"].file])&&void 0!==o&&o.priceList&&(this.filesPriceList=p.indexes[Tt["h"].file].priceList),null!==(i=p.indexes[Tt["h"].voice])&&void 0!==i&&i.priceList&&(this.audioPriceList=p.indexes[Tt["h"].voice].priceList),this.setPostData(Object(it["observable"])({title:s.replace(/<[^<>]+>/g,""),categoryId:c,price:f,attachmentPrice:g,position:j,contentText:m?Ws(m):"",audio:w,rewardQa:k,product:P,redpacket:D,video:T,vote:I,images:x,files:C,freeWords:l,isDraft:b,anonymous:U,orderInfo:O,threadId:y,iframe:L,plugin:S}))}},{key:"setCurrentSelectedToolbar",value:function(e){this.currentSelectedToolbar=e}},{key:"setCursorPosition",value:function(e){this.cursorPosition=e}},{key:"setNavInfo",value:function(e){e&&(this.navInfo=e)}},{key:"getCategorySelectById",value:function(e){var t={},r={},a=e,o=this.getCurrentCategories();return!e&&o&&o.length&&(a=o[0].categoryId),o&&o.length&&a&&o.forEach((function(e){var o=e.children;if(e.categoryId===a){if(t=e,o&&o.length>0){var i=Object(qe["a"])(o,1);r=i[0]}}else o&&o.length>0&&o.forEach((function(o){o.categoryId===a&&(r=o,t=e)}))})),e&&!t.categoryId&&o&&o.length?(a=o[0].categoryId,this.getCategorySelectById(a)):{parent:t,child:r}}},{key:"getCategoriesCanCreate",value:function(){var e=this.categories.length;if(e){for(var t=[],r=0;r<e;r++){var a=this.categories[r],o=a.canCreateThread,i=a.children,n={};o&&(n=this.categories[r],i&&i.length&&(n.children=Object(ht["a"])(i.filter((function(e){return e.canCreateThread})))),t.push(n))}return t}}},{key:"getCategoriesCanEdit",value:function(){var e=this.categories.length;if(e){for(var t=[],r=0;r<e;r++){var a=this.categories[r],o=a.canEditThread,i=a.children,n={};o&&(n=this.categories[r],i&&i.length&&(n.children=Object(ht["a"])(i.filter((function(e){return e.canEditThread})))),t.push(n))}return t}}},{key:"getCurrentCategories",value:function(){return this.threadStatus===Tt["g"].edit?this.getCategoriesCanEdit():this.getCategoriesCanCreate()}},{key:"setThreadStatus",value:function(e){this.threadStatus=e||Tt["g"].create}},{key:"setLocalDataStatus",value:function(e){this.isHaveLocalData=e}},{key:"setEditorHintAtKey",value:function(e){this.editorHintAtKey=e}},{key:"setEditorHintTopicKey",value:function(e){this.editorHintTopicKey=e}},{key:"setPluginPostData",value:function(e){var t=e._pluginInfo,r=e.postData,a=e.isShow,o=void 0!==a&&a,i=t.pluginName,n=r.tomId,s=r.body;this.postData.plugin[i]={tomId:n,body:Object(We["a"])(Object(We["a"])({},s),{},{_plugin:{name:i}}),isShow:o},this.postData=Object(We["a"])({},this.postData)}},{key:"deletePluginPostData",value:function(e){var t=e._pluginInfo,r=t.pluginName;this.postData.plugin[r]&&delete this.postData.plugin[r],this.postData=Object(We["a"])({},this.postData)}}]),r}(Bs),Object(ot["a"])(ca.prototype,"createThread",[_r],Object.getOwnPropertyDescriptor(ca.prototype,"createThread"),ca.prototype),Object(ot["a"])(ca.prototype,"updateThread",[Vr],Object.getOwnPropertyDescriptor(ca.prototype,"updateThread"),ca.prototype),Object(ot["a"])(ca.prototype,"readPostCategory",[Br],Object.getOwnPropertyDescriptor(ca.prototype,"readPostCategory"),ca.prototype),Object(ot["a"])(ca.prototype,"createThreadVideoAudio",[Wr],Object.getOwnPropertyDescriptor(ca.prototype,"createThreadVideoAudio"),ca.prototype),Object(ot["a"])(ca.prototype,"fetchEmoji",[qr],Object.getOwnPropertyDescriptor(ca.prototype,"fetchEmoji"),ca.prototype),Object(ot["a"])(ca.prototype,"fetchFollow",[Yr],Object.getOwnPropertyDescriptor(ca.prototype,"fetchFollow"),ca.prototype),Object(ot["a"])(ca.prototype,"fetchProductAnalysis",[Kr],Object.getOwnPropertyDescriptor(ca.prototype,"fetchProductAnalysis"),ca.prototype),Object(ot["a"])(ca.prototype,"fetchTopic",[Qr],Object.getOwnPropertyDescriptor(ca.prototype,"fetchTopic"),ca.prototype),Object(ot["a"])(ca.prototype,"setLoadingStatus",[Hr],Object.getOwnPropertyDescriptor(ca.prototype,"setLoadingStatus"),ca.prototype),Object(ot["a"])(ca.prototype,"setEmoji",[Gr],Object.getOwnPropertyDescriptor(ca.prototype,"setEmoji"),ca.prototype),Object(ot["a"])(ca.prototype,"setFollow",[Jr],Object.getOwnPropertyDescriptor(ca.prototype,"setFollow"),ca.prototype),Object(ot["a"])(ca.prototype,"appendFollow",[$r],Object.getOwnPropertyDescriptor(ca.prototype,"appendFollow"),ca.prototype),Object(ot["a"])(ca.prototype,"setProduct",[Xr],Object.getOwnPropertyDescriptor(ca.prototype,"setProduct"),ca.prototype),Object(ot["a"])(ca.prototype,"setTopic",[Zr],Object.getOwnPropertyDescriptor(ca.prototype,"setTopic"),ca.prototype),Object(ot["a"])(ca.prototype,"appendTopic",[ea],Object.getOwnPropertyDescriptor(ca.prototype,"appendTopic"),ca.prototype),Object(ot["a"])(ca.prototype,"setPostData",[ta],Object.getOwnPropertyDescriptor(ca.prototype,"setPostData"),ca.prototype),Object(ot["a"])(ca.prototype,"setCategorySelected",[ra],Object.getOwnPropertyDescriptor(ca.prototype,"setCategorySelected"),ca.prototype),Object(ot["a"])(ca.prototype,"resetPostData",[aa],Object.getOwnPropertyDescriptor(ca.prototype,"resetPostData"),ca.prototype),Object(ot["a"])(ca.prototype,"resetPartPay",[it["action"]],Object.getOwnPropertyDescriptor(ca.prototype,"resetPartPay"),ca.prototype),pa=Object(ot["a"])(ca.prototype,"setPartPayFromPostData",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.partPayInfo.selectedImages=e.imagesPriceList,e.partPayInfo.selectedVideo=e.videoPriceList,e.partPayInfo.selectedAudio=e.audioPriceList,e.partPayInfo.selectedAttachments=e.filesPriceList,e.partPayInfo.payPrice=e.postData.attachmentPrice||"",e.partPayInfo.textFreeValue=100*e.postData.freeWords}}}),Object(ot["a"])(ca.prototype,"setPartPayInfo",[it["action"]],Object.getOwnPropertyDescriptor(ca.prototype,"setPartPayInfo"),ca.prototype),Object(ot["a"])(ca.prototype,"checkPartPayInfo",[it["action"]],Object.getOwnPropertyDescriptor(ca.prototype,"checkPartPayInfo"),ca.prototype),Object(ot["a"])(ca.prototype,"setPartPayInfoToPostData",[it["action"]],Object.getOwnPropertyDescriptor(ca.prototype,"setPartPayInfoToPostData"),ca.prototype),Object(ot["a"])(ca.prototype,"gettContentIndexes",[it["action"]],Object.getOwnPropertyDescriptor(ca.prototype,"gettContentIndexes"),ca.prototype),Object(ot["a"])(ca.prototype,"getCreateThreadParams",[it["action"]],Object.getOwnPropertyDescriptor(ca.prototype,"getCreateThreadParams"),ca.prototype),Object(ot["a"])(ca.prototype,"formatThreadDetailToPostData",[it["action"]],Object.getOwnPropertyDescriptor(ca.prototype,"formatThreadDetailToPostData"),ca.prototype),Object(ot["a"])(ca.prototype,"setCurrentSelectedToolbar",[it["action"]],Object.getOwnPropertyDescriptor(ca.prototype,"setCurrentSelectedToolbar"),ca.prototype),Object(ot["a"])(ca.prototype,"setCursorPosition",[oa],Object.getOwnPropertyDescriptor(ca.prototype,"setCursorPosition"),ca.prototype),Object(ot["a"])(ca.prototype,"setNavInfo",[it["action"]],Object.getOwnPropertyDescriptor(ca.prototype,"setNavInfo"),ca.prototype),Object(ot["a"])(ca.prototype,"getCategorySelectById",[it["action"]],Object.getOwnPropertyDescriptor(ca.prototype,"getCategorySelectById"),ca.prototype),Object(ot["a"])(ca.prototype,"getCategoriesCanCreate",[ia],Object.getOwnPropertyDescriptor(ca.prototype,"getCategoriesCanCreate"),ca.prototype),Object(ot["a"])(ca.prototype,"getCategoriesCanEdit",[it["action"]],Object.getOwnPropertyDescriptor(ca.prototype,"getCategoriesCanEdit"),ca.prototype),Object(ot["a"])(ca.prototype,"getCurrentCategories",[it["action"]],Object.getOwnPropertyDescriptor(ca.prototype,"getCurrentCategories"),ca.prototype),Object(ot["a"])(ca.prototype,"setThreadStatus",[it["action"]],Object.getOwnPropertyDescriptor(ca.prototype,"setThreadStatus"),ca.prototype),Object(ot["a"])(ca.prototype,"setLocalDataStatus",[it["action"]],Object.getOwnPropertyDescriptor(ca.prototype,"setLocalDataStatus"),ca.prototype),Object(ot["a"])(ca.prototype,"setEditorHintAtKey",[it["action"]],Object.getOwnPropertyDescriptor(ca.prototype,"setEditorHintAtKey"),ca.prototype),Object(ot["a"])(ca.prototype,"setEditorHintTopicKey",[it["action"]],Object.getOwnPropertyDescriptor(ca.prototype,"setEditorHintTopicKey"),ca.prototype),Object(ot["a"])(ca.prototype,"setPluginPostData",[na],Object.getOwnPropertyDescriptor(ca.prototype,"setPluginPostData"),ca.prototype),Object(ot["a"])(ca.prototype,"deletePluginPostData",[sa],Object.getOwnPropertyDescriptor(ca.prototype,"deletePluginPostData"),ca.prototype),ca),Hs=Qs,Gs=r(78),Js=r(43),$s=-8e3,Xs=-8001,Zs=(ua=function(){function e(){Object(Qe["a"])(this,e),Object(at["a"])(this,"username",la,this),Object(at["a"])(this,"password",ba,this),Object(at["a"])(this,"sessionToken",da,this),Object(at["a"])(this,"reset",ha,this),Object(at["a"])(this,"login",Oa,this)}return Object(He["a"])(e,[{key:"isInfoComplete",get:function(){return this.username&&this.password}}]),e}(),la=Object(ot["a"])(ua.prototype,"username",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ba=Object(ot["a"])(ua.prototype,"password",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),da=Object(ot["a"])(ua.prototype,"sessionToken",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Object(ot["a"])(ua.prototype,"isInfoComplete",[it["computed"]],Object.getOwnPropertyDescriptor(ua.prototype,"isInfoComplete"),ua.prototype),ha=Object(ot["a"])(ua.prototype,"reset",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.username="",e.password=""}}}),Oa=Object(ot["a"])(ua.prototype,"login",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(Ke["a"])(Object(Ye["a"])().mark((function t(){var r,a,o,i,n;return Object(Ye["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.username&&e.password){t.next=2;break}throw{Code:"ulg_0000",Message:"\u8bf7\u586b\u5199\u5b8c\u6574\u4fe1\u606f"};case 2:return t.prev=2,r={username:e.username,password:e.password,type:"mobilebrowser_username_login"},e.sessionToken&&(r.sessionToken=e.sessionToken),t.next=7,Object(nt["usernameLogin"])({data:r});case 7:if(a=t.sent,Object(Js["d"])(a),0!==a.code){t.next=13;break}return o=Object(st["a"])(a,"data.accessToken",""),Object(Gs["a"])({accessToken:o}),t.abrupt("return",a);case 13:if(a.code!==Xs){t.next=15;break}throw{Code:Xs,sessionToken:Object(st["a"])(a,"data.sessionToken"),Message:"\u9700\u8981\u7ed1\u5b9a\u624b\u673a\u53f7"};case 15:if(a.code!==$s){t.next=19;break}throw i=Object(st["a"])(a,"data.accessToken",""),n=Object(st["a"])(a,"data.uid",""),{Code:-8e3,Message:"\u9700\u8981\u7ed1\u5b9a\u5fae\u4fe1",sessionToken:Object(st["a"])(a,"data.sessionToken"),nickname:Object(st["a"])(a,"data.nickname"),uid:n,accessToken:i};case 19:throw{Code:a.code,Message:a.msg};case 22:if(t.prev=22,t.t0=t["catch"](2),!t.t0.Code){t.next=26;break}throw t.t0;case 26:throw{Code:"ulg_9999",Message:"\u7f51\u7edc\u9519\u8bef",error:t.t0};case 27:case"end":return t.stop()}}),t,null,[[2,22]])})))}}),ua),ec=(ya=function(){function e(){Object(Qe["a"])(this,e),Object(at["a"])(this,"username",fa,this),Object(at["a"])(this,"password",ga,this),Object(at["a"])(this,"nickname",ja,this),Object(at["a"])(this,"code",ma,this),Object(at["a"])(this,"captchaTicket",va,this),Object(at["a"])(this,"captchaRandStr",wa,this),Object(at["a"])(this,"passwordConfirmation",ka,this),Object(at["a"])(this,"reset",Pa,this),Object(at["a"])(this,"register",Da,this)}return Object(He["a"])(e,[{key:"isPasswordSame",value:function(){return this.password===this.passwordConfirmation}},{key:"isInfoNotCpl",get:function(){return!this.username||!this.password||!this.nickname||!this.passwordConfirmation}},{key:"verifyForm",value:function(){if(this.isInfoNotCpl)throw{Code:"reg_0000",Message:"\u8bf7\u586b\u5199\u5b8c\u6574\u4fe1\u606f"};if(!this.isPasswordSame())throw{Code:"reg_0001",Message:"\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u4e00\u81f4"}}}]),e}(),fa=Object(ot["a"])(ya.prototype,"username",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ga=Object(ot["a"])(ya.prototype,"password",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ja=Object(ot["a"])(ya.prototype,"nickname",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ma=Object(ot["a"])(ya.prototype,"code",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),va=Object(ot["a"])(ya.prototype,"captchaTicket",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),wa=Object(ot["a"])(ya.prototype,"captchaRandStr",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ka=Object(ot["a"])(ya.prototype,"passwordConfirmation",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Object(ot["a"])(ya.prototype,"isInfoNotCpl",[it["computed"]],Object.getOwnPropertyDescriptor(ya.prototype,"isInfoNotCpl"),ya.prototype),Pa=Object(ot["a"])(ya.prototype,"reset",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.username="",e.password="",e.passwordConfirmation="",e.nickname=""}}}),Da=Object(ot["a"])(ya.prototype,"register",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(Ke["a"])(Object(Ye["a"])().mark((function t(){var r,a;return Object(Ye["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(nt["usernameRegister"])({data:{username:e.username,password:e.password,nickname:e.nickname,passwordConfirmation:e.passwordConfirmation,captchaRandStr:e.captchaRandStr,captchaTicket:e.captchaTicket,code:e.code}});case 3:if(r=t.sent,Object(Js["d"])(r),0!==r.code){t.next=9;break}return a=Object(st["a"])(r,"data.accessToken"),Object(Gs["a"])({accessToken:a}),t.abrupt("return",r.data);case 9:throw{Code:r.code,Message:r.msg};case 12:if(t.prev=12,t.t0=t["catch"](0),!t.t0.Code){t.next=16;break}throw t.t0;case 16:throw{Code:"reg_9999",Message:"\u7f51\u7edc\u9519\u8bef",error:t.t0};case 17:case"end":return t.stop()}}),t,null,[[0,12]])})))}}),ya),tc=r(130),rc={NO_NICKNAME_ERROR:{Code:"nnb_0000",Message:"\u8bf7\u586b\u5199\u6635\u79f0"},NETWORK_ERROR:{Code:"nnb_9999",Message:"\u7f51\u7edc\u9519\u8bef"}},ac=(Ta=Object(He["a"])((function e(){Object(Qe["a"])(this,e),Object(at["a"])(this,"nickname",xa,this),Object(at["a"])(this,"bindNickname",Ca,this)})),xa=Object(ot["a"])(Ta.prototype,"nickname",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ca=Object(ot["a"])(Ta.prototype,"bindNickname",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(Ke["a"])(Object(Ye["a"])().mark((function t(){var r;return Object(Ye["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.nickname){t.next=2;break}throw rc.NO_NICKNAME_ERROR;case 2:return t.prev=2,t.next=5,Object(nt["setNickname"])({data:{nickname:e.nickname}});case 5:if(r=t.sent,Object(Js["d"])(r),0!==r.code){t.next=9;break}return t.abrupt("return",r.data);case 9:throw{Code:r.code,Message:r.msg};case 12:if(t.prev=12,t.t0=t["catch"](2),!t.t0.Code){t.next=16;break}throw t.t0;case 16:throw Object(We["a"])(Object(We["a"])({},rc.NETWORK_ERROR),{},{error:t.t0});case 17:case"end":return t.stop()}}),t,null,[[2,12]])})))}}),Ta),oc=(Ia=Object(He["a"])((function e(){Object(Qe["a"])(this,e),Object(Xe["a"])(this,"codeTimmer",null),Object(at["a"])(this,"name",La,this),Object(at["a"])(this,"cause",Sa,this),Object(at["a"])(this,"gender",Ua,this),Object(at["a"])(this,"interest",Ea,this),Object(at["a"])(this,"photo",Ra,this),Object(at["a"])(this,"attachment",za,this),Object(at["a"])(this,"fields",Ma,this),Object(at["a"])(this,"values",Aa,this)})),La=Object(ot["a"])(Ia.prototype,"name",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Sa=Object(ot["a"])(Ia.prototype,"cause",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ua=Object(ot["a"])(Ia.prototype,"gender",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ea=Object(ot["a"])(Ia.prototype,"interest",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ra=Object(ot["a"])(Ia.prototype,"photo",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),za=Object(ot["a"])(Ia.prototype,"attachment",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ma=Object(ot["a"])(Ia.prototype,"fields",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Aa=Object(ot["a"])(Ia.prototype,"values",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ia),ic={MOBILE_VERIFY_ERROR:{Code:"mbb_0002",Message:"\u8bf7\u586b\u5199\u6b63\u786e\u7684\u624b\u673a\u53f7"},VERIFY_TIME_ERROR:{Code:"mbb_0001",Message:"\u8bf7\u7b49\u5f85\u5012\u8ba1\u65f6\u7ed3\u675f\u540e\u518d\u53d1\u9001\u77ed\u4fe1"},NO_MOBILE_ERROR:{Code:"mbb_0000",Message:"\u8bf7\u586b\u5199\u624b\u673a\u53f7"},NETWORK_ERROR:{Code:"mbb_9999",Message:"\u7f51\u7edc\u9519\u8bef"},NO_VERIFY_CODE:{Code:"mbb_0003",Message:"\u9a8c\u8bc1\u7801\u7f3a\u5931"}},nc=(Na=function(){function e(){var t=this;Object(Qe["a"])(this,e),Object(Xe["a"])(this,"codeTimmer",null),Object(at["a"])(this,"mobile",Fa,this),Object(at["a"])(this,"code",_a,this),Object(at["a"])(this,"codeTimeout",Va,this),Object(Xe["a"])(this,"verifyMobile",(function(){var e=/^(?:(?:\+|00)86)?1[3-9]\d{9}$/;return e.test(t.mobile)})),Object(Xe["a"])(this,"beforeSendVerify",(function(){if(t.codeTimeout)throw ic.VERIFY_TIME_ERROR;if(!t.mobile)throw ic.NO_MOBILE_ERROR;if(!t.verifyMobile())throw ic.MOBILE_VERIFY_ERROR})),Object(at["a"])(this,"reset",Ba,this),Object(Xe["a"])(this,"setCounter",(function(e){t.codeTimeout=e,t.codeTimmer=setTimeout((function(){t.codeTimeout=null,t.codeTimmer=null}),1e3*Number(t.codeTimeout));var r=function e(){t.codeTimeout&&(t.codeTimeout=t.codeTimeout-1,setTimeout((function(){e()}),1e3))};setTimeout((function(){return r()}),1e3)})),Object(at["a"])(this,"sendCode",Wa,this),Object(at["a"])(this,"bind",qa,this)}return Object(He["a"])(e,[{key:"beforeBindVerify",value:function(){if(!this.mobile)throw ic.NO_MOBILE_ERROR;if(!this.code)throw ic.NO_VERIFY_CODE}},{key:"isInfoComplete",get:function(){return this.mobile&&this.code}}]),e}(),Fa=Object(ot["a"])(Na.prototype,"mobile",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_a=Object(ot["a"])(Na.prototype,"code",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Va=Object(ot["a"])(Na.prototype,"codeTimeout",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ba=Object(ot["a"])(Na.prototype,"reset",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.mobile="",e.code="",e.codeTimeout=null}}}),Wa=Object(ot["a"])(Na.prototype,"sendCode",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(Ke["a"])(Object(Ye["a"])().mark((function t(r){var a,o,i;return Object(Ye["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=r.captchaRandStr,o=r.captchaTicket,t.prev=1,t.next=4,Object(nt["smsSend"])({data:{mobile:e.mobile,type:"bind",captchaRandStr:a,captchaTicket:o}});case 4:if(i=t.sent,0!==i.code){t.next=8;break}return e.setCounter(i.data.interval),t.abrupt("return",i.data);case 8:throw{Code:i.code,Message:i.msg};case 11:if(t.prev=11,t.t0=t["catch"](1),!t.t0.Code){t.next=15;break}throw t.t0;case 15:throw Object(We["a"])(Object(We["a"])({},ic.NETWORK_ERROR),{},{error:t.t0});case 16:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()}}),Object(ot["a"])(Na.prototype,"isInfoComplete",[it["computed"]],Object.getOwnPropertyDescriptor(Na.prototype,"isInfoComplete"),Na.prototype),qa=Object(ot["a"])(Na.prototype,"bind",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(Ke["a"])(Object(Ye["a"])().mark((function t(r){var a,o;return Object(Ye["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.beforeBindVerify(),t.prev=1,t.next=4,Object(nt["smsBind"])({data:{mobile:e.mobile,code:e.code,sessionToken:r}});case 4:if(a=t.sent,Object(Js["d"])(a),0!==a.code){t.next=10;break}return o=Object(st["a"])(a,"data.accessToken",""),Object(Gs["a"])({accessToken:o}),t.abrupt("return",a.data);case 10:throw{Code:a.code,Message:a.msg};case 13:if(t.prev=13,t.t0=t["catch"](1),!t.t0.Code){t.next=17;break}throw t.t0;case 17:throw Object(We["a"])(Object(We["a"])({},ic.NETWORK_ERROR),{},{error:t.t0});case 18:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}()}}),Na),sc={NETWORK_ERROR:{Code:"rps_9999",Message:"\u7f51\u7edc\u9519\u8bef"},BIND_MOBILE_VERIFY_ERROR:{Code:"rps_0007",Message:"\u8bf7\u586b\u5199\u7ed1\u5b9a\u7684\u624b\u673a\u53f7"},MOBILE_VERIFY_ERROR:{Code:"rps_0002",Message:"\u8bf7\u586b\u5199\u6b63\u786e\u7684\u624b\u673a\u53f7"},VERIFY_TIME_ERROR:{Code:"rps_0001",Message:"\u8bf7\u7b49\u5f85\u5012\u8ba1\u65f6\u7ed3\u675f\u540e\u518d\u53d1\u9001\u77ed\u4fe1"},NO_MOBILE_ERROR:{Code:"rps_0000",Message:"\u8bf7\u586b\u5199\u624b\u673a\u53f7"},NO_VERIFY_CODE:{Code:"rps_0003",Message:"\u9a8c\u8bc1\u7801\u7f3a\u5931"},NO_PASSWORD:{Code:"rps_0004",Message:"\u8bf7\u586b\u5199\u5bc6\u7801"},NO_PASSWORD_REPEAT:{Code:"rps_0005",Message:"\u8bf7\u586b\u5199\u91cd\u65b0\u8f93\u5165\u5bc6\u7801\u5b57\u6bb5"},NO_PASSWORD_EQUAL:{Code:"rps_0006",Message:"\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u4e00\u81f4"}},cc=(Ya=function(){function e(){var t=this;Object(Qe["a"])(this,e),Object(Xe["a"])(this,"codeTimmer",null),Object(at["a"])(this,"mobile",Ka,this),Object(at["a"])(this,"code",Qa,this),Object(at["a"])(this,"newPassword",Ha,this),Object(at["a"])(this,"newPasswordRepeat",Ga,this),Object(at["a"])(this,"codeTimeout",Ja,this),Object(at["a"])(this,"reset",$a,this),Object(Xe["a"])(this,"verifyMobile",(function(){var e=/^(?:(?:\+|00)86)?1[3-9]\d{9}$/;return e.test(t.mobile)})),Object(Xe["a"])(this,"beforeSendVerify",(function(e){if(t.codeTimeout)throw sc.VERIFY_TIME_ERROR;if(!t.mobile)throw sc.NO_MOBILE_ERROR;if(!t.verifyMobile())throw sc.MOBILE_VERIFY_ERROR;if(e&&e!==t.mobile)throw sc.BIND_MOBILE_VERIFY_ERROR})),Object(Xe["a"])(this,"beforeResetPwdVerify",(function(){if(!t.newPassword)throw sc.NO_PASSWORD;if(!t.newPasswordRepeat)throw sc.NO_PASSWORD_REPEAT;if(!t.code)throw sc.NO_VERIFY_CODE;if(!t.passwordEqual)throw sc.NO_PASSWORD_EQUAL})),Object(Xe["a"])(this,"setCounter",(function(e){t.codeTimeout=e,t.codeTimmer=setTimeout((function(){t.codeTimeout=null,t.codeTimmer=null}),1e3*Number(t.codeTimeout));var r=function e(){t.codeTimeout&&(t.codeTimeout=t.codeTimeout-1,setTimeout((function(){e()}),1e3))};setTimeout((function(){return r()}),1e3)})),Object(at["a"])(this,"sendCode",Xa,this),Object(at["a"])(this,"resetPassword",Za,this)}return Object(He["a"])(e,[{key:"isInvalidCode",get:function(){return 6===this.code.length}},{key:"isInfoComplete",get:function(){return this.code&&this.mobile&&this.newPassword&&this.newPasswordRepeat&&this.newPassword}},{key:"passwordEqual",get:function(){return this.newPasswordRepeat===this.newPassword}}]),e}(),Ka=Object(ot["a"])(Ya.prototype,"mobile",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Qa=Object(ot["a"])(Ya.prototype,"code",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ha=Object(ot["a"])(Ya.prototype,"newPassword",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ga=Object(ot["a"])(Ya.prototype,"newPasswordRepeat",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ja=Object(ot["a"])(Ya.prototype,"codeTimeout",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(ot["a"])(Ya.prototype,"isInvalidCode",[it["computed"]],Object.getOwnPropertyDescriptor(Ya.prototype,"isInvalidCode"),Ya.prototype),$a=Object(ot["a"])(Ya.prototype,"reset",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.mobile="",e.code="",e.newPassword="",e.newPasswordRepeat="",e.codeTimeout=null}}}),Object(ot["a"])(Ya.prototype,"isInfoComplete",[it["computed"]],Object.getOwnPropertyDescriptor(Ya.prototype,"isInfoComplete"),Ya.prototype),Object(ot["a"])(Ya.prototype,"passwordEqual",[it["computed"]],Object.getOwnPropertyDescriptor(Ya.prototype,"passwordEqual"),Ya.prototype),Xa=Object(ot["a"])(Ya.prototype,"sendCode",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(Ke["a"])(Object(Ye["a"])().mark((function t(r){var a,o,i;return Object(Ye["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=r.captchaRandStr,o=r.captchaTicket,t.prev=1,t.next=4,Object(nt["smsSend"])({data:{mobile:e.mobile,type:"reset_pwd",captchaRandStr:a,captchaTicket:o}});case 4:if(i=t.sent,0!==i.code){t.next=8;break}return e.setCounter(i.data.interval),t.abrupt("return",i.data);case 8:throw{Code:i.code,Message:i.msg};case 11:if(t.prev=11,t.t0=t["catch"](1),!t.t0.Code){t.next=15;break}throw t.t0;case 15:throw Object(We["a"])(Object(We["a"])({},sc.NETWORK_ERROR),{},{error:t.t0});case 16:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()}}),Za=Object(ot["a"])(Ya.prototype,"resetPassword",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(Ke["a"])(Object(Ye["a"])().mark((function t(){var r;return Object(Ye["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.beforeResetPwdVerify(),t.prev=1,t.next=4,Object(nt["smsResetPwd"])({data:{mobile:e.mobile,password:e.newPassword,code:e.code}});case 4:if(r=t.sent,0!==r.code){t.next=7;break}return t.abrupt("return",r.data);case 7:throw{Code:r.code,Message:r.msg};case 10:if(t.prev=10,t.t0=t["catch"](1),!t.t0.Code){t.next=14;break}throw t.t0;case 14:throw Object(We["a"])(Object(We["a"])({},sc.NETWORK_ERROR),{},{error:t.t0});case 15:case"end":return t.stop()}}),t,null,[[1,10]])})))}}),Ya),pc=r(424),uc={MOBILE_VERIFY_ERROR:{Code:"wpb_0002",Message:"\u8bf7\u586b\u5199\u6b63\u786e\u7684\u624b\u673a\u53f7"},VERIFY_TIME_ERROR:{Code:"wpb_0001",Message:"\u8bf7\u7b49\u5f85\u5012\u8ba1\u65f6\u7ed3\u675f\u540e\u518d\u53d1\u9001\u77ed\u4fe1"},NO_MOBILE_ERROR:{Code:"wpb_0000",Message:"\u8bf7\u586b\u5199\u624b\u673a\u53f7"},NETWORK_ERROR:{Code:"wpb_9999",Message:"\u7f51\u7edc\u9519\u8bef"},NO_VERIFY_CODE:{Code:"wpb_0003",Message:"\u9a8c\u8bc1\u7801\u7f3a\u5931"},NEED_BIND_USERNAME:{Code:"wpb_0004",Message:"\u9700\u8981\u8865\u5145\u6635\u79f0"},NEED_COMPLETE_REQUIRED_INFO:{Code:"wpb_0005",Message:"\u9700\u8981\u8865\u5145\u9644\u52a0\u4fe1\u606f"},NEED_ALL_INFO:{Code:"wpb_0006",Message:"\u9700\u8981\u8865\u5145\u6635\u79f0\u548c\u9644\u52a0\u4fe1\u606f"}},lc=(eo=function(){function e(){var t=this;Object(Qe["a"])(this,e),Object(Xe["a"])(this,"codeTimmer",null),Object(at["a"])(this,"mobile",to,this),Object(at["a"])(this,"code",ro,this),Object(at["a"])(this,"codeTimeout",ao,this),Object(at["a"])(this,"needToSetNickname",oo,this),Object(at["a"])(this,"needToCompleteExtraInfo",io,this),Object(at["a"])(this,"reset",no,this),Object(Xe["a"])(this,"verifyMobile",(function(){var e=/^(?:(?:\+|00)86)?1[3-9]\d{9}$/;return e.test(t.mobile)})),Object(Xe["a"])(this,"beforeSendVerify",(function(){if(t.codeTimeout)throw uc.VERIFY_TIME_ERROR;if(!t.mobile)throw uc.NO_MOBILE_ERROR;if(!t.verifyMobile())throw uc.MOBILE_VERIFY_ERROR})),Object(Xe["a"])(this,"setCounter",(function(e){t.codeTimeout=e,t.codeTimmer=setTimeout((function(){t.codeTimeout=null,t.codeTimmer=null}),1e3*Number(t.codeTimeout));var r=function e(){t.codeTimeout&&(t.codeTimeout=t.codeTimeout-1,setTimeout((function(){e()}),1e3))};setTimeout((function(){return r()}),1e3)})),Object(at["a"])(this,"sendCode",so,this),Object(Xe["a"])(this,"beforeLoginVerify",(function(){if(!t.mobile)throw uc.NO_MOBILE_ERROR;if(!t.code)throw uc.NO_VERIFY_CODE})),Object(Xe["a"])(this,"checkCompleteUserInfo",(function(e){var r=Object(st["a"])(e,"data.isMissNickname",!1),a=10===Object(st["a"])(e,"data.userStatus");if(a&&r)throw t.needToCompleteExtraInfo=!0,t.needToSetNickname=!0,uc.NEED_ALL_INFO;if(a)throw t.needToCompleteExtraInfo=!0,uc.NEED_COMPLETE_REQUIRED_INFO;if(r)throw t.needToSetNickname=!0,uc.NEED_BIND_USERNAME})),Object(at["a"])(this,"loginAndBind",co,this)}return Object(He["a"])(e,[{key:"isInvalidCode",get:function(){return 6===this.code.length}},{key:"isInfoComplete",get:function(){return this.code&&this.mobile}}]),e}(),to=Object(ot["a"])(eo.prototype,"mobile",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ro=Object(ot["a"])(eo.prototype,"code",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ao=Object(ot["a"])(eo.prototype,"codeTimeout",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oo=Object(ot["a"])(eo.prototype,"needToSetNickname",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),io=Object(ot["a"])(eo.prototype,"needToCompleteExtraInfo",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(ot["a"])(eo.prototype,"isInvalidCode",[it["computed"]],Object.getOwnPropertyDescriptor(eo.prototype,"isInvalidCode"),eo.prototype),no=Object(ot["a"])(eo.prototype,"reset",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.mobile="",e.code="",e.codeTimeout=null}}}),Object(ot["a"])(eo.prototype,"isInfoComplete",[it["computed"]],Object.getOwnPropertyDescriptor(eo.prototype,"isInfoComplete"),eo.prototype),so=Object(ot["a"])(eo.prototype,"sendCode",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(Ke["a"])(Object(Ye["a"])().mark((function t(r){var a,o,i;return Object(Ye["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=r.captchaRandStr,o=r.captchaTicket,t.prev=1,t.next=4,Object(nt["smsSend"])({data:{mobile:e.mobile,type:"login",captchaRandStr:a,captchaTicket:o}});case 4:if(i=t.sent,0!==i.code){t.next=8;break}return e.setCounter(i.data.interval),t.abrupt("return",i.data);case 8:throw{Code:i.code,Message:i.msg};case 11:if(t.prev=11,t.t0=t["catch"](1),!t.t0.Code){t.next=15;break}throw t.t0;case 15:throw Object(We["a"])(Object(We["a"])({},uc.NETWORK_ERROR),{},{error:t.t0});case 16:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()}}),co=Object(ot["a"])(eo.prototype,"loginAndBind",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(Ke["a"])(Object(Ye["a"])().mark((function t(r){var a,o;return Object(Ye["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.beforeLoginVerify(),t.prev=1,t.next=4,Object(nt["transitionSmsBind"])({data:{mobile:e.mobile,code:e.code,sessionToken:r}});case 4:if(a=t.sent,Object(Js["d"])(a),0!==a.code){t.next=11;break}return o=Object(st["a"])(a,"data.accessToken",""),Object(Gs["a"])({accessToken:o}),e.checkCompleteUserInfo(a),t.abrupt("return",a.data);case 11:throw{Code:a.code,Message:a.msg};case 14:if(t.prev=14,t.t0=t["catch"](1),!t.t0.Code){t.next=18;break}throw t.t0;case 18:throw Object(We["a"])(Object(We["a"])({},uc.NETWORK_ERROR),{},{error:t.t0});case 19:case"end":return t.stop()}}),t,null,[[1,14]])})));return function(e){return t.apply(this,arguments)}}()}}),eo),bc=(po=function(){function e(){Object(Qe["a"])(this,e)}return Object(He["a"])(e,[{key:"mobilebrowserBind",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(nt["miniBind"])({data:t});case 3:if(r=e.sent,0!==r.code){e.next=7;break}return Object(Gs["a"])({accessToken:t.accessToken}),e.abrupt("return",r);case 7:throw{Code:r.code,Message:r.msg};case 10:if(e.prev=10,e.t0=e["catch"](0),!e.t0.Code){e.next=14;break}throw e.t0;case 14:throw{Code:"ulg_9999",Message:"\u7f51\u7edc\u9519\u8bef",error:e.t0};case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),Object(ot["a"])(po.prototype,"mobilebrowserBind",[it["action"]],Object.getOwnPropertyDescriptor(po.prototype,"mobilebrowserBind"),po.prototype),po),dc=240,hc=(uo=function(){function e(){Object(Qe["a"])(this,e),Object(at["a"])(this,"qrCode",lo,this),Object(at["a"])(this,"sessionToken",bo,this),Object(at["a"])(this,"countDown",ho,this),Object(at["a"])(this,"bindTitle",Oo,this),Object(at["a"])(this,"isBtn",yo,this),Object(Xe["a"])(this,"countDownOfSeconds",dc)}return Object(He["a"])(e,[{key:"isQrCodeValid",get:function(){return this.countDown>0}},{key:"resetCountDown",value:function(){this.countDown=this.countDownOfSeconds}},{key:"generate",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r,a,o;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,r=t.params.type,a=r.indexOf("mini")>-1?nt["genMiniQrcode"]:nt["genH5Qrcode"],e.next=5,a(Object(We["a"])({},t));case 5:if(o=e.sent,0!==o.code){e.next=11;break}return this.qrCode=o.data.base64Img,this.sessionToken=o.data.sessionToken,this.resetCountDown(),e.abrupt("return");case 11:throw{Code:o.code,Message:o.msg};case 14:if(e.prev=14,e.t0=e["catch"](0),!e.t0.Code){e.next=18;break}throw e.t0;case 18:throw{Code:"ulg_9999",Message:"\u7f51\u7edc\u9519\u8bef",error:e.t0};case 19:case"end":return e.stop()}}),e,this,[[0,14]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"login",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r,a,o,i;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,r=t.type,a=r.indexOf("mini")>-1?nt["miniQrcodeLogin"]:nt["h5QrcodeLogin"],e.next=5,a(Object(We["a"])({},t));case 5:if(o=e.sent,Object(Js["d"])(o),0!==o.code){e.next=11;break}return i=Object(st["a"])(o,"data.accessToken",""),Object(Gs["a"])({accessToken:i}),e.abrupt("return",o);case 11:throw{Code:o.code,Message:o.msg};case 14:if(e.prev=14,e.t0=e["catch"](0),!e.t0.Code){e.next=18;break}throw e.t0;case 18:throw{Code:"ulg_9999",Message:"\u7f51\u7edc\u9519\u8bef",error:e.t0};case 19:case"end":return e.stop()}}),e,null,[[0,14]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"bind",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r,a,o,i;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,r=t.type,a=r.indexOf("mini")>-1?nt["miniQrcodeBind"]:nt["h5QrcodeBind"],e.next=5,a(Object(We["a"])({},t));case 5:if(o=e.sent,Object(Js["d"])(o),0!==o.code){e.next=11;break}return i=Object(st["a"])(o,"data.accessToken",""),Object(Gs["a"])({accessToken:i}),e.abrupt("return",o);case 11:throw{Code:o.code,Message:o.msg};case 14:if(e.prev=14,e.t0=e["catch"](0),!e.t0.Code){e.next=18;break}throw e.t0;case 18:throw{Code:"ulg_9999",Message:"\u7f51\u7edc\u9519\u8bef",error:e.t0};case 19:case"end":return e.stop()}}),e,null,[[0,14]])})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),lo=Object(ot["a"])(uo.prototype,"qrCode",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),bo=Object(ot["a"])(uo.prototype,"sessionToken",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ho=Object(ot["a"])(uo.prototype,"countDown",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return dc}}),Oo=Object(ot["a"])(uo.prototype,"bindTitle",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"\u8bf7\u7ed1\u5b9a\u60a8\u7684\u5fae\u4fe1"}}),yo=Object(ot["a"])(uo.prototype,"isBtn",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Object(ot["a"])(uo.prototype,"isQrCodeValid",[it["computed"]],Object.getOwnPropertyDescriptor(uo.prototype,"isQrCodeValid"),uo.prototype),Object(ot["a"])(uo.prototype,"resetCountDown",[it["action"]],Object.getOwnPropertyDescriptor(uo.prototype,"resetCountDown"),uo.prototype),Object(ot["a"])(uo.prototype,"generate",[it["action"]],Object.getOwnPropertyDescriptor(uo.prototype,"generate"),uo.prototype),Object(ot["a"])(uo.prototype,"login",[it["action"]],Object.getOwnPropertyDescriptor(uo.prototype,"login"),uo.prototype),Object(ot["a"])(uo.prototype,"bind",[it["action"]],Object.getOwnPropertyDescriptor(uo.prototype,"bind"),uo.prototype),uo),Oc=(fo=function(){function e(){Object(Qe["a"])(this,e),Object(at["a"])(this,"indexTopics",go,this),Object(at["a"])(this,"indexUsers",jo,this),Object(at["a"])(this,"indexThreadsNamespace",mo,this),Object(at["a"])(this,"indexThreadsLoading",vo,this),Object(at["a"])(this,"indexTopicsError",wo,this),Object(at["a"])(this,"indexUsersError",ko,this),Object(at["a"])(this,"topics",Po,this),Object(at["a"])(this,"users",Do,this),Object(at["a"])(this,"threadsNamespace",To,this),Object(at["a"])(this,"topicsError",xo,this),Object(at["a"])(this,"usersError",Co,this),Object(at["a"])(this,"searchTopics",Io,this),Object(at["a"])(this,"searchUsers",Lo,this),Object(at["a"])(this,"searchThreadsNamespace",So,this),Object(at["a"])(this,"searchTopicsError",Uo,this),Object(at["a"])(this,"searchUsersError",Eo,this),Object(at["a"])(this,"currentKeyword",Ro,this),Object(at["a"])(this,"currentTopicKeyword",zo,this),Object(at["a"])(this,"currentUserKeyword",Mo,this),Object(at["a"])(this,"currentPostKeyword",Ao,this),Object(at["a"])(this,"searchNoData",No,this),this.threadList=new yt["a"]}return Object(He["a"])(e,[{key:"indexThreads",get:function(){var e,t,r,a=null,o=null===(e=this.threadList.lists)||void 0===e?void 0:e[this.indexThreadsNamespace],i=null===(t=this.threadList.lists)||void 0===t||null===(r=t[this.indexThreadsNamespace])||void 0===r?void 0:r.attribs;if(null!==o&&void 0!==o&&o.data){var n=this.threadList.listAdapter(o);a=Object(We["a"])({pageData:n},i)}var s={listStore:this.threadList,namespace:this.indexThreadsNamespace};return Ot(a,s)},set:function(e){e?this.threadList.setList({namespace:this.indexThreadsNamespace,data:{data:e},page:e.currentPage}):this.threadList.clearList({namespace:this.indexThreadsNamespace})}},{key:"indexThreadsError",get:function(){var e,t,r=null===(e=this.threadList.lists)||void 0===e||null===(t=e[this.indexThreadsNamespace])||void 0===t?void 0:t.requestError;return r},set:function(e){var t;null!==(t=this.threadList.lists)&&void 0!==t&&t[this.indexThreadsNamespace]&&(this.threadList.lists[this.indexThreadsNamespace].requestError=e)}},{key:"threads",get:function(){var e,t,r,a=null,o=null===(e=this.threadList.lists)||void 0===e?void 0:e[this.threadsNamespace],i=null===(t=this.threadList.lists)||void 0===t||null===(r=t[this.threadsNamespace])||void 0===r?void 0:r.attribs;if(null!==o&&void 0!==o&&o.data){var n=this.threadList.listAdapter(o);a=Object(We["a"])({pageData:n},i)}var s={listStore:this.threadList,namespace:this.threadsNamespace};return Ot(a,s)},set:function(e){e?this.threadList.setList({namespace:this.threadsNamespace,data:{data:e},page:e.currentPage}):this.threadList.clearList({namespace:this.threadsNamespace})}},{key:"threadsError",get:function(){var e,t,r=null===(e=this.threadList.lists)||void 0===e||null===(t=e[this.threadsNamespace])||void 0===t?void 0:t.requestError;return r},set:function(e){var t;null!==(t=this.threadList.lists)&&void 0!==t&&t[this.threadsNamespace]&&(this.threadList.lists[this.threadsNamespace].requestError=e)}},{key:"searchThreads",get:function(){var e,t,r,a=null,o=null===(e=this.threadList.lists)||void 0===e?void 0:e[this.searchThreadsNamespace],i=null===(t=this.threadList.lists)||void 0===t||null===(r=t[this.searchThreadsNamespace])||void 0===r?void 0:r.attribs;if(null!==o&&void 0!==o&&o.data){var n=this.threadList.listAdapter(o);a=Object(We["a"])({pageData:n},i)}var s={listStore:this.threadList,namespace:this.searchThreadsNamespace};return Ot(a,s)},set:function(e){e?this.threadList.setList({namespace:this.searchThreadsNamespace,data:{data:e},page:e.currentPage}):this.threadList.clearList({namespace:this.searchThreadsNamespace})}},{key:"searchThreadsError",get:function(){var e,t=null===(e=this.threadList.lists)||void 0===e?void 0:e[this.searchThreadsNamespace].requestError;return t},set:function(e){var t;null!==(t=this.threadList.lists)&&void 0!==t&&t[this.searchThreadsNamespace]&&(this.threadList.lists[this.searchThreadsNamespace].requestError=e)}}]),e}(),go=Object(ot["a"])(fo.prototype,"indexTopics",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),jo=Object(ot["a"])(fo.prototype,"indexUsers",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),mo=Object(ot["a"])(fo.prototype,"indexThreadsNamespace",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"search"}}),vo=Object(ot["a"])(fo.prototype,"indexThreadsLoading",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Object(ot["a"])(fo.prototype,"indexThreads",[it["computed"]],Object.getOwnPropertyDescriptor(fo.prototype,"indexThreads"),fo.prototype),wo=Object(ot["a"])(fo.prototype,"indexTopicsError",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{isError:!1,errorText:""}}}),ko=Object(ot["a"])(fo.prototype,"indexUsersError",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{isError:!1,errorText:""}}}),Object(ot["a"])(fo.prototype,"indexThreadsError",[it["computed"]],Object.getOwnPropertyDescriptor(fo.prototype,"indexThreadsError"),fo.prototype),Po=Object(ot["a"])(fo.prototype,"topics",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Do=Object(ot["a"])(fo.prototype,"users",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),To=Object(ot["a"])(fo.prototype,"threadsNamespace",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"search/result-post"}}),Object(ot["a"])(fo.prototype,"threads",[it["computed"]],Object.getOwnPropertyDescriptor(fo.prototype,"threads"),fo.prototype),xo=Object(ot["a"])(fo.prototype,"topicsError",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{isError:!1,errorText:""}}}),Co=Object(ot["a"])(fo.prototype,"usersError",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{isError:!1,errorText:""}}}),Object(ot["a"])(fo.prototype,"threadsError",[it["computed"]],Object.getOwnPropertyDescriptor(fo.prototype,"threadsError"),fo.prototype),Io=Object(ot["a"])(fo.prototype,"searchTopics",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Lo=Object(ot["a"])(fo.prototype,"searchUsers",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),So=Object(ot["a"])(fo.prototype,"searchThreadsNamespace",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"search/result"}}),Object(ot["a"])(fo.prototype,"searchThreads",[it["computed"]],Object.getOwnPropertyDescriptor(fo.prototype,"searchThreads"),fo.prototype),Uo=Object(ot["a"])(fo.prototype,"searchTopicsError",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{isError:!1,errorText:""}}}),Eo=Object(ot["a"])(fo.prototype,"searchUsersError",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{isError:!1,errorText:""}}}),Object(ot["a"])(fo.prototype,"searchThreadsError",[it["computed"]],Object.getOwnPropertyDescriptor(fo.prototype,"searchThreadsError"),fo.prototype),Ro=Object(ot["a"])(fo.prototype,"currentKeyword",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),zo=Object(ot["a"])(fo.prototype,"currentTopicKeyword",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Mo=Object(ot["a"])(fo.prototype,"currentUserKeyword",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ao=Object(ot["a"])(fo.prototype,"currentPostKeyword",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),No=Object(ot["a"])(fo.prototype,"searchNoData",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),fo),yc=Oc,fc=(Fo=it["action"].bound,_o=function(e){Object(Je["a"])(r,e);var t=Object($e["a"])(r);function r(e){return Object(Qe["a"])(this,r),t.call(this,e)}return Object(He["a"])(r,[{key:"setIndexTopics",value:function(e){this.indexTopics=e}},{key:"setIndexUsers",value:function(e){this.indexUsers=e}},{key:"setIndexThreads",value:function(e){this.indexThreads=e}},{key:"setTopics",value:function(e){this.topics=e}},{key:"setUsers",value:function(e){this.users=e}},{key:"setThreads",value:function(e){this.threads=e}},{key:"setSearchTopics",value:function(e){this.searchTopics=e}},{key:"setSearchUsers",value:function(e){this.searchUsers=e}},{key:"setSearchThreads",value:function(e){this.searchThreads=e}},{key:"dataIndexStatus",get:function(){var e=this.indexTopics,t=this.indexUsers,r=this.indexThreads,a=e||{},o=a.pageData,i=t||{},n=i.pageData,s=r||{},c=s.pageData,p=!(null===o||void 0===o||!o.length),u=!(null===n||void 0===n||!n.length),l=!(null===c||void 0===c||!c.length),b=p&&u&&l,d=!p&&!u&&!l;return{hasTopics:p,hasUsers:u,hasThreads:l,isShowAll:b,isNoData:d}}},{key:"dataSearchStatus",get:function(){var e=this.searchTopics,t=this.searchUsers,r=this.searchThreads,a=e||{},o=a.pageData,i=t||{},n=i.pageData,s=r||{},c=s.pageData,p=!(null===o||void 0===o||!o.length),u=!(null===n||void 0===n||!n.length),l=!(null===c||void 0===c||!c.length),b=!p&&!u&&!l||p&&u&&l;return{hasTopics:p,hasUsers:u,hasThreads:l,isShowAll:b}}},{key:"resetIndexData",value:function(){this.indexTopicsError={isError:!1,errorText:""},this.indexUsersError={isError:!1,errorText:""},this.indexThreadsError={isError:!1,errorText:""},this.currentKeyword=null,this.searchNoData=!1,this.setIndexTopics(null),this.setIndexUsers(null),this.setIndexThreads(null)}},{key:"resetSearchData",value:function(){this.searchTopicsError={isError:!1,errorText:""},this.searchUsersError={isError:!1,errorText:""},this.searchThreadsError={isError:!1,errorText:""},this.currentTopicKeyword=null,this.currentUserKeyword=null,this.currentPostKeyword=null,this.setSearchTopics(null),this.setSearchUsers(null),this.setSearchThreads(null)}},{key:"resetResultData",value:function(){this.topicsError={isError:!1,errorText:""},this.usersError={isError:!1,errorText:""},this.threadsError={isError:!1,errorText:""},this.currentKeyword=null,this.setTopics(null),this.setUsers(null),this.setThreads(null)}},{key:"resetTopicsError",value:function(e){0!==e?this.searchTopicsError={isError:!1,errorText:""}:this.indexTopicsError={isError:!1,errorText:""}}},{key:"resetUsersError",value:function(e){0!==e?this.searchUsersError={isError:!1,errorText:""}:this.indexUsersError={isError:!1,errorText:""}}},{key:"resetThreadsError",value:function(e){0!==e?this.searchThreadsError={isError:!1,errorText:""}:this.indexThreadsError={isError:!1,errorText:""}}},{key:"getSearchData",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){var t,r,a,o,i,n,s,c,p,u,l,b,d,h,O,y,f,g,j,m,v,w,k,P,D,T,x,C,I=arguments;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=I.length>0&&void 0!==I[0]?I[0]:{},r=t.type,a=void 0===r?0:r,o=t.search,i=t.perPage,n=void 0===i?10:i,s=t.hasTopics,c=void 0!==s&&s,p=t.hasUsers,u=void 0!==p&&p,l=t.hasThreads,b=void 0!==l&&l,d=n,h={hot:o?0:1,content:o},1===a&&(d=3,h.hot=0),O=[],c?O.push(Promise.resolve({})):O.push(Object(nt["readTopicsList"])({params:{filter:h,perPage:d,page:1}})),u?O.push(Promise.resolve({})):O.push(Object(nt["readUsersList"])({params:{filter:{hot:1,nickname:o},perPage:d,page:1}})),b?O.push(Promise.resolve({})):O.push(this.threadList.fetchList({namespace:"search",filter:{search:o},perPage:d,page:1,sequence:"2"})),this.indexThreadsLoading=!0,e.next=11,Promise.all(O);case 11:y=e.sent,this.indexThreadsLoading=!1,c||(f=y[0],g=f.code,j=f.data,m=f.msg,0!==g&&(0===a?this.indexTopicsError={isError:!0,errorText:m||"\u52a0\u8f7d\u5931\u8d25"}:this.searchTopicsError={isError:!0,errorText:m||"\u52a0\u8f7d\u5931\u8d25"}),this.resetTopicsError(a),0===a?this.setIndexTopics(0===g?j:null):this.setSearchTopics(0===g?j:{})),u||(v=y[1],w=v.code,k=v.data,P=v.msg,0!==w&&(0===a?this.indexUsersError={isError:!0,errorText:P||"\u52a0\u8f7d\u5931\u8d25"}:this.searchUsersError={isError:!0,errorText:P||"\u52a0\u8f7d\u5931\u8d25"}),this.resetUsersError(a),0===a?this.setIndexUsers(0===w?k:null):this.setSearchUsers(0===w?k:{})),b||(D=y[2],T=D.code,x=D.data,C=D.msg,0!==T&&(0===a?this.indexThreadsError={isError:!0,errorText:C||"\u52a0\u8f7d\u5931\u8d25"}:this.searchThreadsError={isError:!0,errorText:C||"\u52a0\u8f7d\u5931\u8d25"}),this.resetThreadsError(a),0===a?this.setIndexThreads(0===T?x:null):this.setSearchThreads(0===T?x:{}));case 16:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getTopicsList",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){var t,r,a,o,i,n,s,c,p,u,l,b,d,h=arguments;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},r=t.search,a=void 0===r?"":r,o=t.hot,i=void 0===o?0:o,n=t.perPage,s=void 0===n?10:n,c=t.page,p=void 0===c?1:c,u={hot:i,content:a},e.next=4,Object(nt["readTopicsList"])({params:{filter:u,perPage:s,page:p}});case 4:if(l=e.sent,0!==l.code||!l.data){e.next=10;break}return this.topics&&l.data.pageData&&1!==p?((b=this.topics.pageData).push.apply(b,Object(ht["a"])(l.data.pageData)),d=this.topics.pageData.slice(),this.setTopics(Object(We["a"])(Object(We["a"])({},l.data),{},{pageData:d}))):this.setTopics(l.data),e.abrupt("return",l.data);case 10:this.topicsError={isError:!0,errorText:(null===l||void 0===l?void 0:l.msg)||"\u52a0\u8f7d\u5931\u8d25"};case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getUsersList",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){var t,r,a,o,i,n,s,c,p,u,l,b,d,h,O,y,f=arguments;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},r=t.type,a=void 0===r?"nickname":r,o=t.search,i=void 0===o?"":o,n=t.hot,s=void 0===n?0:n,c=t.perPage,p=void 0===c?10:c,u=t.page,l=void 0===u?1:u,e.next=3,Object(nt["readUsersList"])({params:{filter:Object(Xe["a"])({hot:s},a,i),perPage:p,page:l}});case 3:if(b=e.sent,d=b.code,h=b.data,0!==d||!h){e.next=10;break}return this.users&&h.pageData&&1!==l?((O=this.users.pageData).push.apply(O,Object(ht["a"])(h.pageData)),y=this.users.pageData.slice(),this.setUsers(Object(We["a"])(Object(We["a"])({},h),{},{pageData:y}))):this.setUsers(h),e.abrupt("return",b);case 10:this.usersError={isError:!0,errorText:(null===b||void 0===b?void 0:b.msg)||"\u52a0\u8f7d\u5931\u8d25"};case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getThreadList",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){var t,r,a,o,i,n,s,c,p,u,l,b,d,h,O=arguments;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=O.length>0&&void 0!==O[0]?O[0]:{},r=t.scope,a=void 0===r?0:r,o=t.sort,i=void 0===o?"3":o,n=t.search,s=void 0===n?"":n,c=t.perPage,p=void 0===c?10:c,u=t.page,l=void 0===u?1:u,b=t.params,d=void 0===b?{}:b,e.next=3,Object(nt["readThreadList"])({params:Object(We["a"])({filter:{search:s,sort:i},scope:a,perPage:p,page:l},d)});case 3:if(h=e.sent,0!==h.code||!h.data){e.next=9;break}return this.threads&&h.data.pageData&&1!==l||this.setThreads({pageData:[]}),this.setThreads(h.data),e.abrupt("return",h.data);case 9:return this.threadsError={isError:!0,errorText:(null===h||void 0===h?void 0:h.msg)||"\u52a0\u8f7d\u5931\u8d25"},e.abrupt("return",Promise.reject((null===h||void 0===h?void 0:h.msg)||"\u52a0\u8f7d\u5931\u8d25"));case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"postFollow",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(nt["createFollow"])({data:{toUserId:t}});case 2:if(r=e.sent,0!==r.code||!r.data){e.next=5;break}return e.abrupt("return",r.data);case 5:return e.abrupt("return",Promise.reject((null===r||void 0===r?void 0:r.msg)||"\u63a5\u53e3\u8bf7\u6c42\u5931\u8d25"));case 6:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"cancelFollow",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r,a,o;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.id,a=t.type,e.next=3,Object(nt["deleteFollow"])({data:{id:r,type:a}});case 3:if(o=e.sent,0!==o.code||!o.data){e.next=6;break}return e.abrupt("return",o.data);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateActiveUserInfo",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=this.findAssignUser(e);null===a||void 0===a||a.forEach((function(e){t.updateInfo(e,r)}))}},{key:"updateInfo",value:function(e,t){if(e){var r=e.index,a=e.data,o=e.store,i=t.isFollow;jt["a"].isUndefined(i)||jt["a"].isNull(i)||(a.isFollow=i);var n=t.isMutual;if(jt["a"].isUndefined(n)||jt["a"].isNull(n)||(a.isMutualFollow=n),null!==o&&void 0!==o&&o.pageData){var s=o.pageData.slice();s[r]=a,o.pageData=s}}}},{key:"findAssignUser",value:function(e){var t=this,r=[];if(this.indexUsers){var a=this.indexUsers.pageData,o=void 0===a?[]:a;o.forEach((function(a,o){a.userId===e&&r.push({index:o,data:a,store:t.indexUsers})}))}if(this.users){var i=this.users.pageData,n=void 0===i?[]:i;n.forEach((function(a,o){a.userId===e&&r.push({index:o,data:a,store:t.users})}))}return r}}]),r}(yc),Object(ot["a"])(_o.prototype,"setIndexTopics",[it["action"]],Object.getOwnPropertyDescriptor(_o.prototype,"setIndexTopics"),_o.prototype),Object(ot["a"])(_o.prototype,"setIndexUsers",[it["action"]],Object.getOwnPropertyDescriptor(_o.prototype,"setIndexUsers"),_o.prototype),Object(ot["a"])(_o.prototype,"setIndexThreads",[it["action"]],Object.getOwnPropertyDescriptor(_o.prototype,"setIndexThreads"),_o.prototype),Object(ot["a"])(_o.prototype,"setTopics",[it["action"]],Object.getOwnPropertyDescriptor(_o.prototype,"setTopics"),_o.prototype),Object(ot["a"])(_o.prototype,"setUsers",[it["action"]],Object.getOwnPropertyDescriptor(_o.prototype,"setUsers"),_o.prototype),Object(ot["a"])(_o.prototype,"setThreads",[it["action"]],Object.getOwnPropertyDescriptor(_o.prototype,"setThreads"),_o.prototype),Object(ot["a"])(_o.prototype,"setSearchTopics",[it["action"]],Object.getOwnPropertyDescriptor(_o.prototype,"setSearchTopics"),_o.prototype),Object(ot["a"])(_o.prototype,"setSearchUsers",[it["action"]],Object.getOwnPropertyDescriptor(_o.prototype,"setSearchUsers"),_o.prototype),Object(ot["a"])(_o.prototype,"setSearchThreads",[it["action"]],Object.getOwnPropertyDescriptor(_o.prototype,"setSearchThreads"),_o.prototype),Object(ot["a"])(_o.prototype,"dataIndexStatus",[it["computed"]],Object.getOwnPropertyDescriptor(_o.prototype,"dataIndexStatus"),_o.prototype),Object(ot["a"])(_o.prototype,"dataSearchStatus",[it["computed"]],Object.getOwnPropertyDescriptor(_o.prototype,"dataSearchStatus"),_o.prototype),Object(ot["a"])(_o.prototype,"resetIndexData",[it["action"]],Object.getOwnPropertyDescriptor(_o.prototype,"resetIndexData"),_o.prototype),Object(ot["a"])(_o.prototype,"resetSearchData",[it["action"]],Object.getOwnPropertyDescriptor(_o.prototype,"resetSearchData"),_o.prototype),Object(ot["a"])(_o.prototype,"resetResultData",[it["action"]],Object.getOwnPropertyDescriptor(_o.prototype,"resetResultData"),_o.prototype),Object(ot["a"])(_o.prototype,"resetTopicsError",[it["action"]],Object.getOwnPropertyDescriptor(_o.prototype,"resetTopicsError"),_o.prototype),Object(ot["a"])(_o.prototype,"resetUsersError",[it["action"]],Object.getOwnPropertyDescriptor(_o.prototype,"resetUsersError"),_o.prototype),Object(ot["a"])(_o.prototype,"resetThreadsError",[it["action"]],Object.getOwnPropertyDescriptor(_o.prototype,"resetThreadsError"),_o.prototype),Object(ot["a"])(_o.prototype,"getSearchData",[it["action"]],Object.getOwnPropertyDescriptor(_o.prototype,"getSearchData"),_o.prototype),Object(ot["a"])(_o.prototype,"getTopicsList",[it["action"]],Object.getOwnPropertyDescriptor(_o.prototype,"getTopicsList"),_o.prototype),Object(ot["a"])(_o.prototype,"getUsersList",[Fo],Object.getOwnPropertyDescriptor(_o.prototype,"getUsersList"),_o.prototype),Object(ot["a"])(_o.prototype,"getThreadList",[it["action"]],Object.getOwnPropertyDescriptor(_o.prototype,"getThreadList"),_o.prototype),Object(ot["a"])(_o.prototype,"postFollow",[it["action"]],Object.getOwnPropertyDescriptor(_o.prototype,"postFollow"),_o.prototype),Object(ot["a"])(_o.prototype,"cancelFollow",[it["action"]],Object.getOwnPropertyDescriptor(_o.prototype,"cancelFollow"),_o.prototype),Object(ot["a"])(_o.prototype,"updateActiveUserInfo",[it["action"]],Object.getOwnPropertyDescriptor(_o.prototype,"updateActiveUserInfo"),_o.prototype),Object(ot["a"])(_o.prototype,"updateInfo",[it["action"]],Object.getOwnPropertyDescriptor(_o.prototype,"updateInfo"),_o.prototype),_o),gc=fc,jc=(r(422),r(42)),mc=function(){},vc=(Vo=function(){function e(){var t=this;Object(Qe["a"])(this,e),Object(Xe["a"])(this,"onSuccess",mc),Object(Xe["a"])(this,"successCallback",(function(){t.onSuccess(t.orderInfo)})),Object(Xe["a"])(this,"onFailed",mc),Object(Xe["a"])(this,"failedCallback",(function(){t.onFailed(t.orderInfo)})),Object(Xe["a"])(this,"onCompleted",mc),Object(Xe["a"])(this,"completedCallback",(function(){t.onCompleted(t.orderInfo)})),Object(Xe["a"])(this,"onOrderCreated",mc),Object(Xe["a"])(this,"qrCodeCheckTimer",null),Object(at["a"])(this,"options",Bo,this),Object(at["a"])(this,"visible",Wo,this),Object(at["a"])(this,"orderInfo",qo,this),Object(at["a"])(this,"isAnonymous",Yo,this),Object(at["a"])(this,"timer",Ko,this),Object(at["a"])(this,"step",Qo,this),Object(at["a"])(this,"payWay",Ho,this),Object(at["a"])(this,"payResult",Go,this),Object(at["a"])(this,"password",Jo,this),Object(at["a"])(this,"h5RedirectLink",$o,this),Object(at["a"])(this,"h5SureDialogVisible",Xo,this),Object(at["a"])(this,"h5IOSPaidFlag",Zo,this),Object(at["a"])(this,"walletInfo",ei,this),Object(at["a"])(this,"wechatQRCode",ti,this),Object(at["a"])(this,"qrCodeTimeout",ri,this),Object(at["a"])(this,"oldPayPwd",ai,this),Object(at["a"])(this,"payPwdResetToken",oi,this),Object(at["a"])(this,"newPayPwd",ii,this),Object(at["a"])(this,"newPayPwdRepeat",ni,this),Object(Xe["a"])(this,"resErrorFactory",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object(st["a"])(e,"code");if(t[r]&&t(e),0!==r)throw{Code:e.code,Message:e.msg}})),Object(Xe["a"])(this,"errorHandler",function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log(t),!t.Code){e.next=3;break}throw{Code:t.Code,Message:t.Message};case 3:throw Object(We["a"])(Object(We["a"])({},jc["d"].NETWORK_ERROR),{},{error:t});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(at["a"])(this,"checkQrCodeTimeout",si,this),Object(at["a"])(this,"createOrder",ci,this),Object(at["a"])(this,"getWalletInfo",pi,this),Object(at["a"])(this,"walletPayEnsure",ui,this),Object(at["a"])(this,"walletPayOrder",li,this),Object(at["a"])(this,"wechatPayOrder",bi,this),Object(at["a"])(this,"wechatPayOrderQRCode",di,this),Object(at["a"])(this,"clearOrderStatusTimer",hi,this),Object(at["a"])(this,"getOrderDetail",Oi,this),Object(at["a"])(this,"setPayPassword",yi,this),Object(at["a"])(this,"getPayPwdResetToken",fi,this),Object(at["a"])(this,"resetPayPwd",gi,this),Object(at["a"])(this,"forgetPayPwd",ji,this),Object(at["a"])(this,"show",mi,this),Object(at["a"])(this,"hide",vi,this),Object(at["a"])(this,"clearPayPassword",wi,this),Object(at["a"])(this,"clear",ki,this)}return Object(He["a"])(e,[{key:"walletStatus",get:function(){return null}},{key:"walletAvaAmount",get:function(){return Object(st["a"])(this.walletInfo,"availableAmount")}},{key:"orderSn",get:function(){return Object(st["a"])(this.orderInfo,"orderSn")}},{key:"sendSmsVerifyCode",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r,a,o,i;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.mobile,a=t.captchaTicket,o=t.captchaRandStr,e.next=3,Object(nt["smsSend"])({data:{mobile:r,type:"reset_pay_pwd",captchaTicket:a,captchaRandStr:o}});case 3:if(i=e.sent,0!==i.code){e.next=6;break}return e.abrupt("return",i.data);case 6:throw{Code:i.code,Message:i.msg};case 7:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),Bo=Object(ot["a"])(Vo.prototype,"options",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Wo=Object(ot["a"])(Vo.prototype,"visible",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),qo=Object(ot["a"])(Vo.prototype,"orderInfo",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Yo=Object(ot["a"])(Vo.prototype,"isAnonymous",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ko=Object(ot["a"])(Vo.prototype,"timer",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Qo=Object(ot["a"])(Vo.prototype,"step",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return jc["f"].SURE}}),Ho=Object(ot["a"])(Vo.prototype,"payWay",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Go=Object(ot["a"])(Vo.prototype,"payResult",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Jo=Object(ot["a"])(Vo.prototype,"password",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$o=Object(ot["a"])(Vo.prototype,"h5RedirectLink",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Xo=Object(ot["a"])(Vo.prototype,"h5SureDialogVisible",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Zo=Object(ot["a"])(Vo.prototype,"h5IOSPaidFlag",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ei=Object(ot["a"])(Vo.prototype,"walletInfo",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ti=Object(ot["a"])(Vo.prototype,"wechatQRCode",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ri=Object(ot["a"])(Vo.prototype,"qrCodeTimeout",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ai=Object(ot["a"])(Vo.prototype,"oldPayPwd",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),oi=Object(ot["a"])(Vo.prototype,"payPwdResetToken",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ii=Object(ot["a"])(Vo.prototype,"newPayPwd",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ni=Object(ot["a"])(Vo.prototype,"newPayPwdRepeat",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Object(ot["a"])(Vo.prototype,"walletStatus",[it["computed"]],Object.getOwnPropertyDescriptor(Vo.prototype,"walletStatus"),Vo.prototype),Object(ot["a"])(Vo.prototype,"walletAvaAmount",[it["computed"]],Object.getOwnPropertyDescriptor(Vo.prototype,"walletAvaAmount"),Vo.prototype),Object(ot["a"])(Vo.prototype,"orderSn",[it["computed"]],Object.getOwnPropertyDescriptor(Vo.prototype,"orderSn"),Vo.prototype),si=Object(ot["a"])(Vo.prototype,"checkQrCodeTimeout",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){clearTimeout(e.qrCodeCheckTimer),e.qrCodeCheckTimer=setTimeout((function(){clearTimeout(e.timer),e.qrCodeTimeout=!0}),3e5)}}}),ci=Object(ot["a"])(Vo.prototype,"createOrder",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(Ke["a"])(Object(Ye["a"])().mark((function t(){var r,a;return Object(Ye["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.h5IOSPaidFlag=!1,Lt["a"].set("H5_IOS_PAID_FLAG","false"),r=Object(We["a"])(Object(We["a"])({},e.options),{},{isAnonymous:e.isAnonymous}),t.next=6,Object(nt["createOrders"])({data:r});case 6:if(a=t.sent,0!==Object(st["a"])(a,"code")){t.next=14;break}return e.orderInfo=Object(st["a"])(a,"data",{}),Lt["a"].set("PAY_ORDER_INFO",JSON.stringify(e.orderInfo)),Lt["a"].set("PAY_ORDER_OPTIONS",JSON.stringify(e.options)),e.onOrderCreated&&e.onOrderCreated(e.orderInfo),setTimeout((function(){e.step=jc["f"].PAYWAY}),200),t.abrupt("return",a);case 14:e.resErrorFactory(a),t.next=22;break;case 17:if(t.prev=17,t.t0=t["catch"](0),!t.t0.Code){t.next=21;break}throw t.t0;case 21:throw Object(We["a"])(Object(We["a"])({},jc["d"].NETWORK_ERROR),{},{error:t.t0});case 22:case"end":return t.stop()}}),t,null,[[0,17]])})))}}),pi=Object(ot["a"])(Vo.prototype,"getWalletInfo",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(Ke["a"])(Object(Ye["a"])().mark((function t(r){var a;return Object(Ye["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(nt["readWalletUser"])({params:{uid:r}});case 3:if(a=t.sent,0!==Object(st["a"])(a,"code")){t.next=7;break}return e.walletInfo=Object(st["a"])(a,"data",{}),t.abrupt("return",a);case 7:e.resErrorFactory(a),t.next=15;break;case 10:if(t.prev=10,t.t0=t["catch"](0),!t.t0.Code){t.next=14;break}throw t.t0;case 14:throw Object(We["a"])(Object(We["a"])({},jc["d"].NETWORK_ERROR),{},{error:t.t0});case 15:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}}),ui=Object(ot["a"])(Vo.prototype,"walletPayEnsure",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.step=jc["f"].WALLET_PASSWORD}}}),li=Object(ot["a"])(Vo.prototype,"walletPayOrder",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(Ke["a"])(Object(Ye["a"])().mark((function t(){var r;return Object(Ye["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(nt["createPayOrder"])({data:{orderSn:e.orderSn,paymentType:jc["e"].WALLET,payPassword:e.password}});case 3:if(r=t.sent,e.resErrorFactory(r),"success"!==Object(st["a"])(r,"data.walletPayResult.result")){t.next=9;break}return e.successCallback(),e.completedCallback(),t.abrupt("return",r);case 9:t.next=16;break;case 11:if(t.prev=11,t.t0=t["catch"](0),!t.t0.Code){t.next=15;break}throw t.t0;case 15:throw Object(We["a"])(Object(We["a"])({},jc["d"].NETWORK_ERROR),{},{error:t.t0});case 16:case"end":return t.stop()}}),t,null,[[0,11]])})))}}),bi=Object(ot["a"])(Vo.prototype,"wechatPayOrder",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(Ke["a"])(Object(Ye["a"])().mark((function t(r){var a,o,i,n,s,c;return Object(Ye["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=r.listenWXJsBridgeAndExecCallback,o=r.onBridgeReady,i=r.wxValidator,n=void 0===i?mc:i,s=r.mode,t.prev=1,n(),t.next=5,Object(nt["createPayOrder"])({data:{orderSn:e.orderSn,paymentType:s}});case 5:if(c=t.sent,e.resErrorFactory(c),0!==c.code){t.next=13;break}if(clearInterval(e.timer),s!==jc["e"].WX_H5){t.next=12;break}return a((function(){e.h5RedirectLink=Object(st["a"])(c,"data.wechatPayResult.wechatH5Link"),o(Object(st["a"])(c,"data.wechatPayResult.wechatH5Link"))})),t.abrupt("return");case 12:a((function(){o(Object(st["a"])(c,"data.wechatPayResult.wechatJs")),e.timer=setInterval((function(){e.getOrderDetail()}),3e3)}));case 13:t.next=20;break;case 15:if(t.prev=15,t.t0=t["catch"](1),!t.t0.Code){t.next=19;break}throw t.t0;case 19:throw Object(We["a"])(Object(We["a"])({},jc["d"].NETWORK_ERROR),{},{error:t.t0});case 20:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e){return t.apply(this,arguments)}}()}}),di=Object(ot["a"])(Vo.prototype,"wechatPayOrderQRCode",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(Ke["a"])(Object(Ye["a"])().mark((function t(){var r;return Object(Ye["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(nt["createPayOrder"])({data:{orderSn:e.orderSn,paymentType:jc["e"].WX_QRCODE}});case 3:r=t.sent,e.resErrorFactory(r),e.wechatQRCode=Object(st["a"])(r,"data.wechatPayResult.wechatQrcode"),e.qrCodeTimeout=!1,clearInterval(e.timer),e.checkQrCodeTimeout(),e.timer=setInterval(Object(Ke["a"])(Object(Ye["a"])().mark((function t(){return Object(Ye["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getOrderDetail();case 2:case"end":return t.stop()}}),t)}))),3e3),t.next=17;break;case 12:if(t.prev=12,t.t0=t["catch"](0),!t.t0.Code){t.next=16;break}throw t.t0;case 16:throw Object(We["a"])(Object(We["a"])({},jc["d"].NETWORK_ERROR),{},{error:t.t0});case 17:case"end":return t.stop()}}),t,null,[[0,12]])})))}}),hi=Object(ot["a"])(Vo.prototype,"clearOrderStatusTimer",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){clearInterval(e.timer),clearInterval(e.qrCodeCheckTimer)}}}),Oi=Object(ot["a"])(Vo.prototype,"getOrderDetail",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(Ke["a"])(Object(Ye["a"])().mark((function t(){var r,a;return Object(Ye["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(nt["readOrderDetail"])({params:{orderSn:e.orderSn}});case 3:if(r=t.sent,e.resErrorFactory(r),a=Object(st["a"])(r,"data.status"),a!==jc["a"].PENDING_PAY){t.next=8;break}return t.abrupt("return");case 8:clearInterval(e.timer),e.timer=null,a===jc["a"].PAID&&(clearTimeout(e.qrCodeCheckTimer),e.qrCodeTimeout=!0,e.successCallback(),e.completedCallback(),setTimeout((function(){e.clear()}),300)),a===jc["a"].OUT_DATE_PAY&&(clearTimeout(e.qrCodeCheckTimer),e.qrCodeTimeout=!0,e.failedCallback(),e.completedCallback(),setTimeout((function(){e.clear()}),300)),a===jc["a"].FAIL_PAY&&(clearTimeout(e.qrCodeCheckTimer),e.qrCodeTimeout=!0,e.failedCallback(),e.completedCallback(),setTimeout((function(){e.clear()}),300)),t.next=20;break;case 15:if(t.prev=15,t.t0=t["catch"](0),!t.t0.Code){t.next=19;break}throw t.t0;case 19:throw Object(We["a"])(Object(We["a"])({},jc["d"].NETWORK_ERROR),{},{error:t.t0});case 20:case"end":return t.stop()}}),t,null,[[0,15]])})))}}),yi=Object(ot["a"])(Vo.prototype,"setPayPassword",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(Ke["a"])(Object(Ye["a"])().mark((function t(){var r;return Object(Ye["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(nt["updateUsersUpdate"])({data:{payPassword:e.password,payPasswordConfirmation:e.password}});case 3:r=t.sent,e.resErrorFactory(r),t.next=13;break;case 7:if(t.prev=7,t.t0=t["catch"](0),console.log(t.t0),!t.t0.Code){t.next=12;break}throw t.t0;case 12:throw Object(We["a"])(Object(We["a"])({},jc["d"].NETWORK_ERROR),{},{error:t.t0});case 13:case"end":return t.stop()}}),t,null,[[0,7]])})))}}),fi=Object(ot["a"])(Vo.prototype,"getPayPwdResetToken",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(Ke["a"])(Object(Ye["a"])().mark((function t(){var r;return Object(Ye["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.oldPayPwd){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,Object(nt["readResetPayPwdToken"])({data:{payPassword:e.oldPayPwd}});case 4:if(r=t.sent,0!==r.code){t.next=8;break}return e.payPwdResetToken=Object(st["a"])(r,"data.sessionId"),t.abrupt("return",e.payPwdResetToken);case 8:throw{Code:r.code,Msg:r.msg};case 9:case"end":return t.stop()}}),t)})))}}),gi=Object(ot["a"])(Vo.prototype,"resetPayPwd",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(Ke["a"])(Object(Ye["a"])().mark((function t(){var r;return Object(Ye["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(nt["updateUsersUpdate"])({data:{payPassword:e.newPayPwd,payPasswordConfirmation:e.newPayPwdRepeat,payPasswordToken:e.payPwdResetToken}});case 2:if(r=t.sent,0!==r.code){t.next=5;break}return t.abrupt("return",r.data);case 5:throw{Code:r.code,Msg:r.msg};case 6:case"end":return t.stop()}}),t)})))}}),Object(ot["a"])(Vo.prototype,"sendSmsVerifyCode",[it["action"]],Object.getOwnPropertyDescriptor(Vo.prototype,"sendSmsVerifyCode"),Vo.prototype),ji=Object(ot["a"])(Vo.prototype,"forgetPayPwd",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r,a,o,i,n;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.mobile,a=t.code,o=t.payPassword,i=t.payPasswordConfirmation,e.next=3,Object(nt["updatePayPwd"])({data:{mobile:r,code:a,payPassword:o,payPasswordConfirmation:i}});case 3:if(n=e.sent,0!==n.code){e.next=6;break}return e.abrupt("return",n.data);case 6:throw{Code:n.code,Msg:n.msg};case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),mi=Object(ot["a"])(Vo.prototype,"show",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.visible=!0}}}),vi=Object(ot["a"])(Vo.prototype,"hide",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.visible=!1}}}),wi=Object(ot["a"])(Vo.prototype,"clearPayPassword",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.password=null,e.oldPayPwd=null,e.newPayPwd=null,e.newPayPwdRepeat=null}}}),ki=Object(ot["a"])(Vo.prototype,"clear",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){clearInterval(e.timer),clearTimeout(e.qrCodeCheckTimer),Lt["a"].set("PAY_ORDER_INFO",""),Lt["a"].set("PAY_ORDER_OPTIONS",""),e.options={},e.visible=!1,e.orderInfo=null,e.timer=null,e.qrCodeCheckTimer=null,e.step=jc["f"].SURE,e.payWay=null,e.payResult=null,e.password=null,e.walletInfo=null,e.wechatQRCode=null,e.qrCodeTimeout=!1,e.h5RedirectLink=null}}}),Vo),wc=vc,kc=r(425),Pc=(Pi=function(){function e(){Object(Qe["a"])(this,e),Object(at["a"])(this,"isPopup",Di,this),Object(at["a"])(this,"isNoMore",Ti,this),Object(at["a"])(this,"usersPageData",xi,this),Object(at["a"])(this,"userPage",Ci,this),Object(at["a"])(this,"isLoading",Ii,this),Object(at["a"])(this,"userTotal",Li,this),Object(at["a"])(this,"threadsPageData",Si,this),Object(at["a"])(this,"threadTotal",Ui,this),Object(at["a"])(this,"updataTime",Ei,this),Object(at["a"])(this,"myGroup",Ri,this),Object(at["a"])(this,"myPermissons",zi,this),Object(at["a"])(this,"otherPermissions",Mi,this),Object(at["a"])(this,"introduceVisible",Ai,this)}return Object(He["a"])(e,[{key:"setIntroduceVisible",value:function(e){this.introduceVisible=e}},{key:"setUserPage",value:function(e){this.userPage=e}},{key:"setIsPopup",value:function(e){this.isPopup=e}},{key:"setIsLoading",value:function(e){this.isLoading=e}},{key:"setOtherPermissions",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=5;break}this.otherPermissions=Object(st["a"])(t,"other",{}),e.next=9;break;case 5:return e.next=7,Object(nt["getForum"])();case 7:r=e.sent,this.otherPermissions=Object(st["a"])(r,"data.other",{});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setGroupPermissionList",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){var t;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(nt["groupPermissionList"])();case 3:t=e.sent,this.myGroup=Object(st["a"])(t,"data.myGroup",{}),this.myPermissons=Object(st["a"])(t,"data.myPermissons",{}),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"setUsersPageData",value:function(e){var t=Object(st["a"])(e,"pageData",[]),r=Object(st["a"])(e,"totalCount",0),a=Object(st["a"])(e,"totalPage",0),o=Object(st["a"])(e,"currentPage",0);this.usersPageData=t,this.userTotal=r,this.userPage=o,this.isNoMore=o>=a}},{key:"setThreadsPageData",value:function(e){var t=Object(st["a"])(e,"pageData",[]),r=Object(st["a"])(t[0],"createdAt",null),a=Object(st["a"])(e,"totalCount",0);this.threadsPageData=t,this.threadTotal=a,this.updataTime=r}}]),e}(),Di=Object(ot["a"])(Pi.prototype,"isPopup",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ti=Object(ot["a"])(Pi.prototype,"isNoMore",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),xi=Object(ot["a"])(Pi.prototype,"usersPageData",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ci=Object(ot["a"])(Pi.prototype,"userPage",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Ii=Object(ot["a"])(Pi.prototype,"isLoading",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Li=Object(ot["a"])(Pi.prototype,"userTotal",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Si=Object(ot["a"])(Pi.prototype,"threadsPageData",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ui=Object(ot["a"])(Pi.prototype,"threadTotal",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ei=Object(ot["a"])(Pi.prototype,"updataTime",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ri=Object(ot["a"])(Pi.prototype,"myGroup",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),zi=Object(ot["a"])(Pi.prototype,"myPermissons",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Mi=Object(ot["a"])(Pi.prototype,"otherPermissions",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ai=Object(ot["a"])(Pi.prototype,"introduceVisible",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(ot["a"])(Pi.prototype,"setIntroduceVisible",[it["action"]],Object.getOwnPropertyDescriptor(Pi.prototype,"setIntroduceVisible"),Pi.prototype),Object(ot["a"])(Pi.prototype,"setUserPage",[it["action"]],Object.getOwnPropertyDescriptor(Pi.prototype,"setUserPage"),Pi.prototype),Object(ot["a"])(Pi.prototype,"setIsPopup",[it["action"]],Object.getOwnPropertyDescriptor(Pi.prototype,"setIsPopup"),Pi.prototype),Object(ot["a"])(Pi.prototype,"setIsLoading",[it["action"]],Object.getOwnPropertyDescriptor(Pi.prototype,"setIsLoading"),Pi.prototype),Object(ot["a"])(Pi.prototype,"setOtherPermissions",[it["action"]],Object.getOwnPropertyDescriptor(Pi.prototype,"setOtherPermissions"),Pi.prototype),Object(ot["a"])(Pi.prototype,"setGroupPermissionList",[it["action"]],Object.getOwnPropertyDescriptor(Pi.prototype,"setGroupPermissionList"),Pi.prototype),Object(ot["a"])(Pi.prototype,"setUsersPageData",[it["action"]],Object.getOwnPropertyDescriptor(Pi.prototype,"setUsersPageData"),Pi.prototype),Object(ot["a"])(Pi.prototype,"setThreadsPageData",[it["action"]],Object.getOwnPropertyDescriptor(Pi.prototype,"setThreadsPageData"),Pi.prototype),Pi),Dc=Pc,Tc=(Ni=function(){function e(){Object(Qe["a"])(this,e),Object(Xe["a"])(this,"initList",{list:[],currentPage:0,totalPage:1,totalCount:0}),Object(at["a"])(this,"totalUnread",Fi,this),Object(at["a"])(this,"dialogMessageUnread",_i,this),Object(at["a"])(this,"threadUnread",Vi,this),Object(at["a"])(this,"financialUnread",Bi,this),Object(at["a"])(this,"accountUnread",Wi,this),Object(at["a"])(this,"atUnread",qi,this),Object(at["a"])(this,"replyUnread",Yi,this),Object(at["a"])(this,"likeUnread",Ki,this),Object(at["a"])(this,"dialogList",Qi,this),Object(at["a"])(this,"dialogMsgList",Hi,this),Object(at["a"])(this,"financialMsgList",Gi,this),Object(at["a"])(this,"accountMsgList",Ji,this),Object(at["a"])(this,"atMsgList",$i,this),Object(at["a"])(this,"replyMsgList",Xi,this),Object(at["a"])(this,"likeMsgList",Zi,this),Object(at["a"])(this,"threadMsgList",en,this)}return Object(He["a"])(e,[{key:"dialogMsgListLength",get:function(){return this.dialogMsgList.totalCount}}]),e}(),Fi=Object(ot["a"])(Ni.prototype,"totalUnread",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_i=Object(ot["a"])(Ni.prototype,"dialogMessageUnread",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Vi=Object(ot["a"])(Ni.prototype,"threadUnread",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Bi=Object(ot["a"])(Ni.prototype,"financialUnread",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Wi=Object(ot["a"])(Ni.prototype,"accountUnread",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),qi=Object(ot["a"])(Ni.prototype,"atUnread",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Yi=Object(ot["a"])(Ni.prototype,"replyUnread",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ki=Object(ot["a"])(Ni.prototype,"likeUnread",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Qi=Object(ot["a"])(Ni.prototype,"dialogList",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.initList}}),Hi=Object(ot["a"])(Ni.prototype,"dialogMsgList",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.initList}}),Object(ot["a"])(Ni.prototype,"dialogMsgListLength",[it["computed"]],Object.getOwnPropertyDescriptor(Ni.prototype,"dialogMsgListLength"),Ni.prototype),Gi=Object(ot["a"])(Ni.prototype,"financialMsgList",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.initList}}),Ji=Object(ot["a"])(Ni.prototype,"accountMsgList",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.initList}}),$i=Object(ot["a"])(Ni.prototype,"atMsgList",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.initList}}),Xi=Object(ot["a"])(Ni.prototype,"replyMsgList",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.initList}}),Zi=Object(ot["a"])(Ni.prototype,"likeMsgList",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.initList}}),en=Object(ot["a"])(Ni.prototype,"threadMsgList",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.initList}}),Ni),xc=Tc,Cc=(tn=it["action"].bound,rn=it["action"].bound,an=it["action"].bound,on=it["action"].bound,nn=it["action"].bound,sn=it["action"].bound,cn=it["action"].bound,pn=it["action"].bound,un=it["action"].bound,ln=it["action"].bound,bn=it["action"].bound,dn=it["action"].bound,hn=it["action"].bound,On=it["action"].bound,yn=it["action"].bound,fn=it["action"].bound,gn=function(e){Object(Je["a"])(r,e);var t=Object($e["a"])(r);function r(){var e;Object(Qe["a"])(this,r);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),Object(Xe["a"])(Object(Ge["a"])(e),"perPage",{perPage:10}),e}return Object(He["a"])(r,[{key:"readDialogIdByUsername",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(nt["readDialogIdByUsername"])({params:{userId:t}}));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateDialog",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(nt["updateDialog"])({data:{dialogId:parseInt(t)}});case 2:this.readUnreadCount();case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"readUnreadCount",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){var t,r,a,o,i,n,s,c,p,u,l,b,d,h,O,y,f,g,j,m,v,w,k,P,D,T,x,C;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(nt["readUnreadCount"])();case 2:t=e.sent,r=t.code,a=t.data,0===r&&(o=a.unreadNotifications,i=void 0===o?0:o,n=a.typeUnreadNotifications,s=a.dialogNotifications,c=void 0===s?0:s,p=n.threadrewardedexpired,u=void 0===p?0:p,l=n.receiveredpacket,b=void 0===l?0:l,d=n.related,h=void 0===d?0:d,O=n.replied,y=void 0===O?0:O,f=n.system,g=void 0===f?0:f,j=n.withdrawal,m=void 0===j?0:j,v=n.liked,w=void 0===v?0:v,k=n.rewarded,P=void 0===k?0:k,D=n.threadrewarded,T=void 0===D?0:D,x=n.questioned,C=void 0===x?0:x,this.totalUnread=i-m-C+c,this.threadUnread=h+y+w,this.financialUnread=b+P+T+u,this.accountUnread=g,this.atUnread=h,this.replyUnread=y,this.likeUnread=w,this.dialogMessageUnread=c);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"assemblyParams",value:function(e,t){return{params:Object(We["a"])(Object(We["a"])({},this.perPage),{},{page:e,filter:{type:t}})}}},{key:"setMsgList",value:function(e,t,r){var a=r.code,o=r.data,i=void 0===o?{}:o;if(0===a){"dialogMsgList"!==t&&this.readUnreadCount();var n=i.pageData,s=void 0===n?[]:n,c=function(t){var r=t.totalPage,a=void 0===r?0:r,o=t.totalCount,i=void 0===o?0:o;return{list:s,totalPage:a,totalCount:i,currentPage:e}}(i);this[t]=1===e?c:Object(We["a"])(Object(We["a"])({},c),{},{list:this[t].list.concat(s)})}}},{key:"readAccountMsgList",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){var t,r,a=arguments;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:1,e.next=3,Object(nt["readMsgList"])(this.assemblyParams(t,"system"));case 3:r=e.sent,this.setMsgList(t,"accountMsgList",r);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"readAtMsgList",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){var t,r,a=arguments;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:1,e.next=3,Object(nt["readMsgList"])(this.assemblyParams(t,"related"));case 3:r=e.sent,this.setMsgList(t,"atMsgList",r);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"readReplyMsgList",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){var t,r,a=arguments;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:1,e.next=3,Object(nt["readMsgList"])(this.assemblyParams(t,"replied"));case 3:r=e.sent,this.setMsgList(t,"replyMsgList",r);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"readLikeMsgList",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){var t,r,a=arguments;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:1,e.next=3,Object(nt["readMsgList"])(this.assemblyParams(t,"liked"));case 3:r=e.sent,this.setMsgList(t,"likeMsgList",r);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"readFinancialMsgList",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){var t,r,a=arguments;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:1,e.next=3,Object(nt["readMsgList"])(this.assemblyParams(t,"rewarded,threadrewarded,receiveredpacket,threadrewardedexpired"));case 3:r=e.sent,this.setMsgList(t,"financialMsgList",r);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"readThreadMsgList",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){var t,r,a=arguments;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:1,e.next=3,Object(nt["readMsgList"])(this.assemblyParams(t,"related,replied,liked"));case 3:r=e.sent,this.setMsgList(t,"threadMsgList",r);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"readDialogList",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){var t,r,a=arguments;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:1,e.next=3,Object(nt["readDialogList"])({params:{perPage:20,page:t}});case 3:r=e.sent,this.setMsgList(t,"dialogList",r);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"readDialogMsgList",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r,a=this,o=arguments;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:1,e.abrupt("return",new Promise(function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(o){var i,n,s,c,p,u,l,b;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(nt["readDialogMsgList"])({params:{perPage:200,page:r,filter:{dialogId:parseInt(t)}}});case 2:i=e.sent,n=i.code,s=i.data,c=void 0===s?{}:s,0===n&&(p=c.pageData,u=void 0===p?[]:p,l=r,b=function(e){var t=e.totalPage,r=void 0===t?0:t,a=e.totalCount,o=void 0===a?0:a;return{list:u,totalPage:r,totalCount:o,currentPage:l}}(c),a.dialogMsgList.totalCount&&b.list.forEach((function(e){a.dialogMsgList.list.forEach((function(t){e.id!==t.id||e.dialogId!==t.dialogId||t.isImageLoading||(e.imageUrl=t.imageUrl),e.userId===t.userId&&(e.user.avatar=t.user.avatar)}))})),a.dialogMsgList=b),o();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"createDialog",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(nt["createDialog"])(t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"createDialogMsg",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(nt["createDialogMsg"])(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteDialog",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r,a;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(nt["deleteDialog"])({id:t});case 2:r=e.sent,a=r.code,0===a&&this.deleteListItem("dialogList",t);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteMsg",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t,r){var a,o;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(nt["deleteMsg"])({id:t});case 2:a=e.sent,o=a.code,0===o&&this.deleteListItem(r,t);case 5:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"clearMessage",value:function(){this.dialogMsgList=this.initList}},{key:"deleteListItem",value:function(e,t){var r,a=this;this.readUnreadCount();var o=this[e],i=(r=[]).concat.apply(r,Object(ht["a"])(o.list));try{i.forEach((function(r,n){if(r.id===t)throw i.splice(n,1),a[e]=Object(We["a"])(Object(We["a"])({},o),{},{list:i,totalCount:o.totalCount-1}),"break"}))}catch(e){}}}]),r}(xc),Object(ot["a"])(gn.prototype,"readDialogIdByUsername",[tn],Object.getOwnPropertyDescriptor(gn.prototype,"readDialogIdByUsername"),gn.prototype),Object(ot["a"])(gn.prototype,"updateDialog",[rn],Object.getOwnPropertyDescriptor(gn.prototype,"updateDialog"),gn.prototype),Object(ot["a"])(gn.prototype,"readUnreadCount",[an],Object.getOwnPropertyDescriptor(gn.prototype,"readUnreadCount"),gn.prototype),Object(ot["a"])(gn.prototype,"setMsgList",[it["action"]],Object.getOwnPropertyDescriptor(gn.prototype,"setMsgList"),gn.prototype),Object(ot["a"])(gn.prototype,"readAccountMsgList",[on],Object.getOwnPropertyDescriptor(gn.prototype,"readAccountMsgList"),gn.prototype),Object(ot["a"])(gn.prototype,"readAtMsgList",[nn],Object.getOwnPropertyDescriptor(gn.prototype,"readAtMsgList"),gn.prototype),Object(ot["a"])(gn.prototype,"readReplyMsgList",[sn],Object.getOwnPropertyDescriptor(gn.prototype,"readReplyMsgList"),gn.prototype),Object(ot["a"])(gn.prototype,"readLikeMsgList",[cn],Object.getOwnPropertyDescriptor(gn.prototype,"readLikeMsgList"),gn.prototype),Object(ot["a"])(gn.prototype,"readFinancialMsgList",[pn],Object.getOwnPropertyDescriptor(gn.prototype,"readFinancialMsgList"),gn.prototype),Object(ot["a"])(gn.prototype,"readThreadMsgList",[un],Object.getOwnPropertyDescriptor(gn.prototype,"readThreadMsgList"),gn.prototype),Object(ot["a"])(gn.prototype,"readDialogList",[ln],Object.getOwnPropertyDescriptor(gn.prototype,"readDialogList"),gn.prototype),Object(ot["a"])(gn.prototype,"readDialogMsgList",[bn],Object.getOwnPropertyDescriptor(gn.prototype,"readDialogMsgList"),gn.prototype),Object(ot["a"])(gn.prototype,"createDialog",[dn],Object.getOwnPropertyDescriptor(gn.prototype,"createDialog"),gn.prototype),Object(ot["a"])(gn.prototype,"createDialogMsg",[hn],Object.getOwnPropertyDescriptor(gn.prototype,"createDialogMsg"),gn.prototype),Object(ot["a"])(gn.prototype,"deleteDialog",[On],Object.getOwnPropertyDescriptor(gn.prototype,"deleteDialog"),gn.prototype),Object(ot["a"])(gn.prototype,"deleteMsg",[yn],Object.getOwnPropertyDescriptor(gn.prototype,"deleteMsg"),gn.prototype),Object(ot["a"])(gn.prototype,"clearMessage",[fn],Object.getOwnPropertyDescriptor(gn.prototype,"clearMessage"),gn.prototype),gn),Ic=Cc,Lc=function(){function e(){Object(Qe["a"])(this,e),Object(Xe["a"])(this,"store",null)}return Object(He["a"])(e,[{key:"getStore",value:function(){return this.store}},{key:"setStore",value:function(e){this.store=e}}]),e}(),Sc=new Lc,Uc=Sc,Ec=(jn=Object(He["a"])((function e(){Object(Qe["a"])(this,e),Object(at["a"])(this,"home",mn,this),Object(at["a"])(this,"search",vn,this),Object(at["a"])(this,"draft",wn,this),Object(at["a"])(this,"isJumpingToTop",kn,this),Object(at["a"])(this,"playingVideoPos",Pn,this),Object(at["a"])(this,"playingVideoDom",Dn,this),Object(at["a"])(this,"playingAudioPos",Tn,this),Object(at["a"])(this,"playingAudioDom",xn,this),Object(at["a"])(this,"playingAudioWrapperId",Cn,this),Object(at["a"])(this,"videoFullScreenStatus",In,this),Object(at["a"])(this,"resultTopic",Ln,this),Object(at["a"])(this,"resultUser",Sn,this),Object(at["a"])(this,"resultPost",Un,this),Object(at["a"])(this,"h5SearchResult",En,this),Object(at["a"])(this,"topicDetail",Rn,this)})),mn=Object(ot["a"])(jn.prototype,"home",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),vn=Object(ot["a"])(jn.prototype,"search",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),wn=Object(ot["a"])(jn.prototype,"draft",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),kn=Object(ot["a"])(jn.prototype,"isJumpingToTop",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Pn=Object(ot["a"])(jn.prototype,"playingVideoPos",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),Dn=Object(ot["a"])(jn.prototype,"playingVideoDom",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Tn=Object(ot["a"])(jn.prototype,"playingAudioPos",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),xn=Object(ot["a"])(jn.prototype,"playingAudioDom",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Cn=Object(ot["a"])(jn.prototype,"playingAudioWrapperId",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),In=Object(ot["a"])(jn.prototype,"videoFullScreenStatus",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ln=Object(ot["a"])(jn.prototype,"resultTopic",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),Sn=Object(ot["a"])(jn.prototype,"resultUser",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),Un=Object(ot["a"])(jn.prototype,"resultPost",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),En=Object(ot["a"])(jn.prototype,"h5SearchResult",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),Rn=Object(ot["a"])(jn.prototype,"topicDetail",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),jn),Rc=Ec,zc=(zn=function(e){Object(Je["a"])(r,e);var t=Object($e["a"])(r);function r(e){return Object(Qe["a"])(this,r),t.call(this,e)}return Object(He["a"])(r,[{key:"setJumpingToTop",value:function(){this.home=-1,this.search=-1,this.isJumpingToTop=!0}},{key:"resetSearchResultScrolltop",value:function(){this.resultTopic=-1,this.resultUser=-1,this.resultPost=-1}},{key:"removeJumpingToTop",value:function(){this.isJumpingToTop=!1}},{key:"resetPlayersInfo",value:function(){this.playingVideoPos=-1,this.playingVideoDom="",this.playingAudioPos=-1,this.playingAudioDom=null,this.playingAudioWrapperId=""}},{key:"pauseWebPlayingVideo",value:function(e){var t,r;this.playingVideoDom&&(e&&e.id===this.playingVideoDom.id||(null===(t=this.playingVideoDom)||void 0===t||null===(r=t.querySelector("video"))||void 0===r||r.pause(),this.playingVideoDom="",this.playingVideoPos=-1))}},{key:"pauseWebPlayingAudio",value:function(e){var t;this.playingAudioDom&&(e&&this.playingAudioWrapperId===e||(null===(t=this.playingAudioDom)||void 0===t||t.pause(),this.playingAudioDom=null,this.playingAudioPos=-1,this.playingAudioWrapperId=""))}}]),r}(Rc),Object(ot["a"])(zn.prototype,"setJumpingToTop",[it["action"]],Object.getOwnPropertyDescriptor(zn.prototype,"setJumpingToTop"),zn.prototype),Object(ot["a"])(zn.prototype,"resetSearchResultScrolltop",[it["action"]],Object.getOwnPropertyDescriptor(zn.prototype,"resetSearchResultScrolltop"),zn.prototype),Object(ot["a"])(zn.prototype,"removeJumpingToTop",[it["action"]],Object.getOwnPropertyDescriptor(zn.prototype,"removeJumpingToTop"),zn.prototype),Object(ot["a"])(zn.prototype,"resetPlayersInfo",[it["action"]],Object.getOwnPropertyDescriptor(zn.prototype,"resetPlayersInfo"),zn.prototype),Object(ot["a"])(zn.prototype,"pauseWebPlayingVideo",[it["action"]],Object.getOwnPropertyDescriptor(zn.prototype,"pauseWebPlayingVideo"),zn.prototype),Object(ot["a"])(zn.prototype,"pauseWebPlayingAudio",[it["action"]],Object.getOwnPropertyDescriptor(zn.prototype,"pauseWebPlayingAudio"),zn.prototype),zn),Mc=zc,Ac=r(94),Nc=(Mn=function(){function e(){Object(Qe["a"])(this,e),Object(at["a"])(this,"tabsType",An,this),Object(at["a"])(this,"walletInfo",Nn,this),Object(at["a"])(this,"incomeDetail",Fn,this),Object(at["a"])(this,"expandDetail",_n,this),Object(at["a"])(this,"freezeDetail",Vn,this),Object(at["a"])(this,"cashDetail",Bn,this)}return Object(He["a"])(e,[{key:"walletAvaAmount",get:function(){return Object(st["a"])(this.walletInfo,"availableAmount")}}]),e}(),An=Object(ot["a"])(Mn.prototype,"tabsType",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"income"}}),Nn=Object(ot["a"])(Mn.prototype,"walletInfo",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Fn=Object(ot["a"])(Mn.prototype,"incomeDetail",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),_n=Object(ot["a"])(Mn.prototype,"expandDetail",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Vn=Object(ot["a"])(Mn.prototype,"freezeDetail",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Bn=Object(ot["a"])(Mn.prototype,"cashDetail",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Object(ot["a"])(Mn.prototype,"walletAvaAmount",[it["computed"]],Object.getOwnPropertyDescriptor(Mn.prototype,"walletAvaAmount"),Mn.prototype),Mn),Fc=Nc,_c=r(86),Vc=r.n(_c),Bc=r(209),Wc=r(423),qc=function(e,t,r){var a=r.type,o=r.date,i=r.page,n=e;n.pageData=n.pageData.map((function(e){return e.changeDesc=Yc(e.changeType)||e.changeDesc,e})),t[a]&&1!==i||(t[a]={}),t[a][o]||(t[a][o]={}),t[a][o][i]||(t[a][o][i]=Object(st["a"])(n,"pageData",[])),t=Object(We["a"])({},t)},Yc=function(e){for(var t="",r=Object.values(Bc["c"]),a=Object.values(Bc["b"]),o=[].concat(Object(ht["a"])(r),Object(ht["a"])(a)),i=0;i<o.length;i++){var n=o[i],s="".concat(n.code).split(",").map((function(e){return"".concat(e)}));if(-1!==s.indexOf("".concat(e))){t=n.text;break}}return t},Kc=(Wn=function(e){Object(Je["a"])(r,e);var t=Object($e["a"])(r);function r(){var e;Object(Qe["a"])(this,r);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),Object(at["a"])(Object(Ge["a"])(e),"setTabsType",qn,Object(Ge["a"])(e)),Object(at["a"])(Object(Ge["a"])(e),"resetInfo",Yn,Object(Ge["a"])(e)),Object(at["a"])(Object(Ge["a"])(e),"getUserWalletInfo",Kn,Object(Ge["a"])(e)),Object(at["a"])(Object(Ge["a"])(e),"getIncomeDetail",Qn,Object(Ge["a"])(e)),Object(at["a"])(Object(Ge["a"])(e),"getExpendDetail",Hn,Object(Ge["a"])(e)),Object(at["a"])(Object(Ge["a"])(e),"getFreezeDetail",Gn,Object(Ge["a"])(e)),Object(at["a"])(Object(Ge["a"])(e),"getCashLog",Jn,Object(Ge["a"])(e)),Object(at["a"])(Object(Ge["a"])(e),"createWalletCash",$n,Object(Ge["a"])(e)),Object(at["a"])(Object(Ge["a"])(e),"rechargeMoney",Xn,Object(Ge["a"])(e)),e}return Object(He["a"])(r)}(Fc),qn=Object(ot["a"])(Wn.prototype,"setTabsType",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"income";e.tabsType=t}}}),Yn=Object(ot["a"])(Wn.prototype,"resetInfo",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.incomeDetail={},e.expandDetail={},e.freezeDetail={},e.cashDetail={}}}}),Kn=Object(ot["a"])(Wn.prototype,"getUserWalletInfo",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(Ke["a"])(Object(Ye["a"])().mark((function t(){var r;return Object(Ye["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(nt["readWalletUser"])();case 2:r=t.sent,0===r.code&&(e.walletInfo=r.data);case 4:case"end":return t.stop()}}),t)})))}}),Qn=Object(ot["a"])(Wn.prototype,"getIncomeDetail",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(Ke["a"])(Object(Ye["a"])().mark((function t(r){var a,o,i,n,s,c,p,u,l,b;return Object(Ye["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=Object(Ac["a"])({},r),o=a.page,i=void 0===o?1:o,n=a.date,s=void 0===n?Vc.a.formatDate(new Date,"YYYY-MM"):n,c=a.type,p=void 0===c?"all":c,u={walletLogType:"income",page:i,perPage:22},l={startTime:Vc.a.getMonthStartAndEnd(s)[0],endTime:Vc.a.getMonthStartAndEnd(s)[1]},"all"!==p&&(l.changeType=String(p).split(",")),Object.assign(u,{filter:l}),t.next=8,Object(nt["readWalletLog"])({params:u});case 8:if(b=t.sent,0!==b.code){t.next=12;break}return qc(b.data,e.incomeDetail,{type:p,date:Vc.a.formatDate(s,"YYYY-MM"),page:i}),t.abrupt("return",b.data);case 12:throw{Code:b.code,Msg:b.Msg};case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),Hn=Object(ot["a"])(Wn.prototype,"getExpendDetail",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(Ke["a"])(Object(Ye["a"])().mark((function t(r){var a,o,i,n,s,c,p,u,l,b;return Object(Ye["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=Object(Ac["a"])({},r),o=a.page,i=void 0===o?1:o,n=a.date,s=void 0===n?Vc.a.formatDate(new Date,"YYYY-MM"):n,c=a.type,p=void 0===c?"all":c,u={walletLogType:"expend",page:i,perPage:22},l={startTime:Vc.a.getMonthStartAndEnd(s)[0],endTime:Vc.a.getMonthStartAndEnd(s)[1]},"all"!==p&&(l.changeType=String(p).split(",")),Object.assign(u,{filter:l}),t.next=8,Object(nt["readWalletLog"])({params:u});case 8:if(b=t.sent,0!==b.code){t.next=12;break}return qc(b.data,e.expandDetail,{type:p,date:Vc.a.formatDate(s,"YYYY-MM"),page:i}),t.abrupt("return",b.data);case 12:throw{Code:b.code,Msg:b.Msg};case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),Gn=Object(ot["a"])(Wn.prototype,"getFreezeDetail",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(Ke["a"])(Object(Ye["a"])().mark((function t(r){var a,o,i,n;return Object(Ye["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=Object(Ac["a"])({},r),o=a.page,i=void 0===o?1:o,t.next=4,Object(nt["readWalletLog"])({params:{walletLogType:"freeze",page:i,perPage:22}});case 4:if(n=t.sent,0!==n.code){t.next=9;break}return e.freezeDetail[i]=Object(st["a"])(n,"data.pageData",[]),e.freezeDetail=Object(We["a"])({},e.freezeDetail),t.abrupt("return",n.data);case 9:throw{Code:n.code,Msg:n.Msg};case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),Jn=Object(ot["a"])(Wn.prototype,"getCashLog",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(Ke["a"])(Object(Ye["a"])().mark((function t(r){var a,o,i,n,s,c,p,u,l,b;return Object(Ye["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=Object(Ac["a"])({},r),o=a.page,i=void 0===o?1:o,n=a.date,s=void 0===n?Vc.a.formatDate(new Date,"YYYY-MM"):n,c=a.type,p=void 0===c?"all":c,u={page:i,perPage:22},l={startTime:Vc.a.getMonthStartAndEnd(s)[0],endTime:Vc.a.getMonthStartAndEnd(s)[1]},"all"!==p&&(l.cashStatus=[p]),Object.assign(u,{filter:l}),t.next=8,Object(nt["readWalletCash"])({params:u});case 8:if(b=t.sent,0!==b.code){t.next=12;break}return qc(b.data,e.cashDetail,{type:p,date:Vc.a.formatDate(s,"YYYY-MM"),page:i}),t.abrupt("return",b.data);case 12:throw{Code:b.code,Msg:b.Msg};case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),$n=Object(ot["a"])(Wn.prototype,"createWalletCash",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r,a,o;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.money,a=t.receiveAccount,e.next=3,Object(nt["createWalletCash"])({data:{cashApplyAmount:r,receiveAccount:a}});case 3:if(o=e.sent,0!==o.code){e.next=6;break}return e.abrupt("return",o.data);case 6:throw{Code:o.code,Msg:o.msg};case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),Xn=Object(ot["a"])(Wn.prototype,"rechargeMoney",[it["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r,a,o,i;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(isNaN(Number(t))){e.next=11;break}return r={amount:Number(t),title:"\u81ea\u52a8\u5145\u503c"},e.next=4,Object(Wc["a"])(r);case 4:if(a=e.sent,o=a.success,i=a.msg,console.log("\u5145\u503cresult",o,i),!o){e.next=10;break}return e.abrupt("return",{success:!0,msg:"\u5145\u503c\u6210\u529f"});case 10:return e.abrupt("return",{success:!1,msg:i||"\u5145\u503c\u5931\u8d25"});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),Wn),Qc=Kc,Hc=(Zn=Object(He["a"])((function e(){Object(Qe["a"])(this,e),Object(at["a"])(this,"home",es,this),Object(at["a"])(this,"cache",ts,this)})),es=Object(ot["a"])(Zn.prototype,"home",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ts=Object(ot["a"])(Zn.prototype,"cache",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Zn),Gc=Hc,Jc=(rs=function(e){Object(Je["a"])(r,e);var t=Object($e["a"])(r);function r(e){return Object(Qe["a"])(this,r),t.call(this,e)}return Object(He["a"])(r,[{key:"setPosition",value:function(e){this.home=e}},{key:"setCache",value:function(e){this.cache=e}},{key:"resetPosition",value:function(){this.home=-1}}]),r}(Gc),Object(ot["a"])(rs.prototype,"setPosition",[it["action"]],Object.getOwnPropertyDescriptor(rs.prototype,"setPosition"),rs.prototype),Object(ot["a"])(rs.prototype,"setCache",[it["action"]],Object.getOwnPropertyDescriptor(rs.prototype,"setCache"),rs.prototype),Object(ot["a"])(rs.prototype,"resetPosition",[it["action"]],Object.getOwnPropertyDescriptor(rs.prototype,"resetPosition"),rs.prototype),rs),$c=Jc,Xc=(as=Object(He["a"])((function e(t){Object(Qe["a"])(this,e),Object(at["a"])(this,"threadData",os,this),Object(at["a"])(this,"isReady",is,this),Object(at["a"])(this,"imgReady",ns,this),Object(at["a"])(this,"imgReadyLength",ss,this),this.threadData=null===t||void 0===t?void 0:t.thread})),os=Object(ot["a"])(as.prototype,"threadData",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),is=Object(ot["a"])(as.prototype,"isReady",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ns=Object(ot["a"])(as.prototype,"imgReady",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ss=Object(ot["a"])(as.prototype,"imgReadyLength",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),as),Zc=Xc,ep=(cs=function(e){Object(Je["a"])(r,e);var t=Object($e["a"])(r);function r(e){return Object(Qe["a"])(this,r),t.call(this,e)}return Object(He["a"])(r,[{key:"fetchThreadDetail",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r,a,o,i;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={threadId:t},e.next=3,Object(nt["readThreadDetail"])({params:r});case 3:return a=e.sent,o=a.code,i=a.data,0===o&&(this.setThreadData(i),this.setReady()),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setThreadData",value:function(e){this.setReady(),this.threadData=e,this.threadData.id=e.threadId}},{key:"setReady",value:function(){this.isReady=!0}},{key:"setImgReady",value:function(){this.imgReady=!0}},{key:"setImgReadyLength",value:function(){this.imgReadyLength=this.imgReadyLength+1}},{key:"clearImgReadyLength",value:function(){this.imgReadyLength=0}}]),r}(Zc),Object(ot["a"])(cs.prototype,"fetchThreadDetail",[it["action"]],Object.getOwnPropertyDescriptor(cs.prototype,"fetchThreadDetail"),cs.prototype),Object(ot["a"])(cs.prototype,"setThreadData",[it["action"]],Object.getOwnPropertyDescriptor(cs.prototype,"setThreadData"),cs.prototype),Object(ot["a"])(cs.prototype,"setReady",[it["action"]],Object.getOwnPropertyDescriptor(cs.prototype,"setReady"),cs.prototype),Object(ot["a"])(cs.prototype,"setImgReady",[it["action"]],Object.getOwnPropertyDescriptor(cs.prototype,"setImgReady"),cs.prototype),Object(ot["a"])(cs.prototype,"setImgReadyLength",[it["action"]],Object.getOwnPropertyDescriptor(cs.prototype,"setImgReadyLength"),cs.prototype),Object(ot["a"])(cs.prototype,"clearImgReadyLength",[it["action"]],Object.getOwnPropertyDescriptor(cs.prototype,"clearImgReadyLength"),cs.prototype),cs),tp=ep,rp=(ps=function(){function e(){Object(Qe["a"])(this,e),Object(at["a"])(this,"postId",us,this),Object(at["a"])(this,"commentList",ls,this),Object(at["a"])(this,"page",bs,this),Object(at["a"])(this,"isCommentListError",ds,this),Object(at["a"])(this,"postsPositionPage",hs,this)}return Object(He["a"])(e,[{key:"isCommentReady",get:function(){return!!this.commentList}},{key:"isShowCommentList",get:function(){return this.postsPositionPage>1}},{key:"isNoMore",get:function(){return this.page+1>=this.postsPositionPage}}]),e}(),us=Object(ot["a"])(ps.prototype,"postId",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ls=Object(ot["a"])(ps.prototype,"commentList",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),bs=Object(ot["a"])(ps.prototype,"page",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),ds=Object(ot["a"])(ps.prototype,"isCommentListError",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),hs=Object(ot["a"])(ps.prototype,"postsPositionPage",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(ot["a"])(ps.prototype,"isCommentReady",[it["computed"]],Object.getOwnPropertyDescriptor(ps.prototype,"isCommentReady"),ps.prototype),Object(ot["a"])(ps.prototype,"isShowCommentList",[it["computed"]],Object.getOwnPropertyDescriptor(ps.prototype,"isShowCommentList"),ps.prototype),Object(ot["a"])(ps.prototype,"isNoMore",[it["computed"]],Object.getOwnPropertyDescriptor(ps.prototype,"isNoMore"),ps.prototype),ps),ap=rp,op=(Os=function(e){Object(Je["a"])(r,e);var t=Object($e["a"])(r);function r(){return Object(Qe["a"])(this,r),t.apply(this,arguments)}return Object(He["a"])(r,[{key:"fetchPositionPosts",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(nt["positionPosts"])({params:{filter:t}});case 2:return r=e.sent,0===r.code&&(this.postsPositionPage=r.data.page),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"reset",value:function(e){this.commentList=null,this.isCommentListError=!1,this.postsPositionPage=null,this.postId=null}},{key:"setCommentList",value:function(e){this.commentList=e}},{key:"setPostId",value:function(e){this.postId=e}},{key:"setCommentListDetailField",value:function(e,t,r){var a;null!==(a=this.commentList)&&void 0!==a&&a.length&&this.commentList.forEach((function(a){a.id===e&&(a[t]=r)}))}},{key:"setReplyListDetailField",value:function(e,t,r,a){var o;null!==(o=this.commentList)&&void 0!==o&&o.length&&this.commentList.forEach((function(o){var i;o.id===e&&(null!==o&&void 0!==o&&null!==(i=o.lastThreeComments)&&void 0!==i&&i.length&&(null===o||void 0===o||o.lastThreeComments.forEach((function(e){e.id===t&&(e[r]=a)}))))}))}},{key:"loadCommentList",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r,a,o,i,n,s,c,p,u,l,b,d,h,O;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.id,o=t.page,i=void 0===o?1:o,n=t.perPage,s=void 0===n?20:n,c=t.sort,p=void 0===c?"createdAt":c,a){e.next=3;break}return e.abrupt("return",{msg:"\u5e16\u5b50id\u4e0d\u5b58\u5728",success:!1});case 3:return u={filter:{thread:Number(a)},sort:p,page:i,perPage:s,index:i},e.next=6,Object(nt["readCommentList"])({params:u});case 6:if(l=e.sent,0!==l.code||null===l||void 0===l||null===(r=l.data)||void 0===r||!r.pageData){e.next=12;break}return O=this.commentList,1===i?O=(null===l||void 0===l||null===(b=l.data)||void 0===b?void 0:b.pageData)||[]:(d=O).push.apply(d,Object(ht["a"])((null===l||void 0===l||null===(h=l.data)||void 0===h?void 0:h.pageData)||[])),this.setCommentList(this.commentListAdapter(O)),e.abrupt("return",{msg:"\u64cd\u4f5c\u6210\u529f",success:!0});case 12:return this.isCommentListError=!0,e.abrupt("return",{msg:l.msg,success:!1});case 14:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"commentListAdapter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.forEach((function(e){var t=e.lastThreeComments;(null===t||void 0===t?void 0:t.length)>1&&(e.lastThreeComments=[t[0]])})),e}}]),r}(ap),Object(ot["a"])(Os.prototype,"fetchPositionPosts",[it["action"]],Object.getOwnPropertyDescriptor(Os.prototype,"fetchPositionPosts"),Os.prototype),Object(ot["a"])(Os.prototype,"reset",[it["action"]],Object.getOwnPropertyDescriptor(Os.prototype,"reset"),Os.prototype),Object(ot["a"])(Os.prototype,"setCommentList",[it["action"]],Object.getOwnPropertyDescriptor(Os.prototype,"setCommentList"),Os.prototype),Object(ot["a"])(Os.prototype,"setPostId",[it["action"]],Object.getOwnPropertyDescriptor(Os.prototype,"setPostId"),Os.prototype),Object(ot["a"])(Os.prototype,"setCommentListDetailField",[it["action"]],Object.getOwnPropertyDescriptor(Os.prototype,"setCommentListDetailField"),Os.prototype),Object(ot["a"])(Os.prototype,"setReplyListDetailField",[it["action"]],Object.getOwnPropertyDescriptor(Os.prototype,"setReplyListDetailField"),Os.prototype),Object(ot["a"])(Os.prototype,"loadCommentList",[it["action"]],Object.getOwnPropertyDescriptor(Os.prototype,"loadCommentList"),Os.prototype),Os),ip=op,np=(ys=Object(He["a"])((function e(){Object(Qe["a"])(this,e),Object(at["a"])(this,"emojis",fs,this)})),fs=Object(ot["a"])(ys.prototype,"emojis",[it["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ys),sp=np,cp=r(263),pp=(gs=it["action"].bound,js=function(e){Object(Je["a"])(r,e);var t=Object($e["a"])(r);function r(e){var a;return Object(Qe["a"])(this,r),a=t.call(this,e),a.storage=new cp["a"]({storageType:"local"}),a}return Object(He["a"])(r,[{key:"setEmoji",value:function(e){this.emojis=e,this.storage&&this.storage.set("DZQ_EMOJI",JSON.stringify(e))}},{key:"fetchEmoji",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){var t,r,a,o,i;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(nt["readEmoji"])();case 2:return t=e.sent,r=t.code,a=t.data,o=void 0===a?[]:a,i=[],0===r&&(i=o.map((function(e){return{code:e.code,url:e.url}}))),this.setEmoji(i),e.abrupt("return",t);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"asyncGetEmoji",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){var t,r;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!==(t=this.emojis)&&void 0!==t&&t.length||!this.storage){e.next=7;break}if(r=JSON.parse(this.storage.get("DZQ_EMOJI")||"{}"),null!==r&&void 0!==r&&r.length){e.next=6;break}return e.next=5,fetchEmoji();case 5:return e.abrupt("return",this.emojis);case 6:return e.abrupt("return",r);case 7:return e.abrupt("return",this.emojis);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),r}(sp),Object(ot["a"])(js.prototype,"setEmoji",[gs],Object.getOwnPropertyDescriptor(js.prototype,"setEmoji"),js.prototype),js),up=pp,lp=r(426),bp=r.n(lp);function dp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.site,r=void 0===t?{}:t,a=e.user,o=void 0===a?{}:a;return Object(rt["a"])()?{site:new bt(Object(We["a"])({envConfig:tt["b"]},r)),plugin:new bp.a,index:new Pt,user:new Et(o),card:new tp,thread:new Ls,userLogin:new Zs,userRegister:new ec,mobileLogin:new tc["b"],nicknameBind:new ac,supplementary:new oc,mobileBind:new nc,comment:new zs,threadPost:new Hs,message:new Ic,h5QrCode:new hc,resetPassword:new cc,commonLogin:new pc["a"],search:new gc,wxPhoneBind:new lc,miniBind:new bc,payBox:new wc,topic:new Fs,invite:new kc["a"],forum:new Dc,baselayout:new Mc,wallet:new Qc,vlist:new $c,commentPosition:new ip,emotion:new up,threadList:new yt["a"]}:(null===Uc.getStore()&&Uc.setStore({site:new bt(Object(We["a"])({envConfig:tt["b"]},r)),plugin:new bp.a,index:new Pt,user:new Et(o),card:new tp,thread:new Ls,userLogin:new Zs,userRegister:new ec,mobileLogin:new tc["b"],nicknameBind:new ac,supplementary:new oc,mobileBind:new nc,comment:new zs,threadPost:new Hs,message:new Ic,h5QrCode:new hc,resetPassword:new cc,commonLogin:new pc["a"],search:new gc,wxPhoneBind:new lc,payBox:new wc,topic:new Fs,miniBind:new bc,invite:new kc["a"],forum:new Dc,baselayout:new Mc,wallet:new Qc,vlist:new $c,commentPosition:new ip,emotion:new up,threadList:new yt["a"]}),Uc.getStore())}Object(et["useStaticRendering"])(Object(rt["a"])());var hp=r(11),Op=r.n(hp),yp=r(26),fp=r.n(yp),gp=r(241),jp=r(40),mp=r(83),vp=r.n(mp),wp=r(288),kp=(r(913),r(0));var Pp=dp();vp.a.initStore(Pp.plugin.setPluginComponent.bind(Pp.plugin));var Dp=function(e){Object(Je["a"])(r,e);var t=Object($e["a"])(r);function r(){var e;Object(Qe["a"])(this,r);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),Object(Xe["a"])(Object(Ge["a"])(e),"store",Pp),e}return Object(He["a"])(r,[{key:"componentDidMount",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(){return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onLaunch",value:function(){var e=Object(Ke["a"])(Object(Ye["a"])().mark((function e(t){var r,a,o,i,n,s,c,p,u,l,b,d;return Object(Ye["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.scene,t.query,1154!==r){e.next=3;break}return e.abrupt("return");case 3:if(a=this.store.site,o=a.envConfig,i=o.TITLE,i&&""!==i&&Object(gp["a"])(i),n=Op.a.getCurrentInstance(),s=n.router,c=s.path,p=s.params,-1===c.indexOf("pages/index/index")){for(d in u=c,l="",b=[],p)b.push("".concat(d,"=").concat(p[d]));b.length>0&&(l=b.join("&")),""!==l&&(u="".concat(u,"?").concat(l)),"/"!==u[0]&&(u="/".concat(u)),fp.a.redirect({url:"/pages/index/index?path=".concat(encodeURIComponent(u)),fail:function(e){console.log(e)}})}case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"componentDidShow",value:function(e){this.onCaptchaResult(e);try{var t,r=e.path,a=e.query;"pages/index/index"===r?t=decodeURIComponent(a.path||""):(t=r,Object.keys(a).length>0&&(t="".concat(r,"?").concat(Object.entries(a).map((function(e){var t=Object(qe["a"])(e,2),r=t[0],a=t[1];return"".concat(r,"=").concat(a)})).join("&")))),jp["a"].setUrl(t)}catch(e){console.log("savePageJump",e)}Op.a.removeStorageSync(wp["a"])}},{key:"onPageNotFound",value:function(e){fp.a.redirect({url:"/subPages/404/index"})}},{key:"onCaptchaResult",value:function(e){if(this.captchaTicketExpire||(this.captchaTicketExpire={}),1038===e.scene&&"wx5a3a7366fd07e119"===e.referrerInfo.appId){var t=e.referrerInfo.extraData;if(t&&0===t.ret){var r=t.ticket;this.captchaTicketExpire[r]||(this.captchaTicketExpire[r]=!0,Op.a.eventCenter.trigger("captchaResult",t))}else Op.a.eventCenter.trigger("closeChaReault",t)}}},{key:"render",value:function(){var e=this.props.children;return Object(kp["jsx"])(et["Provider"],Object(We["a"])(Object(We["a"])({},this.store),{},{children:e}))}}]),r}(Ze["Component"]),Tp=Dp,xp=r(284),Cp={pages:["pages/index/index"],subPackages:[{root:"indexPages",pages:["home/index","thread/index","thread/comment/index","thread/post/index","thread/selectAt/index","thread/selectTopic/index","thread/selectProduct/index","thread/selectRedpacket/index","thread/selectReward/index","thread/selectPayment/index","thread/voteEditor/index"]},{root:"subPages",pages:["404/index","500/index","no-install/index","close/index","create-card/index","join/index","search/index","search/result-topic/index","search/result-post/index","search/result-user/index","search/result/index","topic/index","topic/topic-detail/index","wallet/index","wallet/frozen/index","wallet/withdrawal/index","wallet/recharge/index","forum/index","forum/partner-invite/index","invite/index","message/index"]},{root:"userPages",pages:["user/index","user/wx-bind/index","user/wx-select/index","user/wx-bind-username/index","user/wx-bind-phone/index","user/status/index","user/bind-phone/index","user/bind-nickname/index","user/wx-auth/index","user/wx-authorization/index","user/supplementary/index","user/reset-password/index","user/rebind/index","user/wx-rebind-action/index","my/index","my/buy/index","my/collect/index","my/like/index","my/edit/index","my/draft/index","my/upgrade/index","my/edit/mobile/index","my/edit/pwd/index","my/edit/paypwd/index","my/edit/reset/paypwd/index","my/edit/find/paypwd/index","my/edit/username/index","my/edit/additional-info/index","my/fans/index","my/follows/index","my/block/index","my/renew/index"]},{root:"pluginPages",pages:["selectProduct/index"]}],permission:{"scope.userLocation":{desc:"\u5c0f\u7a0b\u5e8f\u5c06\u83b7\u53d6\u60a8\u7684\u4f4d\u7f6e\u4fe1\u606f"}},window:{backgroundTextStyle:"light",navigationBarBackgroundColor:"#fff",navigationBarTextStyle:"black"},preloadRule:{"pages/index/index":{network:"all",packages:["indexPages"]},"indexPages/home/index":{network:"all",packages:["subPages"]},"indexPages/thread/index":{network:"all",packages:["userPages"]}}};Be["window"].__taroAppConfig=Cp;App(Object(Be["createReactApp"])(Tp,Ze,xp["default"],Cp))},424:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return z}));var a,o,i,n,s,c,p,u,l,b,d,h,O,y,f,g,j,m,v,w,k,P,D,T=r(68),x=r(14),C=r(12),I=r(13),L=(r(3),r(7)),S=(r(62),r(5)),U=r(55),E=r(78),R=(r(20),{"-4009":"\u60a8\u7684\u8d26\u53f7\u5df2\u7981\u7528",2:"\u606d\u559c\u60a8\uff01\u5df2\u6210\u529f\u767b\u5f55\u3002\u5148\u968f\u4fbf\u901b\u901b\u7b49\u5f85\u8d26\u53f7\u5ba1\u6838\u901a\u8fc7\uff01","-4007":"\u60a8\u7684\u8d26\u53f7\u6ce8\u518c\u5ba1\u6838\u4e0d\u901a\u8fc7"}),z=(a=function(){function t(){Object(C["a"])(this,t),Object(x["a"])(this,"needToSetNickname",o,this),Object(x["a"])(this,"needToCompleteExtraInfo",i,this),Object(x["a"])(this,"needToBindPhone",n,this),Object(x["a"])(this,"needToBindWechat",s,this),Object(x["a"])(this,"needToBindMini",c,this),Object(x["a"])(this,"sessionToken",p,this),Object(x["a"])(this,"statusMessage",u,this),Object(x["a"])(this,"statusCountDown",l,this),Object(x["a"])(this,"nickName",b,this),Object(x["a"])(this,"avatarUrl",d,this),Object(x["a"])(this,"captchaTicket",h,this),Object(x["a"])(this,"captchaRandStr",O,this),Object(x["a"])(this,"captcha",y,this),Object(x["a"])(this,"isSend",f,this),Object(x["a"])(this,"statusCode",g,this),Object(x["a"])(this,"statusMsg",j,this),Object(x["a"])(this,"jsCode",m,this),Object(x["a"])(this,"protocolVisible",v,this),Object(x["a"])(this,"protocolStatus",w,this),Object(x["a"])(this,"loginLoading",k,this),Object(x["a"])(this,"loginToken",P,this),Object(x["a"])(this,"reset",D,this)}return Object(I["a"])(t,[{key:"getLoginToken",value:function(){var t,r,a;"object"===("undefined"===typeof e?"undefined":Object(T["a"])(e))&&(t=(null===(r=e)||void 0===r||null===(a=r.sessionStorage)||void 0===a?void 0:a.getItem("loginToken"))||this.loginToken||"");return t}},{key:"setLoginToken",value:function(t){var r;this.loginToken=t,"object"===("undefined"===typeof e?"undefined":Object(T["a"])(e))&&(null===(r=e.sessionStorage)||void 0===r||r.setItem("loginToken",t))}},{key:"setLoginLoading",value:function(e){this.loginLoading=e}},{key:"setStatusCountDown",value:function(e){this.statusCountDown=e}},{key:"setProtocolInfo",value:function(e){this.setProtocolVisible(!0),this.setProtocolStatus(e)}},{key:"setProtocolVisible",value:function(e){this.protocolVisible=e}},{key:"setProtocolStatus",value:function(e){this.protocolStatus=e}},{key:"setUserId",value:function(e){if(e){var t=2592e6;Object(E["b"])("dzq_user_id",e,30),U["a"].set("dzq_user_id",e,t)}}},{key:"setSessionToken",value:function(e){this.sessionToken=e}},{key:"setIsSend",value:function(e){this.isSend=e}},{key:"setNickname",value:function(e){this.nickName=e}},{key:"setAvatarUrl",value:function(e){this.avatarUrl=e}},{key:"setStatusMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=t?"\uff0c\u539f\u56e0\uff1a".concat(t):"";return this.statusCode=e,this.statusMsg=t,this.statusMessage="".concat(R[e]||"").concat(r),this.statusMessage}},{key:"setJsCode",value:function(e){this.jsCode=e}}]),t}(),o=Object(L["a"])(a.prototype,"needToSetNickname",[S["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i=Object(L["a"])(a.prototype,"needToCompleteExtraInfo",[S["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),n=Object(L["a"])(a.prototype,"needToBindPhone",[S["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),s=Object(L["a"])(a.prototype,"needToBindWechat",[S["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c=Object(L["a"])(a.prototype,"needToBindMini",[S["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),p=Object(L["a"])(a.prototype,"sessionToken",[S["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),u=Object(L["a"])(a.prototype,"statusMessage",[S["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=Object(L["a"])(a.prototype,"statusCountDown",[S["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),b=Object(L["a"])(a.prototype,"nickName",[S["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=Object(L["a"])(a.prototype,"avatarUrl",[S["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=Object(L["a"])(a.prototype,"captchaTicket",[S["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),O=Object(L["a"])(a.prototype,"captchaRandStr",[S["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=Object(L["a"])(a.prototype,"captcha",[S["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=Object(L["a"])(a.prototype,"isSend",[S["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),g=Object(L["a"])(a.prototype,"statusCode",[S["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=Object(L["a"])(a.prototype,"statusMsg",[S["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),m=Object(L["a"])(a.prototype,"jsCode",[S["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=Object(L["a"])(a.prototype,"protocolVisible",[S["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=Object(L["a"])(a.prototype,"protocolStatus",[S["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"register"}}),k=Object(L["a"])(a.prototype,"loginLoading",[S["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),P=Object(L["a"])(a.prototype,"loginToken",[S["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Object(L["a"])(a.prototype,"getLoginToken",[S["action"]],Object.getOwnPropertyDescriptor(a.prototype,"getLoginToken"),a.prototype),Object(L["a"])(a.prototype,"setLoginToken",[S["action"]],Object.getOwnPropertyDescriptor(a.prototype,"setLoginToken"),a.prototype),Object(L["a"])(a.prototype,"setLoginLoading",[S["action"]],Object.getOwnPropertyDescriptor(a.prototype,"setLoginLoading"),a.prototype),D=Object(L["a"])(a.prototype,"reset",[S["action"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.loginLoading=!0}}}),Object(L["a"])(a.prototype,"setStatusCountDown",[S["action"]],Object.getOwnPropertyDescriptor(a.prototype,"setStatusCountDown"),a.prototype),Object(L["a"])(a.prototype,"setProtocolInfo",[S["action"]],Object.getOwnPropertyDescriptor(a.prototype,"setProtocolInfo"),a.prototype),Object(L["a"])(a.prototype,"setProtocolVisible",[S["action"]],Object.getOwnPropertyDescriptor(a.prototype,"setProtocolVisible"),a.prototype),Object(L["a"])(a.prototype,"setProtocolStatus",[S["action"]],Object.getOwnPropertyDescriptor(a.prototype,"setProtocolStatus"),a.prototype),Object(L["a"])(a.prototype,"setUserId",[S["action"]],Object.getOwnPropertyDescriptor(a.prototype,"setUserId"),a.prototype),Object(L["a"])(a.prototype,"setSessionToken",[S["action"]],Object.getOwnPropertyDescriptor(a.prototype,"setSessionToken"),a.prototype),Object(L["a"])(a.prototype,"setIsSend",[S["action"]],Object.getOwnPropertyDescriptor(a.prototype,"setIsSend"),a.prototype),Object(L["a"])(a.prototype,"setNickname",[S["action"]],Object.getOwnPropertyDescriptor(a.prototype,"setNickname"),a.prototype),Object(L["a"])(a.prototype,"setAvatarUrl",[S["action"]],Object.getOwnPropertyDescriptor(a.prototype,"setAvatarUrl"),a.prototype),Object(L["a"])(a.prototype,"setStatusMessage",[S["action"]],Object.getOwnPropertyDescriptor(a.prototype,"setStatusMessage"),a.prototype),Object(L["a"])(a.prototype,"setJsCode",[S["action"]],Object.getOwnPropertyDescriptor(a.prototype,"setJsCode"),a.prototype),a)}).call(this,r(21)["window"])},425:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return m}));var a,o,i,n,s,c,p,u=r(2),l=r(6),b=r(68),d=r(14),h=r(12),O=r(13),y=(r(3),r(7)),f=(r(62),r(5)),g=r(287),j=r(20),m=(a=function(){function t(){Object(h["a"])(this,t),Object(d["a"])(this,"inviteData",o,this),Object(d["a"])(this,"inviteUsersList",i,this),Object(d["a"])(this,"inviteCode",n,this),Object(d["a"])(this,"inviteLoading",s,this),Object(d["a"])(this,"totalPage",c,this),Object(d["a"])(this,"currentPage",p,this)}return Object(O["a"])(t,[{key:"isNoData",get:function(){return this.currentPage>=this.totalPage}},{key:"setInviteLoading",value:function(e){this.inviteLoading=e}},{key:"getInviteCode",value:function(t){var r,a,o,i;"object"===("undefined"===typeof e?"undefined":Object(b["a"])(e))&&(r=(null===t||void 0===t||null===(a=t.query)||void 0===a?void 0:a.inviteCode)||(null===(o=e)||void 0===o||null===(i=o.sessionStorage)||void 0===i?void 0:i.getItem("inviteCode"))||this.inviteCode||"");return r}},{key:"setInviteCode",value:function(t){var r;this.inviteCode=t,"object"===("undefined"===typeof e?"undefined":Object(b["a"])(e))&&(null===(r=e.sessionStorage)||void 0===r||r.setItem("inviteCode",t))}},{key:"getInviteUsersList",value:function(){var e=Object(l["a"])(Object(u["a"])().mark((function e(){var t,r,a,o,i=arguments;return Object(u["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=i.length>0&&void 0!==i[0]?i[0]:1,this.inviteLoading=!0,e.next=4,Object(g["a"])("inviteUsersList",{params:{page:r}});case 4:a=e.sent,this.inviteData=a.pageData,this.totalPage=a.totalPage,this.currentPage=a.currentPage,this.inviteLoading=!1,o=Object(j["a"])(a,"pageData.inviteUsersList",null),this.inviteUsersList=1===r?o:null===(t=this.inviteUsersList)||void 0===t?void 0:t.concat(o);case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),t}(),o=Object(y["a"])(a.prototype,"inviteData",[f["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),i=Object(y["a"])(a.prototype,"inviteUsersList",[f["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),n=Object(y["a"])(a.prototype,"inviteCode",[f["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=Object(y["a"])(a.prototype,"inviteLoading",[f["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),c=Object(y["a"])(a.prototype,"totalPage",[f["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=Object(y["a"])(a.prototype,"currentPage",[f["observable"]],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(y["a"])(a.prototype,"isNoData",[f["computed"]],Object.getOwnPropertyDescriptor(a.prototype,"isNoData"),a.prototype),Object(y["a"])(a.prototype,"setInviteLoading",[f["action"]],Object.getOwnPropertyDescriptor(a.prototype,"setInviteLoading"),a.prototype),Object(y["a"])(a.prototype,"getInviteCode",[f["action"]],Object.getOwnPropertyDescriptor(a.prototype,"getInviteCode"),a.prototype),Object(y["a"])(a.prototype,"setInviteCode",[f["action"]],Object.getOwnPropertyDescriptor(a.prototype,"setInviteCode"),a.prototype),Object(y["a"])(a.prototype,"getInviteUsersList",[f["action"]],Object.getOwnPropertyDescriptor(a.prototype,"getInviteUsersList"),a.prototype),a)}).call(this,r(21)["window"])},913:function(e,t,r){}},[[1105,0,4,2,1,3]]]);